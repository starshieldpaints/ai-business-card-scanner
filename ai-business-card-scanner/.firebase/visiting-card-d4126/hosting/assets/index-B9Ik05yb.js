(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();function uv(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var kf={exports:{}},Jo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function wT(){if(Ty)return Jo;Ty=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,l,h){var d=null;if(h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),"key"in l){h={};for(var g in l)g!=="key"&&(h[g]=l[g])}else h=l;return l=h.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:h}}return Jo.Fragment=e,Jo.jsx=i,Jo.jsxs=i,Jo}var Ay;function CT(){return Ay||(Ay=1,kf.exports=wT()),kf.exports}var H=CT(),zf={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function IT(){if(by)return Rt;by=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),D=Symbol.iterator;function S(I){return I===null||typeof I!="object"?null:(I=D&&I[D]||I["@@iterator"],typeof I=="function"?I:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,tt={};function W(I,Z,it){this.props=I,this.context=Z,this.refs=tt,this.updater=it||B}W.prototype.isReactComponent={},W.prototype.setState=function(I,Z){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,Z,"setState")},W.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function wt(){}wt.prototype=W.prototype;function mt(I,Z,it){this.props=I,this.context=Z,this.refs=tt,this.updater=it||B}var dt=mt.prototype=new wt;dt.constructor=mt,K(dt,W.prototype),dt.isPureReactComponent=!0;var Mt=Array.isArray,_t={H:null,A:null,T:null,S:null,V:null},Ut=Object.prototype.hasOwnProperty;function V(I,Z,it,J,ht,St){return it=St.ref,{$$typeof:a,type:I,key:Z,ref:it!==void 0?it:null,props:St}}function b(I,Z){return V(I.type,Z,void 0,void 0,void 0,I.props)}function C(I){return typeof I=="object"&&I!==null&&I.$$typeof===a}function O(I){var Z={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(it){return Z[it]})}var x=/\/+/g;function M(I,Z){return typeof I=="object"&&I!==null&&I.key!=null?O(""+I.key):Z.toString(36)}function w(){}function ye(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(w,w):(I.status="pending",I.then(function(Z){I.status==="pending"&&(I.status="fulfilled",I.value=Z)},function(Z){I.status==="pending"&&(I.status="rejected",I.reason=Z)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function Ft(I,Z,it,J,ht){var St=typeof I;(St==="undefined"||St==="boolean")&&(I=null);var vt=!1;if(I===null)vt=!0;else switch(St){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(I.$$typeof){case a:case e:vt=!0;break;case A:return vt=I._init,Ft(vt(I._payload),Z,it,J,ht)}}if(vt)return ht=ht(I),vt=J===""?"."+M(I,0):J,Mt(ht)?(it="",vt!=null&&(it=vt.replace(x,"$&/")+"/"),Ft(ht,Z,it,"",function(wn){return wn})):ht!=null&&(C(ht)&&(ht=b(ht,it+(ht.key==null||I&&I.key===ht.key?"":(""+ht.key).replace(x,"$&/")+"/")+vt)),Z.push(ht)),1;vt=0;var Ae=J===""?".":J+":";if(Mt(I))for(var $t=0;$t<I.length;$t++)J=I[$t],St=Ae+M(J,$t),vt+=Ft(J,Z,it,St,ht);else if($t=S(I),typeof $t=="function")for(I=$t.call(I),$t=0;!(J=I.next()).done;)J=J.value,St=Ae+M(J,$t++),vt+=Ft(J,Z,it,St,ht);else if(St==="object"){if(typeof I.then=="function")return Ft(ye(I),Z,it,J,ht);throw Z=String(I),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return vt}function G(I,Z,it){if(I==null)return I;var J=[],ht=0;return Ft(I,J,"","",function(St){return Z.call(it,St,ht++)}),J}function nt(I){if(I._status===-1){var Z=I._result;Z=Z(),Z.then(function(it){(I._status===0||I._status===-1)&&(I._status=1,I._result=it)},function(it){(I._status===0||I._status===-1)&&(I._status=2,I._result=it)}),I._status===-1&&(I._status=0,I._result=Z)}if(I._status===1)return I._result.default;throw I._result}var lt=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function jt(){}return Rt.Children={map:G,forEach:function(I,Z,it){G(I,function(){Z.apply(this,arguments)},it)},count:function(I){var Z=0;return G(I,function(){Z++}),Z},toArray:function(I){return G(I,function(Z){return Z})||[]},only:function(I){if(!C(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Rt.Component=W,Rt.Fragment=i,Rt.Profiler=l,Rt.PureComponent=mt,Rt.StrictMode=s,Rt.Suspense=_,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_t,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return _t.H.useMemoCache(I)}},Rt.cache=function(I){return function(){return I.apply(null,arguments)}},Rt.cloneElement=function(I,Z,it){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var J=K({},I.props),ht=I.key,St=void 0;if(Z!=null)for(vt in Z.ref!==void 0&&(St=void 0),Z.key!==void 0&&(ht=""+Z.key),Z)!Ut.call(Z,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&Z.ref===void 0||(J[vt]=Z[vt]);var vt=arguments.length-2;if(vt===1)J.children=it;else if(1<vt){for(var Ae=Array(vt),$t=0;$t<vt;$t++)Ae[$t]=arguments[$t+2];J.children=Ae}return V(I.type,ht,void 0,void 0,St,J)},Rt.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:h,_context:I},I},Rt.createElement=function(I,Z,it){var J,ht={},St=null;if(Z!=null)for(J in Z.key!==void 0&&(St=""+Z.key),Z)Ut.call(Z,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ht[J]=Z[J]);var vt=arguments.length-2;if(vt===1)ht.children=it;else if(1<vt){for(var Ae=Array(vt),$t=0;$t<vt;$t++)Ae[$t]=arguments[$t+2];ht.children=Ae}if(I&&I.defaultProps)for(J in vt=I.defaultProps,vt)ht[J]===void 0&&(ht[J]=vt[J]);return V(I,St,void 0,void 0,null,ht)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(I){return{$$typeof:g,render:I}},Rt.isValidElement=C,Rt.lazy=function(I){return{$$typeof:A,_payload:{_status:-1,_result:I},_init:nt}},Rt.memo=function(I,Z){return{$$typeof:v,type:I,compare:Z===void 0?null:Z}},Rt.startTransition=function(I){var Z=_t.T,it={};_t.T=it;try{var J=I(),ht=_t.S;ht!==null&&ht(it,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(jt,lt)}catch(St){lt(St)}finally{_t.T=Z}},Rt.unstable_useCacheRefresh=function(){return _t.H.useCacheRefresh()},Rt.use=function(I){return _t.H.use(I)},Rt.useActionState=function(I,Z,it){return _t.H.useActionState(I,Z,it)},Rt.useCallback=function(I,Z){return _t.H.useCallback(I,Z)},Rt.useContext=function(I){return _t.H.useContext(I)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(I,Z){return _t.H.useDeferredValue(I,Z)},Rt.useEffect=function(I,Z,it){var J=_t.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(I,Z)},Rt.useId=function(){return _t.H.useId()},Rt.useImperativeHandle=function(I,Z,it){return _t.H.useImperativeHandle(I,Z,it)},Rt.useInsertionEffect=function(I,Z){return _t.H.useInsertionEffect(I,Z)},Rt.useLayoutEffect=function(I,Z){return _t.H.useLayoutEffect(I,Z)},Rt.useMemo=function(I,Z){return _t.H.useMemo(I,Z)},Rt.useOptimistic=function(I,Z){return _t.H.useOptimistic(I,Z)},Rt.useReducer=function(I,Z,it){return _t.H.useReducer(I,Z,it)},Rt.useRef=function(I){return _t.H.useRef(I)},Rt.useState=function(I){return _t.H.useState(I)},Rt.useSyncExternalStore=function(I,Z,it){return _t.H.useSyncExternalStore(I,Z,it)},Rt.useTransition=function(){return _t.H.useTransition()},Rt.version="19.1.0",Rt}var Sy;function Sd(){return Sy||(Sy=1,zf.exports=IT()),zf.exports}var fe=Sd();const ks=uv(fe);var Bf={exports:{}},Wo={},jf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function DT(){return Ry||(Ry=1,function(a){function e(G,nt){var lt=G.length;G.push(nt);t:for(;0<lt;){var jt=lt-1>>>1,I=G[jt];if(0<l(I,nt))G[jt]=nt,G[lt]=I,lt=jt;else break t}}function i(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var nt=G[0],lt=G.pop();if(lt!==nt){G[0]=lt;t:for(var jt=0,I=G.length,Z=I>>>1;jt<Z;){var it=2*(jt+1)-1,J=G[it],ht=it+1,St=G[ht];if(0>l(J,lt))ht<I&&0>l(St,J)?(G[jt]=St,G[ht]=lt,jt=ht):(G[jt]=J,G[it]=lt,jt=it);else if(ht<I&&0>l(St,lt))G[jt]=St,G[ht]=lt,jt=ht;else break t}}return nt}function l(G,nt){var lt=G.sortIndex-nt.sortIndex;return lt!==0?lt:G.id-nt.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;a.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();a.unstable_now=function(){return d.now()-g}}var _=[],v=[],A=1,D=null,S=3,B=!1,K=!1,tt=!1,W=!1,wt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,dt=typeof setImmediate<"u"?setImmediate:null;function Mt(G){for(var nt=i(v);nt!==null;){if(nt.callback===null)s(v);else if(nt.startTime<=G)s(v),nt.sortIndex=nt.expirationTime,e(_,nt);else break;nt=i(v)}}function _t(G){if(tt=!1,Mt(G),!K)if(i(_)!==null)K=!0,Ut||(Ut=!0,M());else{var nt=i(v);nt!==null&&Ft(_t,nt.startTime-G)}}var Ut=!1,V=-1,b=5,C=-1;function O(){return W?!0:!(a.unstable_now()-C<b)}function x(){if(W=!1,Ut){var G=a.unstable_now();C=G;var nt=!0;try{t:{K=!1,tt&&(tt=!1,mt(V),V=-1),B=!0;var lt=S;try{e:{for(Mt(G),D=i(_);D!==null&&!(D.expirationTime>G&&O());){var jt=D.callback;if(typeof jt=="function"){D.callback=null,S=D.priorityLevel;var I=jt(D.expirationTime<=G);if(G=a.unstable_now(),typeof I=="function"){D.callback=I,Mt(G),nt=!0;break e}D===i(_)&&s(_),Mt(G)}else s(_);D=i(_)}if(D!==null)nt=!0;else{var Z=i(v);Z!==null&&Ft(_t,Z.startTime-G),nt=!1}}break t}finally{D=null,S=lt,B=!1}nt=void 0}}finally{nt?M():Ut=!1}}}var M;if(typeof dt=="function")M=function(){dt(x)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ye=w.port2;w.port1.onmessage=x,M=function(){ye.postMessage(null)}}else M=function(){wt(x,0)};function Ft(G,nt){V=wt(function(){G(a.unstable_now())},nt)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(G){G.callback=null},a.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(G){switch(S){case 1:case 2:case 3:var nt=3;break;default:nt=S}var lt=S;S=nt;try{return G()}finally{S=lt}},a.unstable_requestPaint=function(){W=!0},a.unstable_runWithPriority=function(G,nt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var lt=S;S=G;try{return nt()}finally{S=lt}},a.unstable_scheduleCallback=function(G,nt,lt){var jt=a.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?jt+lt:jt):lt=jt,G){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=lt+I,G={id:A++,callback:nt,priorityLevel:G,startTime:lt,expirationTime:I,sortIndex:-1},lt>jt?(G.sortIndex=lt,e(v,G),i(_)===null&&G===i(v)&&(tt?(mt(V),V=-1):tt=!0,Ft(_t,lt-jt))):(G.sortIndex=I,e(_,G),K||B||(K=!0,Ut||(Ut=!0,M()))),G},a.unstable_shouldYield=O,a.unstable_wrapCallback=function(G){var nt=S;return function(){var lt=S;S=nt;try{return G.apply(this,arguments)}finally{S=lt}}}}(qf)),qf}var wy;function NT(){return wy||(wy=1,jf.exports=DT()),jf.exports}var Hf={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function OT(){if(Cy)return nn;Cy=1;var a=Sd();function e(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(_,v,A){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:D==null?null:""+D,children:_,containerInfo:v,implementation:A}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(_,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return h(_,v,null,A)},nn.flushSync=function(_){var v=d.T,A=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=v,s.p=A,s.d.f()}},nn.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(_,v))},nn.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},nn.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var A=v.as,D=g(A,v.crossOrigin),S=typeof v.integrity=="string"?v.integrity:void 0,B=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;A==="style"?s.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:D,integrity:S,fetchPriority:B}):A==="script"&&s.d.X(_,{crossOrigin:D,integrity:S,fetchPriority:B,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},nn.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var A=g(v.as,v.crossOrigin);s.d.M(_,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(_)},nn.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var A=v.as,D=g(A,v.crossOrigin);s.d.L(_,A,{crossOrigin:D,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},nn.preloadModule=function(_,v){if(typeof _=="string")if(v){var A=g(v.as,v.crossOrigin);s.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(_)},nn.requestFormReset=function(_){s.d.r(_)},nn.unstable_batchedUpdates=function(_,v){return _(v)},nn.useFormState=function(_,v,A){return d.H.useFormState(_,v,A)},nn.useFormStatus=function(){return d.H.useHostTransitionStatus()},nn.version="19.1.0",nn}var Iy;function VT(){if(Iy)return Hf.exports;Iy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Hf.exports=OT(),Hf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function xT(){if(Dy)return Wo;Dy=1;var a=NT(),e=Sd(),i=VT();function s(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(h(t)!==t)throw Error(s(188))}function _(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(s(188));return n!==t?null:t}for(var r=t,o=n;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(o=c.return,o!==null){r=o;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return g(c),t;if(f===o)return g(c),n;f=f.sibling}throw Error(s(188))}if(r.return!==o.return)r=c,o=f;else{for(var y=!1,E=c.child;E;){if(E===r){y=!0,r=c,o=f;break}if(E===o){y=!0,o=c,r=f;break}E=E.sibling}if(!y){for(E=f.child;E;){if(E===r){y=!0,r=f,o=c;break}if(E===o){y=!0,o=f,r=c;break}E=E.sibling}if(!y)throw Error(s(189))}}if(r.alternate!==o)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var A=Object.assign,D=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),wt=Symbol.for("react.provider"),mt=Symbol.for("react.consumer"),dt=Symbol.for("react.context"),Mt=Symbol.for("react.forward_ref"),_t=Symbol.for("react.suspense"),Ut=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function ye(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case K:return"Fragment";case W:return"Profiler";case tt:return"StrictMode";case _t:return"Suspense";case Ut:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case dt:return(t.displayName||"Context")+".Provider";case mt:return(t._context.displayName||"Context")+".Consumer";case Mt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return n=t.displayName||null,n!==null?n:ye(t.type)||"Memo";case b:n=t._payload,t=t._init;try{return ye(t(n))}catch{}}return null}var Ft=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},jt=[],I=-1;function Z(t){return{current:t}}function it(t){0>I||(t.current=jt[I],jt[I]=null,I--)}function J(t,n){I++,jt[I]=t.current,t.current=n}var ht=Z(null),St=Z(null),vt=Z(null),Ae=Z(null);function $t(t,n){switch(J(vt,n),J(St,t),J(ht,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Xp(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Xp(n),t=$p(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}it(ht),J(ht,t)}function wn(){it(ht),it(St),it(vt)}function Xn(t){t.memoizedState!==null&&J(Ae,t);var n=ht.current,r=$p(n,t.type);n!==r&&(J(St,t),J(ht,r))}function Bn(t){St.current===t&&(it(ht),it(St)),Ae.current===t&&(it(Ae),Qo._currentValue=lt)}var _i=Object.prototype.hasOwnProperty,vi=a.unstable_scheduleCallback,Ei=a.unstable_cancelCallback,qr=a.unstable_shouldYield,ot=a.unstable_requestPaint,ct=a.unstable_now,Ct=a.unstable_getCurrentPriorityLevel,bt=a.unstable_ImmediatePriority,ne=a.unstable_UserBlockingPriority,oe=a.unstable_NormalPriority,Fe=a.unstable_LowPriority,ie=a.unstable_IdlePriority,Ye=a.log,ke=a.unstable_setDisableYieldValue,Zt=null,qt=null;function Ne(t){if(typeof Ye=="function"&&ke(t),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Zt,t)}catch{}}var le=Math.clz32?Math.clz32:Hr,$i=Math.log,Fs=Math.LN2;function Hr(t){return t>>>=0,t===0?32:31-($i(t)/Fs|0)|0}var Gr=256,Fr=4194304;function jn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function xa(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var c=0,f=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?c=jn(o):(y&=E,y!==0?c=jn(y):r||(r=E&~t,r!==0&&(c=jn(r))))):(E=o&~f,E!==0?c=jn(E):y!==0?c=jn(y):r||(r=o&~t,r!==0&&(c=jn(r)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,r=n&-n,f>=r||f===32&&(r&4194048)!==0)?n:c}function Yr(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Ys(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qs(){var t=Gr;return Gr<<=1,(Gr&4194048)===0&&(Gr=256),t}function Ks(){var t=Fr;return Fr<<=1,(Fr&62914560)===0&&(Fr=4194304),t}function Ti(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Ai(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Xs(t,n,r,o,c,f){var y=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,R=t.expirationTimes,k=t.hiddenUpdates;for(r=y&~r;0<r;){var F=31-le(r),X=1<<F;E[F]=0,R[F]=-1;var z=k[F];if(z!==null)for(k[F]=null,F=0;F<z.length;F++){var j=z[F];j!==null&&(j.lane&=-536870913)}r&=~X}o!==0&&$n(t,o,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(y&~n))}function $n(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-le(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&4194090}function $s(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-le(r),c=1<<o;c&n|t[o]&n&&(t[o]|=n),r&=~c}}function Zi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ma(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ji(){var t=nt.p;return t!==0?t:(t=window.event,t===void 0?32:gy(t.type))}function Dl(t,n){var r=nt.p;try{return nt.p=t,n()}finally{nt.p=r}}var ce=Math.random().toString(36).slice(2),Oe="__reactFiber$"+ce,be="__reactProps$"+ce,Cn="__reactContainer$"+ce,Zs="__reactEvents$"+ce,Bc="__reactListeners$"+ce,Wi="__reactHandles$"+ce,Nl="__reactResources$"+ce,Qr="__reactMarker$"+ce;function tr(t){delete t[Oe],delete t[be],delete t[Zs],delete t[Bc],delete t[Wi]}function bi(t){var n=t[Oe];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Cn]||r[Oe]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=ty(t);t!==null;){if(r=t[Oe])return r;t=ty(t)}return n}t=r,r=t.parentNode}return null}function Zn(t){if(t=t[Oe]||t[Cn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Jn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(s(33))}function ln(t){var n=t[Nl];return n||(n=t[Nl]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function _e(t){t[Qr]=!0}var Js=new Set,Ua={};function qn(t,n){Si(t,n),Si(t+"Capture",n)}function Si(t,n){for(Ua[t]=n,t=0;t<n.length;t++)Js.add(n[t])}var Ol=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vl={},Kr={};function xl(t){return _i.call(Kr,t)?!0:_i.call(Vl,t)?!1:Ol.test(t)?Kr[t]=!0:(Vl[t]=!0,!1)}function er(t,n,r){if(xl(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Wn(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Qe(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}var Xr,Ml;function Ri(t){if(Xr===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Xr=n&&n[1]||"",Ml=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xr+t+Ml}var La=!1;function Pa(t,n){if(!t||La)return"";La=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(j){var z=j}Reflect.construct(t,[],X)}else{try{X.call()}catch(j){z=j}t.call(X.prototype)}}else{try{throw Error()}catch(j){z=j}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(j){if(j&&z&&typeof j.stack=="string")return[j.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],E=f[1];if(y&&E){var R=y.split(`
`),k=E.split(`
`);for(c=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;if(o===R.length||c===k.length)for(o=R.length-1,c=k.length-1;1<=o&&0<=c&&R[o]!==k[c];)c--;for(;1<=o&&0<=c;o--,c--)if(R[o]!==k[c]){if(o!==1||c!==1)do if(o--,c--,0>c||R[o]!==k[c]){var F=`
`+R[o].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=o&&0<=c);break}}}finally{La=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Ri(r):""}function Ws(t){switch(t.tag){case 26:case 27:case 5:return Ri(t.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return Pa(t.type,!1);case 11:return Pa(t.type.render,!1);case 1:return Pa(t.type,!0);case 31:return Ri("Activity");default:return""}}function ka(t){try{var n="";do n+=Ws(t),t=t.return;while(t);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function to(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function jc(t){var n=to(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(y){o=""+y,f.call(this,y)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function za(t){t._valueTracker||(t._valueTracker=jc(t))}function eo(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=to(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function $r(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var qc=/[\n"\\]/g;function Se(t){return t.replace(qc,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function yn(t,n,r,o,c,f,y,E){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),n!=null?y==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+un(n)):t.value!==""+un(n)&&(t.value=""+un(n)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),n!=null?nr(t,y,un(n)):r!=null?nr(t,y,un(r)):o!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+un(E):t.removeAttribute("name")}function Zr(t,n,r,o,c,f,y,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;r=r!=null?""+un(r):"",n=n!=null?""+un(n):r,E||n===t.value||(t.value=n),t.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y)}function nr(t,n,r){n==="number"&&$r(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function wi(t,n,r,o){if(t=t.options,n){n={};for(var c=0;c<r.length;c++)n["$"+r[c]]=!0;for(r=0;r<t.length;r++)c=n.hasOwnProperty("$"+t[r].value),t[r].selected!==c&&(t[r].selected=c),c&&o&&(t[r].defaultSelected=!0)}else{for(r=""+un(r),n=null,c=0;c<t.length;c++){if(t[c].value===r){t[c].selected=!0,o&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Jt(t,n,r){if(n!=null&&(n=""+un(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+un(r):""}function Jr(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(s(92));if(Ft(o)){if(1<o.length)throw Error(s(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=un(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o)}function In(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var Wr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||Wr.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function no(t,n,r){if(n!=null&&typeof n!="object")throw Error(s(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&r[c]!==o&&Ul(t,c,o)}else for(var f in n)n.hasOwnProperty(f)&&Ul(t,f,n[f])}function io(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(t){return Gc.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ci=null;function Dn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ii=null,Di=null;function ro(t){var n=Zn(t);if(n&&(t=n.stateNode)){var r=t[be]||null;t:switch(t=n.stateNode,n.type){case"input":if(yn(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Se(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var c=o[be]||null;if(!c)throw Error(s(90));yn(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&eo(o)}break t;case"textarea":Jt(t,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&wi(t,!!r.multiple,n,!1)}}}var ti=!1;function Ll(t,n,r){if(ti)return t(n,r);ti=!0;try{var o=t(n);return o}finally{if(ti=!1,(Ii!==null||Di!==null)&&(Du(),Ii&&(n=Ii,t=Di,Di=Ii=null,ro(n),t)))for(n=0;n<t.length;n++)ro(t[n])}}function ta(t,n){var r=t.stateNode;if(r===null)return null;var o=r[be]||null;if(o===null)return null;r=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break t;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(s(231,n,typeof r));return r}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if(Hn)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{Nn=!1}var ei=null,ir=null,Ni=null;function ao(){if(Ni)return Ni;var t,n=ir,r=n.length,o,c="value"in ei?ei.value:ei.textContent,f=c.length;for(t=0;t<r&&n[t]===c[t];t++);var y=r-t;for(o=1;o<=y&&n[r-o]===c[f-o];o++);return Ni=c.slice(t,1<o?1-o:void 0)}function ni(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function ii(){return!0}function so(){return!1}function ze(t){function n(r,o,c,f,y){this._reactName=r,this._targetInst=c,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ii:so,this.isPropagationStopped=so,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),n}var Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=ze(Yt),na=A({},Yt,{view:0,detail:0}),Pl=ze(na),qa,Ha,ri,ia=A({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(qa=t.screenX-ri.screenX,Ha=t.screenY-ri.screenY):Ha=qa=0,ri=t),qa)},movementY:function(t){return"movementY"in t?t.movementY:Ha}}),On=ze(ia),kl=A({},ia,{dataTransfer:0}),Fc=ze(kl),ra=A({},na,{relatedTarget:0}),Ga=ze(ra),oo=A({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0}),Fa=ze(oo),zl=A({},Yt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ya=ze(zl),Yc=A({},Yt,{data:0}),lo=ze(Yc),aa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=jl[t])?!!n[t]:!1}function sa(){return uo}var ql=A({},na,{key:function(t){if(t.key){var n=aa[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=ni(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sa,charCode:function(t){return t.type==="keypress"?ni(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ni(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qa=ze(ql),Hl=A({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),co=ze(Hl),Oi=A({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sa}),Gl=ze(Oi),Fl=A({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yl=ze(Fl),Ql=A({},ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=ze(Ql),cn=A({},Yt,{newState:0,oldState:0}),Kl=ze(cn),Xl=[9,13,27,32],ai=Hn&&"CompositionEvent"in window,u=null;Hn&&"documentMode"in document&&(u=document.documentMode);var m=Hn&&"TextEvent"in window&&!u,p=Hn&&(!ai||u&&8<u&&11>=u),T=" ",L=!1;function q(t,n){switch(t){case"keyup":return Xl.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lt=!1;function Ve(t,n){switch(t){case"compositionend":return et(n);case"keypress":return n.which!==32?null:(L=!0,T);case"textInput":return t=n.data,t===T&&L?null:t;default:return null}}function Pt(t,n){if(Lt)return t==="compositionend"||!ai&&q(t,n)?(t=ao(),Ni=ir=ei=null,Lt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return p&&n.locale!=="ko"?null:n.data;default:return null}}var Be={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Be[t.type]:n==="textarea"}function Vi(t,n,r,o){Ii?Di?Di.push(o):Di=[o]:Ii=o,n=Uu(n,"onChange"),0<n.length&&(r=new ja("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var Ke=null,si=null;function ho(t){Gp(t,0)}function $l(t){var n=Jn(t);if(eo(n))return t}function hm(t,n){if(t==="change")return n}var fm=!1;if(Hn){var Qc;if(Hn){var Kc="oninput"in document;if(!Kc){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),Kc=typeof dm.oninput=="function"}Qc=Kc}else Qc=!1;fm=Qc&&(!document.documentMode||9<document.documentMode)}function mm(){Ke&&(Ke.detachEvent("onpropertychange",gm),si=Ke=null)}function gm(t){if(t.propertyName==="value"&&$l(si)){var n=[];Vi(n,si,t,Dn(t)),Ll(ho,n)}}function nE(t,n,r){t==="focusin"?(mm(),Ke=n,si=r,Ke.attachEvent("onpropertychange",gm)):t==="focusout"&&mm()}function iE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $l(si)}function rE(t,n){if(t==="click")return $l(n)}function aE(t,n){if(t==="input"||t==="change")return $l(n)}function sE(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var _n=typeof Object.is=="function"?Object.is:sE;function fo(t,n){if(_n(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var c=r[o];if(!_i.call(n,c)||!_n(t[c],n[c]))return!1}return!0}function pm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ym(t,n){var r=pm(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=pm(r)}}function _m(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?_m(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function vm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=$r(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=$r(t.document)}return n}function Xc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var oE=Hn&&"documentMode"in document&&11>=document.documentMode,Xa=null,$c=null,mo=null,Zc=!1;function Em(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zc||Xa==null||Xa!==$r(o)||(o=Xa,"selectionStart"in o&&Xc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),mo&&fo(mo,o)||(mo=o,o=Uu($c,"onSelect"),0<o.length&&(n=new ja("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=Xa)))}function oa(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var $a={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},Jc={},Tm={};Hn&&(Tm=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function la(t){if(Jc[t])return Jc[t];if(!$a[t])return t;var n=$a[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Tm)return Jc[t]=n[r];return t}var Am=la("animationend"),bm=la("animationiteration"),Sm=la("animationstart"),lE=la("transitionrun"),uE=la("transitionstart"),cE=la("transitioncancel"),Rm=la("transitionend"),wm=new Map,Wc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wc.push("scrollEnd");function Gn(t,n){wm.set(t,n),qn(n,[t])}var Cm=new WeakMap;function Vn(t,n){if(typeof t=="object"&&t!==null){var r=Cm.get(t);return r!==void 0?r:(n={value:t,source:n,stack:ka(n)},Cm.set(t,n),n)}return{value:t,source:n,stack:ka(n)}}var xn=[],Za=0,th=0;function Zl(){for(var t=Za,n=th=Za=0;n<t;){var r=xn[n];xn[n++]=null;var o=xn[n];xn[n++]=null;var c=xn[n];xn[n++]=null;var f=xn[n];if(xn[n++]=null,o!==null&&c!==null){var y=o.pending;y===null?c.next=c:(c.next=y.next,y.next=c),o.pending=c}f!==0&&Im(r,c,f)}}function Jl(t,n,r,o){xn[Za++]=t,xn[Za++]=n,xn[Za++]=r,xn[Za++]=o,th|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function eh(t,n,r,o){return Jl(t,n,r,o),Wl(t)}function Ja(t,n){return Jl(t,null,null,n),Wl(t)}function Im(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var c=!1,f=t.return;f!==null;)f.childLanes|=r,o=f.alternate,o!==null&&(o.childLanes|=r),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&n!==null&&(c=31-le(r),t=f.hiddenUpdates,o=t[c],o===null?t[c]=[n]:o.push(n),n.lane=r|536870912),f):null}function Wl(t){if(50<zo)throw zo=0,lf=null,Error(s(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Wa={};function hE(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,n,r,o){return new hE(t,n,r,o)}function nh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xi(t,n){var r=t.alternate;return r===null?(r=vn(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Dm(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function tu(t,n,r,o,c,f){var y=0;if(o=t,typeof t=="function")nh(t)&&(y=1);else if(typeof t=="string")y=dT(t,r,ht.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case C:return t=vn(31,r,n,c),t.elementType=C,t.lanes=f,t;case K:return ua(r.children,c,f,n);case tt:y=8,c|=24;break;case W:return t=vn(12,r,n,c|2),t.elementType=W,t.lanes=f,t;case _t:return t=vn(13,r,n,c),t.elementType=_t,t.lanes=f,t;case Ut:return t=vn(19,r,n,c),t.elementType=Ut,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wt:case dt:y=10;break t;case mt:y=9;break t;case Mt:y=11;break t;case V:y=14;break t;case b:y=16,o=null;break t}y=29,r=Error(s(130,t===null?"null":typeof t,"")),o=null}return n=vn(y,r,n,c),n.elementType=t,n.type=o,n.lanes=f,n}function ua(t,n,r,o){return t=vn(7,t,o,n),t.lanes=r,t}function ih(t,n,r){return t=vn(6,t,null,n),t.lanes=r,t}function rh(t,n,r){return n=vn(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ts=[],es=0,eu=null,nu=0,Mn=[],Un=0,ca=null,Mi=1,Ui="";function ha(t,n){ts[es++]=nu,ts[es++]=eu,eu=t,nu=n}function Nm(t,n,r){Mn[Un++]=Mi,Mn[Un++]=Ui,Mn[Un++]=ca,ca=t;var o=Mi;t=Ui;var c=32-le(o)-1;o&=~(1<<c),r+=1;var f=32-le(n)+c;if(30<f){var y=c-c%5;f=(o&(1<<y)-1).toString(32),o>>=y,c-=y,Mi=1<<32-le(n)+c|r<<c|o,Ui=f+t}else Mi=1<<f|r<<c|o,Ui=t}function ah(t){t.return!==null&&(ha(t,1),Nm(t,1,0))}function sh(t){for(;t===eu;)eu=ts[--es],ts[es]=null,nu=ts[--es],ts[es]=null;for(;t===ca;)ca=Mn[--Un],Mn[Un]=null,Ui=Mn[--Un],Mn[Un]=null,Mi=Mn[--Un],Mn[Un]=null}var hn=null,ge=null,Gt=!1,fa=null,oi=!1,oh=Error(s(519));function da(t){var n=Error(s(418,""));throw yo(Vn(n,t)),oh}function Om(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[Oe]=t,n[be]=o,r){case"dialog":Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":case"embed":Vt("load",n);break;case"video":case"audio":for(r=0;r<jo.length;r++)Vt(jo[r],n);break;case"source":Vt("error",n);break;case"img":case"image":case"link":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"input":Vt("invalid",n),Zr(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),za(n);break;case"select":Vt("invalid",n);break;case"textarea":Vt("invalid",n),Jr(n,o.value,o.defaultValue,o.children),za(n)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||Kp(n.textContent,r)?(o.popover!=null&&(Vt("beforetoggle",n),Vt("toggle",n)),o.onScroll!=null&&Vt("scroll",n),o.onScrollEnd!=null&&Vt("scrollend",n),o.onClick!=null&&(n.onclick=Lu),n=!0):n=!1,n||da(t)}function Vm(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:hn=hn.return}}function go(t){if(t!==hn)return!1;if(!Gt)return Vm(t),Gt=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Sf(t.type,t.memoizedProps)),r=!r),r&&ge&&da(t),Vm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(r=t.data,r==="/$"){if(n===0){ge=Yn(t.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;t=t.nextSibling}ge=null}}else n===27?(n=ge,vr(t.type)?(t=If,If=null,ge=t):ge=n):ge=hn?Yn(t.stateNode.nextSibling):null;return!0}function po(){ge=hn=null,Gt=!1}function xm(){var t=fa;return t!==null&&(mn===null?mn=t:mn.push.apply(mn,t),fa=null),t}function yo(t){fa===null?fa=[t]:fa.push(t)}var lh=Z(null),ma=null,Li=null;function rr(t,n,r){J(lh,n._currentValue),n._currentValue=r}function Pi(t){t._currentValue=lh.current,it(lh)}function uh(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function ch(t,n,r,o){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var y=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var R=0;R<n.length;R++)if(E.context===n[R]){f.lanes|=r,E=f.alternate,E!==null&&(E.lanes|=r),uh(f.return,r,t),o||(y=null);break t}f=E.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(s(341));y.lanes|=r,f=y.alternate,f!==null&&(f.lanes|=r),uh(y,r,t),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===t){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function _o(t,n,r,o){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var E=c.type;_n(c.pendingProps.value,y.value)||(t!==null?t.push(E):t=[E])}}else if(c===Ae.current){if(y=c.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Qo):t=[Qo])}c=c.return}t!==null&&ch(n,t,r,o),n.flags|=262144}function iu(t){for(t=t.firstContext;t!==null;){if(!_n(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ga(t){ma=t,Li=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function en(t){return Mm(ma,t)}function ru(t,n){return ma===null&&ga(t),Mm(t,n)}function Mm(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Li===null){if(t===null)throw Error(s(308));Li=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Li=Li.next=n;return r}var fE=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},dE=a.unstable_scheduleCallback,mE=a.unstable_NormalPriority,Me={$$typeof:dt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hh(){return{controller:new fE,data:new Map,refCount:0}}function vo(t){t.refCount--,t.refCount===0&&dE(mE,function(){t.controller.abort()})}var Eo=null,fh=0,ns=0,is=null;function gE(t,n){if(Eo===null){var r=Eo=[];fh=0,ns=gf(),is={status:"pending",value:void 0,then:function(o){r.push(o)}}}return fh++,n.then(Um,Um),n}function Um(){if(--fh===0&&Eo!==null){is!==null&&(is.status="fulfilled");var t=Eo;Eo=null,ns=0,is=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function pE(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<r.length;c++)(0,r[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),o}var Lm=G.S;G.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&gE(t,n),Lm!==null&&Lm(t,n)};var pa=Z(null);function dh(){var t=pa.current;return t!==null?t:ae.pooledCache}function au(t,n){n===null?J(pa,pa.current):J(pa,n.pool)}function Pm(){var t=dh();return t===null?null:{parent:Me._currentValue,pool:t}}var To=Error(s(460)),km=Error(s(474)),su=Error(s(542)),mh={then:function(){}};function zm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ou(){}function Bm(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(ou,ou),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,qm(t),t;default:if(typeof n.status=="string")n.then(ou,ou);else{if(t=ae,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,qm(t),t}throw Ao=n,To}}var Ao=null;function jm(){if(Ao===null)throw Error(s(459));var t=Ao;return Ao=null,t}function qm(t){if(t===To||t===su)throw Error(s(483))}var ar=!1;function gh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function sr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function or(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Kt&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=Wl(t),Im(t,null,r),n}return Jl(t,o,n,r),Wl(t)}function bo(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,$s(t,r)}}function yh(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?c=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?c=f=n:f=f.next=n}else c=f=n;r={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var _h=!1;function So(){if(_h){var t=is;if(t!==null)throw t}}function Ro(t,n,r,o){_h=!1;var c=t.updateQueue;ar=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var R=E,k=R.next;R.next=null,y===null?f=k:y.next=k,y=R;var F=t.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==y&&(E===null?F.firstBaseUpdate=k:E.next=k,F.lastBaseUpdate=R))}if(f!==null){var X=c.baseState;y=0,F=k=R=null,E=f;do{var z=E.lane&-536870913,j=z!==E.lane;if(j?(kt&z)===z:(o&z)===z){z!==0&&z===ns&&(_h=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=t,gt=E;z=n;var ee=r;switch(gt.tag){case 1:if(Et=gt.payload,typeof Et=="function"){X=Et.call(ee,X,z);break t}X=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=gt.payload,z=typeof Et=="function"?Et.call(ee,X,z):Et,z==null)break t;X=A({},X,z);break t;case 2:ar=!0}}z=E.callback,z!==null&&(t.flags|=64,j&&(t.flags|=8192),j=c.callbacks,j===null?c.callbacks=[z]:j.push(z))}else j={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(k=F=j,R=X):F=F.next=j,y|=z;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;j=E,E=j.next,j.next=null,c.lastBaseUpdate=j,c.shared.pending=null}}while(!0);F===null&&(R=X),c.baseState=R,c.firstBaseUpdate=k,c.lastBaseUpdate=F,f===null&&(c.shared.lanes=0),gr|=y,t.lanes=y,t.memoizedState=X}}function Hm(t,n){if(typeof t!="function")throw Error(s(191,t));t.call(n)}function Gm(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Hm(r[t],n)}var rs=Z(null),lu=Z(0);function Fm(t,n){t=Gi,J(lu,t),J(rs,n),Gi=t|n.baseLanes}function vh(){J(lu,Gi),J(rs,rs.current)}function Eh(){Gi=lu.current,it(rs),it(lu)}var lr=0,It=null,Wt=null,Re=null,uu=!1,as=!1,ya=!1,cu=0,wo=0,ss=null,yE=0;function ve(){throw Error(s(321))}function Th(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!_n(t[r],n[r]))return!1;return!0}function Ah(t,n,r,o,c,f){return lr=f,It=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=t===null||t.memoizedState===null?Ig:Dg,ya=!1,f=r(o,c),ya=!1,as&&(f=Qm(n,r,o,c)),Ym(t),f}function Ym(t){G.H=pu;var n=Wt!==null&&Wt.next!==null;if(lr=0,Re=Wt=It=null,uu=!1,wo=0,ss=null,n)throw Error(s(300));t===null||je||(t=t.dependencies,t!==null&&iu(t)&&(je=!0))}function Qm(t,n,r,o){It=t;var c=0;do{if(as&&(ss=null),wo=0,as=!1,25<=c)throw Error(s(301));if(c+=1,Re=Wt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=SE,f=n(r,o)}while(as);return f}function _E(){var t=G.H,n=t.useState()[0];return n=typeof n.then=="function"?Co(n):n,t=t.useState()[0],(Wt!==null?Wt.memoizedState:null)!==t&&(It.flags|=1024),n}function bh(){var t=cu!==0;return cu=0,t}function Sh(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function Rh(t){if(uu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}uu=!1}lr=0,Re=Wt=It=null,as=!1,wo=cu=0,ss=null}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?It.memoizedState=Re=t:Re=Re.next=t,Re}function we(){if(Wt===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var n=Re===null?It.memoizedState:Re.next;if(n!==null)Re=n,Wt=t;else{if(t===null)throw It.alternate===null?Error(s(467)):Error(s(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Re===null?It.memoizedState=Re=t:Re=Re.next=t}return Re}function wh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Co(t){var n=wo;return wo+=1,ss===null&&(ss=[]),t=Bm(ss,t,n),n=It,(Re===null?n.memoizedState:Re.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?Ig:Dg),t}function hu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Co(t);if(t.$$typeof===dt)return en(t)}throw Error(s(438,String(t)))}function Ch(t){var n=null,r=It.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=It.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=wh(),It.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=O;return n.index++,r}function ki(t,n){return typeof n=="function"?n(t):n}function fu(t){var n=we();return Ih(n,Wt,t)}function Ih(t,n,r){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var c=t.baseQueue,f=o.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}n.baseQueue=c=f,o.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var E=y=null,R=null,k=n,F=!1;do{var X=k.lane&-536870913;if(X!==k.lane?(kt&X)===X:(lr&X)===X){var z=k.revertLane;if(z===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),X===ns&&(F=!0);else if((lr&z)===z){k=k.next,z===ns&&(F=!0);continue}else X={lane:0,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},R===null?(E=R=X,y=f):R=R.next=X,It.lanes|=z,gr|=z;X=k.action,ya&&r(f,X),f=k.hasEagerState?k.eagerState:r(f,X)}else z={lane:X,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},R===null?(E=R=z,y=f):R=R.next=z,It.lanes|=X,gr|=X;k=k.next}while(k!==null&&k!==n);if(R===null?y=f:R.next=E,!_n(f,t.memoizedState)&&(je=!0,F&&(r=is,r!==null)))throw r;t.memoizedState=f,t.baseState=y,t.baseQueue=R,o.lastRenderedState=f}return c===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Dh(t){var n=we(),r=n.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=t;var o=r.dispatch,c=r.pending,f=n.memoizedState;if(c!==null){r.pending=null;var y=c=c.next;do f=t(f,y.action),y=y.next;while(y!==c);_n(f,n.memoizedState)||(je=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),r.lastRenderedState=f}return[f,o]}function Km(t,n,r){var o=It,c=we(),f=Gt;if(f){if(r===void 0)throw Error(s(407));r=r()}else r=n();var y=!_n((Wt||c).memoizedState,r);y&&(c.memoizedState=r,je=!0),c=c.queue;var E=Zm.bind(null,o,c,t);if(Io(2048,8,E,[t]),c.getSnapshot!==n||y||Re!==null&&Re.memoizedState.tag&1){if(o.flags|=2048,os(9,du(),$m.bind(null,o,c,r,n),null),ae===null)throw Error(s(349));f||(lr&124)!==0||Xm(o,n,r)}return r}function Xm(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=It.updateQueue,n===null?(n=wh(),It.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function $m(t,n,r,o){n.value=r,n.getSnapshot=o,Jm(n)&&Wm(t)}function Zm(t,n,r){return r(function(){Jm(n)&&Wm(t)})}function Jm(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!_n(t,r)}catch{return!0}}function Wm(t){var n=Ja(t,2);n!==null&&Sn(n,t,2)}function Nh(t){var n=fn();if(typeof t=="function"){var r=t;if(t=r(),ya){Ne(!0);try{r()}finally{Ne(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:t},n}function tg(t,n,r,o){return t.baseState=r,Ih(t,Wt,typeof o=="function"?o:ki)}function vE(t,n,r,o,c){if(gu(t))throw Error(s(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};G.T!==null?r(!0):f.isTransition=!1,o(f),r=n.pending,r===null?(f.next=n.pending=f,eg(n,f)):(f.next=r.next,n.pending=r.next=f)}}function eg(t,n){var r=n.action,o=n.payload,c=t.state;if(n.isTransition){var f=G.T,y={};G.T=y;try{var E=r(c,o),R=G.S;R!==null&&R(y,E),ng(t,n,E)}catch(k){Oh(t,n,k)}finally{G.T=f}}else try{f=r(c,o),ng(t,n,f)}catch(k){Oh(t,n,k)}}function ng(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){ig(t,n,o)},function(o){return Oh(t,n,o)}):ig(t,n,r)}function ig(t,n,r){n.status="fulfilled",n.value=r,rg(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,eg(t,r)))}function Oh(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,rg(n),n=n.next;while(n!==o)}t.action=null}function rg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function ag(t,n){return n}function sg(t,n){if(Gt){var r=ae.formState;if(r!==null){t:{var o=It;if(Gt){if(ge){e:{for(var c=ge,f=oi;c.nodeType!==8;){if(!f){c=null;break e}if(c=Yn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){ge=Yn(c.nextSibling),o=c.data==="F!";break t}}da(o)}o=!1}o&&(n=r[0])}}return r=fn(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ag,lastRenderedState:n},r.queue=o,r=Rg.bind(null,It,o),o.dispatch=r,o=Nh(!1),f=Lh.bind(null,It,!1,o.queue),o=fn(),c={state:n,dispatch:null,action:t,pending:null},o.queue=c,r=vE.bind(null,It,c,f,r),c.dispatch=r,o.memoizedState=t,[n,r,!1]}function og(t){var n=we();return lg(n,Wt,t)}function lg(t,n,r){if(n=Ih(t,n,ag)[0],t=fu(ki)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Co(n)}catch(y){throw y===To?su:y}else o=n;n=we();var c=n.queue,f=c.dispatch;return r!==n.memoizedState&&(It.flags|=2048,os(9,du(),EE.bind(null,c,r),null)),[o,f,t]}function EE(t,n){t.action=n}function ug(t){var n=we(),r=Wt;if(r!==null)return lg(n,r,t);we(),n=n.memoizedState,r=we();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function os(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=It.updateQueue,n===null&&(n=wh(),It.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function du(){return{destroy:void 0,resource:void 0}}function cg(){return we().memoizedState}function mu(t,n,r,o){var c=fn();o=o===void 0?null:o,It.flags|=t,c.memoizedState=os(1|n,du(),r,o)}function Io(t,n,r,o){var c=we();o=o===void 0?null:o;var f=c.memoizedState.inst;Wt!==null&&o!==null&&Th(o,Wt.memoizedState.deps)?c.memoizedState=os(n,f,r,o):(It.flags|=t,c.memoizedState=os(1|n,f,r,o))}function hg(t,n){mu(8390656,8,t,n)}function fg(t,n){Io(2048,8,t,n)}function dg(t,n){return Io(4,2,t,n)}function mg(t,n){return Io(4,4,t,n)}function gg(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function pg(t,n,r){r=r!=null?r.concat([t]):null,Io(4,4,gg.bind(null,n,t),r)}function Vh(){}function yg(t,n){var r=we();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Th(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function _g(t,n){var r=we();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Th(n,o[1]))return o[0];if(o=t(),ya){Ne(!0);try{t()}finally{Ne(!1)}}return r.memoizedState=[o,n],o}function xh(t,n,r){return r===void 0||(lr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=r,t=Tp(),It.lanes|=t,gr|=t,r)}function vg(t,n,r,o){return _n(r,n)?r:rs.current!==null?(t=xh(t,r,o),_n(t,n)||(je=!0),t):(lr&42)===0?(je=!0,t.memoizedState=r):(t=Tp(),It.lanes|=t,gr|=t,n)}function Eg(t,n,r,o,c){var f=nt.p;nt.p=f!==0&&8>f?f:8;var y=G.T,E={};G.T=E,Lh(t,!1,n,r);try{var R=c(),k=G.S;if(k!==null&&k(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var F=pE(R,o);Do(t,n,F,bn(t))}else Do(t,n,o,bn(t))}catch(X){Do(t,n,{then:function(){},status:"rejected",reason:X},bn())}finally{nt.p=f,G.T=y}}function TE(){}function Mh(t,n,r,o){if(t.tag!==5)throw Error(s(476));var c=Tg(t).queue;Eg(t,c,n,lt,r===null?TE:function(){return Ag(t),r(o)})}function Tg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:lt},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Ag(t){var n=Tg(t).next.queue;Do(t,n,{},bn())}function Uh(){return en(Qo)}function bg(){return we().memoizedState}function Sg(){return we().memoizedState}function AE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=bn();t=sr(r);var o=or(n,t,r);o!==null&&(Sn(o,n,r),bo(o,n,r)),n={cache:hh()},t.payload=n;return}n=n.return}}function bE(t,n,r){var o=bn();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},gu(t)?wg(n,r):(r=eh(t,n,r,o),r!==null&&(Sn(r,t,o),Cg(r,n,o)))}function Rg(t,n,r){var o=bn();Do(t,n,r,o)}function Do(t,n,r,o){var c={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(gu(t))wg(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var y=n.lastRenderedState,E=f(y,r);if(c.hasEagerState=!0,c.eagerState=E,_n(E,y))return Jl(t,n,c,0),ae===null&&Zl(),!1}catch{}finally{}if(r=eh(t,n,c,o),r!==null)return Sn(r,t,o),Cg(r,n,o),!0}return!1}function Lh(t,n,r,o){if(o={lane:2,revertLane:gf(),action:o,hasEagerState:!1,eagerState:null,next:null},gu(t)){if(n)throw Error(s(479))}else n=eh(t,r,o,2),n!==null&&Sn(n,t,2)}function gu(t){var n=t.alternate;return t===It||n!==null&&n===It}function wg(t,n){as=uu=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function Cg(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,$s(t,r)}}var pu={readContext:en,use:hu,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve},Ig={readContext:en,use:hu,useCallback:function(t,n){return fn().memoizedState=[t,n===void 0?null:n],t},useContext:en,useEffect:hg,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,mu(4194308,4,gg.bind(null,n,t),r)},useLayoutEffect:function(t,n){return mu(4194308,4,t,n)},useInsertionEffect:function(t,n){mu(4,2,t,n)},useMemo:function(t,n){var r=fn();n=n===void 0?null:n;var o=t();if(ya){Ne(!0);try{t()}finally{Ne(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=fn();if(r!==void 0){var c=r(n);if(ya){Ne(!0);try{r(n)}finally{Ne(!1)}}}else c=n;return o.memoizedState=o.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},o.queue=t,t=t.dispatch=bE.bind(null,It,t),[o.memoizedState,t]},useRef:function(t){var n=fn();return t={current:t},n.memoizedState=t},useState:function(t){t=Nh(t);var n=t.queue,r=Rg.bind(null,It,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:Vh,useDeferredValue:function(t,n){var r=fn();return xh(r,t,n)},useTransition:function(){var t=Nh(!1);return t=Eg.bind(null,It,t.queue,!0,!1),fn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=It,c=fn();if(Gt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=n(),ae===null)throw Error(s(349));(kt&124)!==0||Xm(o,n,r)}c.memoizedState=r;var f={value:r,getSnapshot:n};return c.queue=f,hg(Zm.bind(null,o,f,t),[t]),o.flags|=2048,os(9,du(),$m.bind(null,o,f,r,n),null),r},useId:function(){var t=fn(),n=ae.identifierPrefix;if(Gt){var r=Ui,o=Mi;r=(o&~(1<<32-le(o)-1)).toString(32)+r,n="«"+n+"R"+r,r=cu++,0<r&&(n+="H"+r.toString(32)),n+="»"}else r=yE++,n="«"+n+"r"+r.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:Uh,useFormState:sg,useActionState:sg,useOptimistic:function(t){var n=fn();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Lh.bind(null,It,!0,r),r.dispatch=n,[t,n]},useMemoCache:Ch,useCacheRefresh:function(){return fn().memoizedState=AE.bind(null,It)}},Dg={readContext:en,use:hu,useCallback:yg,useContext:en,useEffect:fg,useImperativeHandle:pg,useInsertionEffect:dg,useLayoutEffect:mg,useMemo:_g,useReducer:fu,useRef:cg,useState:function(){return fu(ki)},useDebugValue:Vh,useDeferredValue:function(t,n){var r=we();return vg(r,Wt.memoizedState,t,n)},useTransition:function(){var t=fu(ki)[0],n=we().memoizedState;return[typeof t=="boolean"?t:Co(t),n]},useSyncExternalStore:Km,useId:bg,useHostTransitionStatus:Uh,useFormState:og,useActionState:og,useOptimistic:function(t,n){var r=we();return tg(r,Wt,t,n)},useMemoCache:Ch,useCacheRefresh:Sg},SE={readContext:en,use:hu,useCallback:yg,useContext:en,useEffect:fg,useImperativeHandle:pg,useInsertionEffect:dg,useLayoutEffect:mg,useMemo:_g,useReducer:Dh,useRef:cg,useState:function(){return Dh(ki)},useDebugValue:Vh,useDeferredValue:function(t,n){var r=we();return Wt===null?xh(r,t,n):vg(r,Wt.memoizedState,t,n)},useTransition:function(){var t=Dh(ki)[0],n=we().memoizedState;return[typeof t=="boolean"?t:Co(t),n]},useSyncExternalStore:Km,useId:bg,useHostTransitionStatus:Uh,useFormState:ug,useActionState:ug,useOptimistic:function(t,n){var r=we();return Wt!==null?tg(r,Wt,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Ch,useCacheRefresh:Sg},ls=null,No=0;function yu(t){var n=No;return No+=1,ls===null&&(ls=[]),Bm(ls,t,n)}function Oo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function _u(t,n){throw n.$$typeof===D?Error(s(525)):(t=Object.prototype.toString.call(n),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Ng(t){var n=t._init;return n(t._payload)}function Og(t){function n(U,N){if(t){var P=U.deletions;P===null?(U.deletions=[N],U.flags|=16):P.push(N)}}function r(U,N){if(!t)return null;for(;N!==null;)n(U,N),N=N.sibling;return null}function o(U){for(var N=new Map;U!==null;)U.key!==null?N.set(U.key,U):N.set(U.index,U),U=U.sibling;return N}function c(U,N){return U=xi(U,N),U.index=0,U.sibling=null,U}function f(U,N,P){return U.index=P,t?(P=U.alternate,P!==null?(P=P.index,P<N?(U.flags|=67108866,N):P):(U.flags|=67108866,N)):(U.flags|=1048576,N)}function y(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function E(U,N,P,Y){return N===null||N.tag!==6?(N=ih(P,U.mode,Y),N.return=U,N):(N=c(N,P),N.return=U,N)}function R(U,N,P,Y){var st=P.type;return st===K?F(U,N,P.props.children,Y,P.key):N!==null&&(N.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===b&&Ng(st)===N.type)?(N=c(N,P.props),Oo(N,P),N.return=U,N):(N=tu(P.type,P.key,P.props,null,U.mode,Y),Oo(N,P),N.return=U,N)}function k(U,N,P,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==P.containerInfo||N.stateNode.implementation!==P.implementation?(N=rh(P,U.mode,Y),N.return=U,N):(N=c(N,P.children||[]),N.return=U,N)}function F(U,N,P,Y,st){return N===null||N.tag!==7?(N=ua(P,U.mode,Y,st),N.return=U,N):(N=c(N,P),N.return=U,N)}function X(U,N,P){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=ih(""+N,U.mode,P),N.return=U,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case S:return P=tu(N.type,N.key,N.props,null,U.mode,P),Oo(P,N),P.return=U,P;case B:return N=rh(N,U.mode,P),N.return=U,N;case b:var Y=N._init;return N=Y(N._payload),X(U,N,P)}if(Ft(N)||M(N))return N=ua(N,U.mode,P,null),N.return=U,N;if(typeof N.then=="function")return X(U,yu(N),P);if(N.$$typeof===dt)return X(U,ru(U,N),P);_u(U,N)}return null}function z(U,N,P,Y){var st=N!==null?N.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return st!==null?null:E(U,N,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case S:return P.key===st?R(U,N,P,Y):null;case B:return P.key===st?k(U,N,P,Y):null;case b:return st=P._init,P=st(P._payload),z(U,N,P,Y)}if(Ft(P)||M(P))return st!==null?null:F(U,N,P,Y,null);if(typeof P.then=="function")return z(U,N,yu(P),Y);if(P.$$typeof===dt)return z(U,N,ru(U,P),Y);_u(U,P)}return null}function j(U,N,P,Y,st){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return U=U.get(P)||null,E(N,U,""+Y,st);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return U=U.get(Y.key===null?P:Y.key)||null,R(N,U,Y,st);case B:return U=U.get(Y.key===null?P:Y.key)||null,k(N,U,Y,st);case b:var Nt=Y._init;return Y=Nt(Y._payload),j(U,N,P,Y,st)}if(Ft(Y)||M(Y))return U=U.get(P)||null,F(N,U,Y,st,null);if(typeof Y.then=="function")return j(U,N,P,yu(Y),st);if(Y.$$typeof===dt)return j(U,N,P,ru(N,Y),st);_u(N,Y)}return null}function Et(U,N,P,Y){for(var st=null,Nt=null,ut=N,pt=N=0,He=null;ut!==null&&pt<P.length;pt++){ut.index>pt?(He=ut,ut=null):He=ut.sibling;var Ht=z(U,ut,P[pt],Y);if(Ht===null){ut===null&&(ut=He);break}t&&ut&&Ht.alternate===null&&n(U,ut),N=f(Ht,N,pt),Nt===null?st=Ht:Nt.sibling=Ht,Nt=Ht,ut=He}if(pt===P.length)return r(U,ut),Gt&&ha(U,pt),st;if(ut===null){for(;pt<P.length;pt++)ut=X(U,P[pt],Y),ut!==null&&(N=f(ut,N,pt),Nt===null?st=ut:Nt.sibling=ut,Nt=ut);return Gt&&ha(U,pt),st}for(ut=o(ut);pt<P.length;pt++)He=j(ut,U,pt,P[pt],Y),He!==null&&(t&&He.alternate!==null&&ut.delete(He.key===null?pt:He.key),N=f(He,N,pt),Nt===null?st=He:Nt.sibling=He,Nt=He);return t&&ut.forEach(function(Sr){return n(U,Sr)}),Gt&&ha(U,pt),st}function gt(U,N,P,Y){if(P==null)throw Error(s(151));for(var st=null,Nt=null,ut=N,pt=N=0,He=null,Ht=P.next();ut!==null&&!Ht.done;pt++,Ht=P.next()){ut.index>pt?(He=ut,ut=null):He=ut.sibling;var Sr=z(U,ut,Ht.value,Y);if(Sr===null){ut===null&&(ut=He);break}t&&ut&&Sr.alternate===null&&n(U,ut),N=f(Sr,N,pt),Nt===null?st=Sr:Nt.sibling=Sr,Nt=Sr,ut=He}if(Ht.done)return r(U,ut),Gt&&ha(U,pt),st;if(ut===null){for(;!Ht.done;pt++,Ht=P.next())Ht=X(U,Ht.value,Y),Ht!==null&&(N=f(Ht,N,pt),Nt===null?st=Ht:Nt.sibling=Ht,Nt=Ht);return Gt&&ha(U,pt),st}for(ut=o(ut);!Ht.done;pt++,Ht=P.next())Ht=j(ut,U,pt,Ht.value,Y),Ht!==null&&(t&&Ht.alternate!==null&&ut.delete(Ht.key===null?pt:Ht.key),N=f(Ht,N,pt),Nt===null?st=Ht:Nt.sibling=Ht,Nt=Ht);return t&&ut.forEach(function(RT){return n(U,RT)}),Gt&&ha(U,pt),st}function ee(U,N,P,Y){if(typeof P=="object"&&P!==null&&P.type===K&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case S:t:{for(var st=P.key;N!==null;){if(N.key===st){if(st=P.type,st===K){if(N.tag===7){r(U,N.sibling),Y=c(N,P.props.children),Y.return=U,U=Y;break t}}else if(N.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===b&&Ng(st)===N.type){r(U,N.sibling),Y=c(N,P.props),Oo(Y,P),Y.return=U,U=Y;break t}r(U,N);break}else n(U,N);N=N.sibling}P.type===K?(Y=ua(P.props.children,U.mode,Y,P.key),Y.return=U,U=Y):(Y=tu(P.type,P.key,P.props,null,U.mode,Y),Oo(Y,P),Y.return=U,U=Y)}return y(U);case B:t:{for(st=P.key;N!==null;){if(N.key===st)if(N.tag===4&&N.stateNode.containerInfo===P.containerInfo&&N.stateNode.implementation===P.implementation){r(U,N.sibling),Y=c(N,P.children||[]),Y.return=U,U=Y;break t}else{r(U,N);break}else n(U,N);N=N.sibling}Y=rh(P,U.mode,Y),Y.return=U,U=Y}return y(U);case b:return st=P._init,P=st(P._payload),ee(U,N,P,Y)}if(Ft(P))return Et(U,N,P,Y);if(M(P)){if(st=M(P),typeof st!="function")throw Error(s(150));return P=st.call(P),gt(U,N,P,Y)}if(typeof P.then=="function")return ee(U,N,yu(P),Y);if(P.$$typeof===dt)return ee(U,N,ru(U,P),Y);_u(U,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,N!==null&&N.tag===6?(r(U,N.sibling),Y=c(N,P),Y.return=U,U=Y):(r(U,N),Y=ih(P,U.mode,Y),Y.return=U,U=Y),y(U)):r(U,N)}return function(U,N,P,Y){try{No=0;var st=ee(U,N,P,Y);return ls=null,st}catch(ut){if(ut===To||ut===su)throw ut;var Nt=vn(29,ut,null,U.mode);return Nt.lanes=Y,Nt.return=U,Nt}finally{}}}var us=Og(!0),Vg=Og(!1),Ln=Z(null),li=null;function ur(t){var n=t.alternate;J(Ue,Ue.current&1),J(Ln,t),li===null&&(n===null||rs.current!==null||n.memoizedState!==null)&&(li=t)}function xg(t){if(t.tag===22){if(J(Ue,Ue.current),J(Ln,t),li===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(li=t)}}else cr()}function cr(){J(Ue,Ue.current),J(Ln,Ln.current)}function zi(t){it(Ln),li===t&&(li=null),it(Ue)}var Ue=Z(0);function vu(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Cf(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Ph(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:A({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var kh={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=bn(),c=sr(o);c.payload=n,r!=null&&(c.callback=r),n=or(t,c,o),n!==null&&(Sn(n,t,o),bo(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=bn(),c=sr(o);c.tag=1,c.payload=n,r!=null&&(c.callback=r),n=or(t,c,o),n!==null&&(Sn(n,t,o),bo(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=bn(),o=sr(r);o.tag=2,n!=null&&(o.callback=n),n=or(t,o,r),n!==null&&(Sn(n,t,r),bo(n,t,r))}};function Mg(t,n,r,o,c,f,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,y):n.prototype&&n.prototype.isPureReactComponent?!fo(r,o)||!fo(c,f):!0}function Ug(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&kh.enqueueReplaceState(n,n.state,null)}function _a(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=A({},r));for(var c in t)r[c]===void 0&&(r[c]=t[c])}return r}var Eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Lg(t){Eu(t)}function Pg(t){console.error(t)}function kg(t){Eu(t)}function Tu(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function zg(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function zh(t,n,r){return r=sr(r),r.tag=3,r.payload={element:null},r.callback=function(){Tu(t,n)},r}function Bg(t){return t=sr(t),t.tag=3,t}function jg(t,n,r,o){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=o.value;t.payload=function(){return c(f)},t.callback=function(){zg(n,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){zg(n,r,o),typeof c!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function RE(t,n,r,o,c){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&_o(n,r,c,!0),r=Ln.current,r!==null){switch(r.tag){case 13:return li===null?cf():r.alternate===null&&pe===0&&(pe=3),r.flags&=-257,r.flags|=65536,r.lanes=c,o===mh?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),ff(t,o,c)),!1;case 22:return r.flags|=65536,o===mh?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),ff(t,o,c)),!1}throw Error(s(435,r.tag))}return ff(t,o,c),cf(),!1}if(Gt)return n=Ln.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==oh&&(t=Error(s(422),{cause:o}),yo(Vn(t,r)))):(o!==oh&&(n=Error(s(423),{cause:o}),yo(Vn(n,r))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,o=Vn(o,r),c=zh(t.stateNode,o,c),yh(t,c),pe!==4&&(pe=2)),!1;var f=Error(s(520),{cause:o});if(f=Vn(f,r),ko===null?ko=[f]:ko.push(f),pe!==4&&(pe=2),n===null)return!0;o=Vn(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=c&-c,r.lanes|=t,t=zh(r.stateNode,o,t),yh(r,t),!1;case 1:if(n=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(pr===null||!pr.has(f))))return r.flags|=65536,c&=-c,r.lanes|=c,c=Bg(c),jg(c,t,r,o),yh(r,c),!1}r=r.return}while(r!==null);return!1}var qg=Error(s(461)),je=!1;function Xe(t,n,r,o){n.child=t===null?Vg(n,null,r,o):us(n,t.child,r,o)}function Hg(t,n,r,o,c){r=r.render;var f=n.ref;if("ref"in o){var y={};for(var E in o)E!=="ref"&&(y[E]=o[E])}else y=o;return ga(n),o=Ah(t,n,r,y,f,c),E=bh(),t!==null&&!je?(Sh(t,n,c),Bi(t,n,c)):(Gt&&E&&ah(n),n.flags|=1,Xe(t,n,o,c),n.child)}function Gg(t,n,r,o,c){if(t===null){var f=r.type;return typeof f=="function"&&!nh(f)&&f.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=f,Fg(t,n,f,o,c)):(t=tu(r.type,null,o,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!Qh(t,c)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:fo,r(y,o)&&t.ref===n.ref)return Bi(t,n,c)}return n.flags|=1,t=xi(f,o),t.ref=n.ref,t.return=n,n.child=t}function Fg(t,n,r,o,c){if(t!==null){var f=t.memoizedProps;if(fo(f,o)&&t.ref===n.ref)if(je=!1,n.pendingProps=o=f,Qh(t,c))(t.flags&131072)!==0&&(je=!0);else return n.lanes=t.lanes,Bi(t,n,c)}return Bh(t,n,r,o,c)}function Yg(t,n,r){var o=n.pendingProps,c=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|r:r,t!==null){for(c=n.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Qg(t,n,o,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&au(n,f!==null?f.cachePool:null),f!==null?Fm(n,f):vh(),xg(n);else return n.lanes=n.childLanes=536870912,Qg(t,n,f!==null?f.baseLanes|r:r,r)}else f!==null?(au(n,f.cachePool),Fm(n,f),cr(),n.memoizedState=null):(t!==null&&au(n,null),vh(),cr());return Xe(t,n,c,r),n.child}function Qg(t,n,r,o){var c=dh();return c=c===null?null:{parent:Me._currentValue,pool:c},n.memoizedState={baseLanes:r,cachePool:c},t!==null&&au(n,null),vh(),xg(n),t!==null&&_o(t,n,o,!0),null}function Au(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Bh(t,n,r,o,c){return ga(n),r=Ah(t,n,r,o,void 0,c),o=bh(),t!==null&&!je?(Sh(t,n,c),Bi(t,n,c)):(Gt&&o&&ah(n),n.flags|=1,Xe(t,n,r,c),n.child)}function Kg(t,n,r,o,c,f){return ga(n),n.updateQueue=null,r=Qm(n,o,r,c),Ym(t),o=bh(),t!==null&&!je?(Sh(t,n,f),Bi(t,n,f)):(Gt&&o&&ah(n),n.flags|=1,Xe(t,n,r,f),n.child)}function Xg(t,n,r,o,c){if(ga(n),n.stateNode===null){var f=Wa,y=r.contextType;typeof y=="object"&&y!==null&&(f=en(y)),f=new r(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=kh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},gh(n),y=r.contextType,f.context=typeof y=="object"&&y!==null?en(y):Wa,f.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(Ph(n,r,y,o),f.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&kh.enqueueReplaceState(f,f.state,null),Ro(n,o,f,c),So(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){f=n.stateNode;var E=n.memoizedProps,R=_a(r,E);f.props=R;var k=f.context,F=r.contextType;y=Wa,typeof F=="object"&&F!==null&&(y=en(F));var X=r.getDerivedStateFromProps;F=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||k!==y)&&Ug(n,f,o,y),ar=!1;var z=n.memoizedState;f.state=z,Ro(n,o,f,c),So(),k=n.memoizedState,E||z!==k||ar?(typeof X=="function"&&(Ph(n,r,X,o),k=n.memoizedState),(R=ar||Mg(n,r,R,o,z,k,y))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=k),f.props=o,f.state=k,f.context=y,o=R):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,ph(t,n),y=n.memoizedProps,F=_a(r,y),f.props=F,X=n.pendingProps,z=f.context,k=r.contextType,R=Wa,typeof k=="object"&&k!==null&&(R=en(k)),E=r.getDerivedStateFromProps,(k=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==X||z!==R)&&Ug(n,f,o,R),ar=!1,z=n.memoizedState,f.state=z,Ro(n,o,f,c),So();var j=n.memoizedState;y!==X||z!==j||ar||t!==null&&t.dependencies!==null&&iu(t.dependencies)?(typeof E=="function"&&(Ph(n,r,E,o),j=n.memoizedState),(F=ar||Mg(n,r,F,o,z,j,R)||t!==null&&t.dependencies!==null&&iu(t.dependencies))?(k||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,j,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,j,R)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===t.memoizedProps&&z===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&z===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=j),f.props=o,f.state=j,f.context=R,o=F):(typeof f.componentDidUpdate!="function"||y===t.memoizedProps&&z===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&z===t.memoizedState||(n.flags|=1024),o=!1)}return f=o,Au(t,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&o?(n.child=us(n,t.child,null,c),n.child=us(n,null,r,c)):Xe(t,n,r,c),n.memoizedState=f.state,t=n.child):t=Bi(t,n,c),t}function $g(t,n,r,o){return po(),n.flags|=256,Xe(t,n,r,o),n.child}var jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qh(t){return{baseLanes:t,cachePool:Pm()}}function Hh(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Pn),t}function Zg(t,n,r){var o=n.pendingProps,c=!1,f=(n.flags&128)!==0,y;if((y=f)||(y=t!==null&&t.memoizedState===null?!1:(Ue.current&2)!==0),y&&(c=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,t===null){if(Gt){if(c?ur(n):cr(),Gt){var E=ge,R;if(R=E){t:{for(R=E,E=oi;R.nodeType!==8;){if(!E){E=null;break t}if(R=Yn(R.nextSibling),R===null){E=null;break t}}E=R}E!==null?(n.memoizedState={dehydrated:E,treeContext:ca!==null?{id:Mi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},R=vn(18,null,null,0),R.stateNode=E,R.return=n,n.child=R,hn=n,ge=null,R=!0):R=!1}R||da(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Cf(E)?n.lanes=32:n.lanes=536870912,null;zi(n)}return E=o.children,o=o.fallback,c?(cr(),c=n.mode,E=bu({mode:"hidden",children:E},c),o=ua(o,c,r,null),E.return=n,o.return=n,E.sibling=o,n.child=E,c=n.child,c.memoizedState=qh(r),c.childLanes=Hh(t,y,r),n.memoizedState=jh,o):(ur(n),Gh(n,E))}if(R=t.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(f)n.flags&256?(ur(n),n.flags&=-257,n=Fh(t,n,r)):n.memoizedState!==null?(cr(),n.child=t.child,n.flags|=128,n=null):(cr(),c=o.fallback,E=n.mode,o=bu({mode:"visible",children:o.children},E),c=ua(c,E,r,null),c.flags|=2,o.return=n,c.return=n,o.sibling=c,n.child=o,us(n,t.child,null,r),o=n.child,o.memoizedState=qh(r),o.childLanes=Hh(t,y,r),n.memoizedState=jh,n=c);else if(ur(n),Cf(E)){if(y=E.nextSibling&&E.nextSibling.dataset,y)var k=y.dgst;y=k,o=Error(s(419)),o.stack="",o.digest=y,yo({value:o,source:null,stack:null}),n=Fh(t,n,r)}else if(je||_o(t,n,r,!1),y=(r&t.childLanes)!==0,je||y){if(y=ae,y!==null&&(o=r&-r,o=(o&42)!==0?1:Zi(o),o=(o&(y.suspendedLanes|r))!==0?0:o,o!==0&&o!==R.retryLane))throw R.retryLane=o,Ja(t,o),Sn(y,t,o),qg;E.data==="$?"||cf(),n=Fh(t,n,r)}else E.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=R.treeContext,ge=Yn(E.nextSibling),hn=n,Gt=!0,fa=null,oi=!1,t!==null&&(Mn[Un++]=Mi,Mn[Un++]=Ui,Mn[Un++]=ca,Mi=t.id,Ui=t.overflow,ca=n),n=Gh(n,o.children),n.flags|=4096);return n}return c?(cr(),c=o.fallback,E=n.mode,R=t.child,k=R.sibling,o=xi(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,k!==null?c=xi(k,c):(c=ua(c,E,r,null),c.flags|=2),c.return=n,o.return=n,o.sibling=c,n.child=o,o=c,c=n.child,E=t.child.memoizedState,E===null?E=qh(r):(R=E.cachePool,R!==null?(k=Me._currentValue,R=R.parent!==k?{parent:k,pool:k}:R):R=Pm(),E={baseLanes:E.baseLanes|r,cachePool:R}),c.memoizedState=E,c.childLanes=Hh(t,y,r),n.memoizedState=jh,o):(ur(n),r=t.child,t=r.sibling,r=xi(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(y=n.deletions,y===null?(n.deletions=[t],n.flags|=16):y.push(t)),n.child=r,n.memoizedState=null,r)}function Gh(t,n){return n=bu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function bu(t,n){return t=vn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Fh(t,n,r){return us(n,t.child,null,r),t=Gh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Jg(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),uh(t.return,n,r)}function Yh(t,n,r,o,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=r,f.tailMode=c)}function Wg(t,n,r){var o=n.pendingProps,c=o.revealOrder,f=o.tail;if(Xe(t,n,o.children,r),o=Ue.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jg(t,r,n);else if(t.tag===19)Jg(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(J(Ue,o),c){case"forwards":for(r=n.child,c=null;r!==null;)t=r.alternate,t!==null&&vu(t)===null&&(c=r),r=r.sibling;r=c,r===null?(c=n.child,n.child=null):(c=r.sibling,r.sibling=null),Yh(n,!1,c,r,f);break;case"backwards":for(r=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&vu(t)===null){n.child=c;break}t=c.sibling,c.sibling=r,r=c,c=t}Yh(n,!0,r,null,f);break;case"together":Yh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Bi(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),gr|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(_o(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(s(153));if(n.child!==null){for(t=n.child,r=xi(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=xi(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Qh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&iu(t)))}function wE(t,n,r){switch(n.tag){case 3:$t(n,n.stateNode.containerInfo),rr(n,Me,t.memoizedState.cache),po();break;case 27:case 5:Xn(n);break;case 4:$t(n,n.stateNode.containerInfo);break;case 10:rr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(ur(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Zg(t,n,r):(ur(n),t=Bi(t,n,r),t!==null?t.sibling:null);ur(n);break;case 19:var c=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(_o(t,n,r,!1),o=(r&n.childLanes)!==0),c){if(o)return Wg(t,n,r);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),J(Ue,Ue.current),o)break;return null;case 22:case 23:return n.lanes=0,Yg(t,n,r);case 24:rr(n,Me,t.memoizedState.cache)}return Bi(t,n,r)}function tp(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)je=!0;else{if(!Qh(t,r)&&(n.flags&128)===0)return je=!1,wE(t,n,r);je=(t.flags&131072)!==0}else je=!1,Gt&&(n.flags&1048576)!==0&&Nm(n,nu,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var o=n.elementType,c=o._init;if(o=c(o._payload),n.type=o,typeof o=="function")nh(o)?(t=_a(o,t),n.tag=1,n=Xg(null,n,o,t,r)):(n.tag=0,n=Bh(null,n,o,t,r));else{if(o!=null){if(c=o.$$typeof,c===Mt){n.tag=11,n=Hg(null,n,o,t,r);break t}else if(c===V){n.tag=14,n=Gg(null,n,o,t,r);break t}}throw n=ye(o)||o,Error(s(306,n,""))}}return n;case 0:return Bh(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,c=_a(o,n.pendingProps),Xg(t,n,o,c,r);case 3:t:{if($t(n,n.stateNode.containerInfo),t===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;c=f.element,ph(t,n),Ro(n,o,null,r);var y=n.memoizedState;if(o=y.cache,rr(n,Me,o),o!==f.cache&&ch(n,[Me],r,!0),So(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=$g(t,n,o,r);break t}else if(o!==c){c=Vn(Error(s(424)),n),yo(c),n=$g(t,n,o,r);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ge=Yn(t.firstChild),hn=n,Gt=!0,fa=null,oi=!0,r=Vg(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(po(),o===c){n=Bi(t,n,r);break t}Xe(t,n,o,r)}n=n.child}return n;case 26:return Au(t,n),t===null?(r=ry(n.type,null,n.pendingProps,null))?n.memoizedState=r:Gt||(r=n.type,t=n.pendingProps,o=Pu(vt.current).createElement(r),o[Oe]=n,o[be]=t,Ze(o,r,t),_e(o),n.stateNode=o):n.memoizedState=ry(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Xn(n),t===null&&Gt&&(o=n.stateNode=ey(n.type,n.pendingProps,vt.current),hn=n,oi=!0,c=ge,vr(n.type)?(If=c,ge=Yn(o.firstChild)):ge=c),Xe(t,n,n.pendingProps.children,r),Au(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Gt&&((c=o=ge)&&(o=tT(o,n.type,n.pendingProps,oi),o!==null?(n.stateNode=o,hn=n,ge=Yn(o.firstChild),oi=!1,c=!0):c=!1),c||da(n)),Xn(n),c=n.type,f=n.pendingProps,y=t!==null?t.memoizedProps:null,o=f.children,Sf(c,f)?o=null:y!==null&&Sf(c,y)&&(n.flags|=32),n.memoizedState!==null&&(c=Ah(t,n,_E,null,null,r),Qo._currentValue=c),Au(t,n),Xe(t,n,o,r),n.child;case 6:return t===null&&Gt&&((t=r=ge)&&(r=eT(r,n.pendingProps,oi),r!==null?(n.stateNode=r,hn=n,ge=null,t=!0):t=!1),t||da(n)),null;case 13:return Zg(t,n,r);case 4:return $t(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=us(n,null,o,r):Xe(t,n,o,r),n.child;case 11:return Hg(t,n,n.type,n.pendingProps,r);case 7:return Xe(t,n,n.pendingProps,r),n.child;case 8:return Xe(t,n,n.pendingProps.children,r),n.child;case 12:return Xe(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,rr(n,n.type,o.value),Xe(t,n,o.children,r),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,ga(n),c=en(c),o=o(c),n.flags|=1,Xe(t,n,o,r),n.child;case 14:return Gg(t,n,n.type,n.pendingProps,r);case 15:return Fg(t,n,n.type,n.pendingProps,r);case 19:return Wg(t,n,r);case 31:return o=n.pendingProps,r=n.mode,o={mode:o.mode,children:o.children},t===null?(r=bu(o,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=xi(t.child,o),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return Yg(t,n,r);case 24:return ga(n),o=en(Me),t===null?(c=dh(),c===null&&(c=ae,f=hh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=r),c=f),n.memoizedState={parent:o,cache:c},gh(n),rr(n,Me,c)):((t.lanes&r)!==0&&(ph(t,n),Ro(n,null,null,r),So()),c=t.memoizedState,f=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),rr(n,Me,o)):(o=f.cache,rr(n,Me,o),o!==c.cache&&ch(n,[Me],r,!0))),Xe(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function ji(t){t.flags|=4}function ep(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!uy(n)){if(n=Ln.current,n!==null&&((kt&4194048)===kt?li!==null:(kt&62914560)!==kt&&(kt&536870912)===0||n!==li))throw Ao=mh,km;t.flags|=8192}}function Su(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ks():536870912,t.lanes|=n,ds|=n)}function Vo(t,n){if(!Gt)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function de(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var c=t.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function CE(t,n,r){var o=n.pendingProps;switch(sh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(n),null;case 1:return de(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Pi(Me),wn(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(go(n)?ji(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,xm())),de(n),null;case 26:return r=n.memoizedState,t===null?(ji(n),r!==null?(de(n),ep(n,r)):(de(n),n.flags&=-16777217)):r?r!==t.memoizedState?(ji(n),de(n),ep(n,r)):(de(n),n.flags&=-16777217):(t.memoizedProps!==o&&ji(n),de(n),n.flags&=-16777217),null;case 27:Bn(n),r=vt.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==o&&ji(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return de(n),null}t=ht.current,go(n)?Om(n):(t=ey(c,o,r),n.stateNode=t,ji(n))}return de(n),null;case 5:if(Bn(n),r=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&ji(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return de(n),null}if(t=ht.current,go(n))Om(n);else{switch(c=Pu(vt.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?c.createElement("select",{is:o.is}):c.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?c.createElement(r,{is:o.is}):c.createElement(r)}}t[Oe]=n,t[be]=o;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(Ze(t,r,o),r){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&ji(n)}}return de(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&ji(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(t=vt.current,go(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,c=hn,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}t[Oe]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Kp(t.nodeValue,r)),t||da(n)}else t=Pu(t).createTextNode(o),t[Oe]=n,n.stateNode=t}return de(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=go(n),o!==null&&o.dehydrated!==null){if(t===null){if(!c)throw Error(s(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[Oe]=n}else po(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;de(n),c=!1}else c=xm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(zi(n),n):(zi(n),null)}if(zi(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=o!==null,t=t!==null&&t.memoizedState!==null,r){o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048)}return r!==t&&r&&(n.child.flags|=8192),Su(n,n.updateQueue),de(n),null;case 4:return wn(),t===null&&vf(n.stateNode.containerInfo),de(n),null;case 10:return Pi(n.type),de(n),null;case 19:if(it(Ue),c=n.memoizedState,c===null)return de(n),null;if(o=(n.flags&128)!==0,f=c.rendering,f===null)if(o)Vo(c,!1);else{if(pe!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=vu(t),f!==null){for(n.flags|=128,Vo(c,!1),t=f.updateQueue,n.updateQueue=t,Su(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)Dm(r,t),r=r.sibling;return J(Ue,Ue.current&1|2),n.child}t=t.sibling}c.tail!==null&&ct()>Cu&&(n.flags|=128,o=!0,Vo(c,!1),n.lanes=4194304)}else{if(!o)if(t=vu(f),t!==null){if(n.flags|=128,o=!0,t=t.updateQueue,n.updateQueue=t,Su(n,t),Vo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Gt)return de(n),null}else 2*ct()-c.renderingStartTime>Cu&&r!==536870912&&(n.flags|=128,o=!0,Vo(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(t=c.last,t!==null?t.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=ct(),n.sibling=null,t=Ue.current,J(Ue,o?t&1|2:t&1),n):(de(n),null);case 22:case 23:return zi(n),Eh(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(de(n),n.subtreeFlags&6&&(n.flags|=8192)):de(n),r=n.updateQueue,r!==null&&Su(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&it(pa),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Pi(Me),de(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function IE(t,n){switch(sh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Pi(Me),wn(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Bn(n),null;case 13:if(zi(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(s(340));po()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return it(Ue),null;case 4:return wn(),null;case 10:return Pi(n.type),null;case 22:case 23:return zi(n),Eh(),t!==null&&it(pa),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Pi(Me),null;case 25:return null;default:return null}}function np(t,n){switch(sh(n),n.tag){case 3:Pi(Me),wn();break;case 26:case 27:case 5:Bn(n);break;case 4:wn();break;case 13:zi(n);break;case 19:it(Ue);break;case 10:Pi(n.type);break;case 22:case 23:zi(n),Eh(),t!==null&&it(pa);break;case 24:Pi(Me)}}function xo(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var c=o.next;r=c;do{if((r.tag&t)===t){o=void 0;var f=r.create,y=r.inst;o=f(),y.destroy=o}r=r.next}while(r!==c)}}catch(E){re(n,n.return,E)}}function hr(t,n,r){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){var y=o.inst,E=y.destroy;if(E!==void 0){y.destroy=void 0,c=n;var R=r,k=E;try{k()}catch(F){re(c,R,F)}}}o=o.next}while(o!==f)}}catch(F){re(n,n.return,F)}}function ip(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Gm(n,r)}catch(o){re(t,t.return,o)}}}function rp(t,n,r){r.props=_a(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){re(t,n,o)}}function Mo(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(c){re(t,n,c)}}function ui(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(c){re(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){re(t,n,c)}else r.current=null}function ap(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break t;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(c){re(t,t.return,c)}}function Kh(t,n,r){try{var o=t.stateNode;XE(o,t.type,r,n),o[be]=n}catch(c){re(t,t.return,c)}}function sp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&vr(t.type)||t.tag===4}function Xh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||sp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&vr(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $h(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Lu));else if(o!==4&&(o===27&&vr(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for($h(t,n,r),t=t.sibling;t!==null;)$h(t,n,r),t=t.sibling}function Ru(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&vr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Ru(t,n,r),t=t.sibling;t!==null;)Ru(t,n,r),t=t.sibling}function op(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Ze(n,o,r),n[Oe]=t,n[be]=r}catch(f){re(t,t.return,f)}}var qi=!1,Ee=!1,Zh=!1,lp=typeof WeakSet=="function"?WeakSet:Set,qe=null;function DE(t,n){if(t=t.containerInfo,Af=Hu,t=vm(t),Xc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var c=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break t}var y=0,E=-1,R=-1,k=0,F=0,X=t,z=null;e:for(;;){for(var j;X!==r||c!==0&&X.nodeType!==3||(E=y+c),X!==f||o!==0&&X.nodeType!==3||(R=y+o),X.nodeType===3&&(y+=X.nodeValue.length),(j=X.firstChild)!==null;)z=X,X=j;for(;;){if(X===t)break e;if(z===r&&++k===c&&(E=y),z===f&&++F===o&&(R=y),(j=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=j}r=E===-1||R===-1?null:{start:E,end:R}}else r=null}r=r||{start:0,end:0}}else r=null;for(bf={focusedElem:t,selectionRange:r},Hu=!1,qe=n;qe!==null;)if(n=qe,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,qe=t;else for(;qe!==null;){switch(n=qe,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,r=n,c=f.memoizedProps,f=f.memoizedState,o=r.stateNode;try{var Et=_a(r.type,c,r.elementType===r.type);t=o.getSnapshotBeforeUpdate(Et,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(gt){re(r,r.return,gt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)wf(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":wf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=n.sibling,t!==null){t.return=n.return,qe=t;break}qe=n.return}}function up(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:fr(t,r),o&4&&xo(5,r);break;case 1:if(fr(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(y){re(r,r.return,y)}else{var c=_a(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(y){re(r,r.return,y)}}o&64&&ip(r),o&512&&Mo(r,r.return);break;case 3:if(fr(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Gm(t,n)}catch(y){re(r,r.return,y)}}break;case 27:n===null&&o&4&&op(r);case 26:case 5:fr(t,r),n===null&&o&4&&ap(r),o&512&&Mo(r,r.return);break;case 12:fr(t,r);break;case 13:fr(t,r),o&4&&fp(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=kE.bind(null,r),nT(t,r))));break;case 22:if(o=r.memoizedState!==null||qi,!o){n=n!==null&&n.memoizedState!==null||Ee,c=qi;var f=Ee;qi=o,(Ee=n)&&!f?dr(t,r,(r.subtreeFlags&8772)!==0):fr(t,r),qi=c,Ee=f}break;case 30:break;default:fr(t,r)}}function cp(t){var n=t.alternate;n!==null&&(t.alternate=null,cp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&tr(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var he=null,dn=!1;function Hi(t,n,r){for(r=r.child;r!==null;)hp(t,n,r),r=r.sibling}function hp(t,n,r){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Zt,r)}catch{}switch(r.tag){case 26:Ee||ui(r,n),Hi(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ee||ui(r,n);var o=he,c=dn;vr(r.type)&&(he=r.stateNode,dn=!1),Hi(t,n,r),Ho(r.stateNode),he=o,dn=c;break;case 5:Ee||ui(r,n);case 6:if(o=he,c=dn,he=null,Hi(t,n,r),he=o,dn=c,he!==null)if(dn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(r.stateNode)}catch(f){re(r,n,f)}else try{he.removeChild(r.stateNode)}catch(f){re(r,n,f)}break;case 18:he!==null&&(dn?(t=he,Wp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Zo(t)):Wp(he,r.stateNode));break;case 4:o=he,c=dn,he=r.stateNode.containerInfo,dn=!0,Hi(t,n,r),he=o,dn=c;break;case 0:case 11:case 14:case 15:Ee||hr(2,r,n),Ee||hr(4,r,n),Hi(t,n,r);break;case 1:Ee||(ui(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&rp(r,n,o)),Hi(t,n,r);break;case 21:Hi(t,n,r);break;case 22:Ee=(o=Ee)||r.memoizedState!==null,Hi(t,n,r),Ee=o;break;default:Hi(t,n,r)}}function fp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Zo(t)}catch(r){re(n,n.return,r)}}function NE(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new lp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new lp),n;default:throw Error(s(435,t.tag))}}function Jh(t,n){var r=NE(t);n.forEach(function(o){var c=zE.bind(null,t,o);r.has(o)||(r.add(o),o.then(c,c))})}function En(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var c=r[o],f=t,y=n,E=y;t:for(;E!==null;){switch(E.tag){case 27:if(vr(E.type)){he=E.stateNode,dn=!1;break t}break;case 5:he=E.stateNode,dn=!1;break t;case 3:case 4:he=E.stateNode.containerInfo,dn=!0;break t}E=E.return}if(he===null)throw Error(s(160));hp(f,y,c),he=null,dn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)dp(n,t),n=n.sibling}var Fn=null;function dp(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:En(n,t),Tn(t),o&4&&(hr(3,t,t.return),xo(3,t),hr(5,t,t.return));break;case 1:En(n,t),Tn(t),o&512&&(Ee||r===null||ui(r,r.return)),o&64&&qi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var c=Fn;if(En(n,t),Tn(t),o&512&&(Ee||r===null||ui(r,r.return)),o&4){var f=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){t:{o=t.type,r=t.memoizedProps,c=c.ownerDocument||c;e:switch(o){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Qr]||f[Oe]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(o),c.head.insertBefore(f,c.querySelector("head > title"))),Ze(f,o,r),f[Oe]=t,_e(f),o=f;break t;case"link":var y=oy("link","href",c).get(o+(r.href||""));if(y){for(var E=0;E<y.length;E++)if(f=y[E],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(E,1);break e}}f=c.createElement(o),Ze(f,o,r),c.head.appendChild(f);break;case"meta":if(y=oy("meta","content",c).get(o+(r.content||""))){for(E=0;E<y.length;E++)if(f=y[E],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(E,1);break e}}f=c.createElement(o),Ze(f,o,r),c.head.appendChild(f);break;default:throw Error(s(468,o))}f[Oe]=t,_e(f),o=f}t.stateNode=o}else ly(c,t.type,t.stateNode);else t.stateNode=sy(c,o,t.memoizedProps);else f!==o?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,o===null?ly(c,t.type,t.stateNode):sy(c,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Kh(t,t.memoizedProps,r.memoizedProps)}break;case 27:En(n,t),Tn(t),o&512&&(Ee||r===null||ui(r,r.return)),r!==null&&o&4&&Kh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(En(n,t),Tn(t),o&512&&(Ee||r===null||ui(r,r.return)),t.flags&32){c=t.stateNode;try{In(c,"")}catch(j){re(t,t.return,j)}}o&4&&t.stateNode!=null&&(c=t.memoizedProps,Kh(t,c,r!==null?r.memoizedProps:c)),o&1024&&(Zh=!0);break;case 6:if(En(n,t),Tn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(j){re(t,t.return,j)}}break;case 3:if(Bu=null,c=Fn,Fn=ku(n.containerInfo),En(n,t),Fn=c,Tn(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Zo(n.containerInfo)}catch(j){re(t,t.return,j)}Zh&&(Zh=!1,mp(t));break;case 4:o=Fn,Fn=ku(t.stateNode.containerInfo),En(n,t),Tn(t),Fn=o;break;case 12:En(n,t),Tn(t);break;case 13:En(n,t),Tn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(af=ct()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Jh(t,o)));break;case 22:c=t.memoizedState!==null;var R=r!==null&&r.memoizedState!==null,k=qi,F=Ee;if(qi=k||c,Ee=F||R,En(n,t),Ee=F,qi=k,Tn(t),o&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(r===null||R||qi||Ee||va(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){R=r=n;try{if(f=R.stateNode,c)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{E=R.stateNode;var X=R.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(j){re(R,R.return,j)}}}else if(n.tag===6){if(r===null){R=n;try{R.stateNode.nodeValue=c?"":R.memoizedProps}catch(j){re(R,R.return,j)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Jh(t,r))));break;case 19:En(n,t),Tn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Jh(t,o)));break;case 30:break;case 21:break;default:En(n,t),Tn(t)}}function Tn(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(sp(o)){r=o;break}o=o.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var c=r.stateNode,f=Xh(t);Ru(t,f,c);break;case 5:var y=r.stateNode;r.flags&32&&(In(y,""),r.flags&=-33);var E=Xh(t);Ru(t,E,y);break;case 3:case 4:var R=r.stateNode.containerInfo,k=Xh(t);$h(t,k,R);break;default:throw Error(s(161))}}catch(F){re(t,t.return,F)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function mp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;mp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function fr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)up(t,n.alternate,n),n=n.sibling}function va(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:hr(4,n,n.return),va(n);break;case 1:ui(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&rp(n,n.return,r),va(n);break;case 27:Ho(n.stateNode);case 26:case 5:ui(n,n.return),va(n);break;case 22:n.memoizedState===null&&va(n);break;case 30:va(n);break;default:va(n)}t=t.sibling}}function dr(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=t,f=n,y=f.flags;switch(f.tag){case 0:case 11:case 15:dr(c,f,r),xo(4,f);break;case 1:if(dr(c,f,r),o=f,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(k){re(o,o.return,k)}if(o=f,c=o.updateQueue,c!==null){var E=o.stateNode;try{var R=c.shared.hiddenCallbacks;if(R!==null)for(c.shared.hiddenCallbacks=null,c=0;c<R.length;c++)Hm(R[c],E)}catch(k){re(o,o.return,k)}}r&&y&64&&ip(f),Mo(f,f.return);break;case 27:op(f);case 26:case 5:dr(c,f,r),r&&o===null&&y&4&&ap(f),Mo(f,f.return);break;case 12:dr(c,f,r);break;case 13:dr(c,f,r),r&&y&4&&fp(c,f);break;case 22:f.memoizedState===null&&dr(c,f,r),Mo(f,f.return);break;case 30:break;default:dr(c,f,r)}n=n.sibling}}function Wh(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&vo(r))}function tf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&vo(t))}function ci(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)gp(t,n,r,o),n=n.sibling}function gp(t,n,r,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ci(t,n,r,o),c&2048&&xo(9,n);break;case 1:ci(t,n,r,o);break;case 3:ci(t,n,r,o),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&vo(t)));break;case 12:if(c&2048){ci(t,n,r,o),t=n.stateNode;try{var f=n.memoizedProps,y=f.id,E=f.onPostCommit;typeof E=="function"&&E(y,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){re(n,n.return,R)}}else ci(t,n,r,o);break;case 13:ci(t,n,r,o);break;case 23:break;case 22:f=n.stateNode,y=n.alternate,n.memoizedState!==null?f._visibility&2?ci(t,n,r,o):Uo(t,n):f._visibility&2?ci(t,n,r,o):(f._visibility|=2,cs(t,n,r,o,(n.subtreeFlags&10256)!==0)),c&2048&&Wh(y,n);break;case 24:ci(t,n,r,o),c&2048&&tf(n.alternate,n);break;default:ci(t,n,r,o)}}function cs(t,n,r,o,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,y=n,E=r,R=o,k=y.flags;switch(y.tag){case 0:case 11:case 15:cs(f,y,E,R,c),xo(8,y);break;case 23:break;case 22:var F=y.stateNode;y.memoizedState!==null?F._visibility&2?cs(f,y,E,R,c):Uo(f,y):(F._visibility|=2,cs(f,y,E,R,c)),c&&k&2048&&Wh(y.alternate,y);break;case 24:cs(f,y,E,R,c),c&&k&2048&&tf(y.alternate,y);break;default:cs(f,y,E,R,c)}n=n.sibling}}function Uo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,c=o.flags;switch(o.tag){case 22:Uo(r,o),c&2048&&Wh(o.alternate,o);break;case 24:Uo(r,o),c&2048&&tf(o.alternate,o);break;default:Uo(r,o)}n=n.sibling}}var Lo=8192;function hs(t){if(t.subtreeFlags&Lo)for(t=t.child;t!==null;)pp(t),t=t.sibling}function pp(t){switch(t.tag){case 26:hs(t),t.flags&Lo&&t.memoizedState!==null&&gT(Fn,t.memoizedState,t.memoizedProps);break;case 5:hs(t);break;case 3:case 4:var n=Fn;Fn=ku(t.stateNode.containerInfo),hs(t),Fn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Lo,Lo=16777216,hs(t),Lo=n):hs(t));break;default:hs(t)}}function yp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Po(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];qe=o,vp(o,t)}yp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_p(t),t=t.sibling}function _p(t){switch(t.tag){case 0:case 11:case 15:Po(t),t.flags&2048&&hr(9,t,t.return);break;case 3:Po(t);break;case 12:Po(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,wu(t)):Po(t);break;default:Po(t)}}function wu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];qe=o,vp(o,t)}yp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:hr(8,n,n.return),wu(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,wu(n));break;default:wu(n)}t=t.sibling}}function vp(t,n){for(;qe!==null;){var r=qe;switch(r.tag){case 0:case 11:case 15:hr(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:vo(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,qe=o;else t:for(r=t;qe!==null;){o=qe;var c=o.sibling,f=o.return;if(cp(o),o===r){qe=null;break t}if(c!==null){c.return=f,qe=c;break t}qe=f}}}var OE={getCacheForType:function(t){var n=en(Me),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r}},VE=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ae=null,Ot=null,kt=0,Xt=0,An=null,mr=!1,fs=!1,ef=!1,Gi=0,pe=0,gr=0,Ea=0,nf=0,Pn=0,ds=0,ko=null,mn=null,rf=!1,af=0,Cu=1/0,Iu=null,pr=null,$e=0,yr=null,ms=null,gs=0,sf=0,of=null,Ep=null,zo=0,lf=null;function bn(){if((Kt&2)!==0&&kt!==0)return kt&-kt;if(G.T!==null){var t=ns;return t!==0?t:gf()}return Ji()}function Tp(){Pn===0&&(Pn=(kt&536870912)===0||Gt?Qs():536870912);var t=Ln.current;return t!==null&&(t.flags|=32),Pn}function Sn(t,n,r){(t===ae&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)&&(ps(t,0),_r(t,kt,Pn,!1)),Ai(t,r),((Kt&2)===0||t!==ae)&&(t===ae&&((Kt&2)===0&&(Ea|=r),pe===4&&_r(t,kt,Pn,!1)),hi(t))}function Ap(t,n,r){if((Kt&6)!==0)throw Error(s(327));var o=!r&&(n&124)===0&&(n&t.expiredLanes)===0||Yr(t,n),c=o?UE(t,n):hf(t,n,!0),f=o;do{if(c===0){fs&&!o&&_r(t,n,0,!1);break}else{if(r=t.current.alternate,f&&!xE(r)){c=hf(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;t:{var E=t;c=ko;var R=E.current.memoizedState.isDehydrated;if(R&&(ps(E,y).flags|=256),y=hf(E,y,!1),y!==2){if(ef&&!R){E.errorRecoveryDisabledLanes|=f,Ea|=f,c=4;break t}f=mn,mn=c,f!==null&&(mn===null?mn=f:mn.push.apply(mn,f))}c=y}if(f=!1,c!==2)continue}}if(c===1){ps(t,0),_r(t,n,0,!0);break}t:{switch(o=t,f=c,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:_r(o,n,Pn,!mr);break t;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(c=af+300-ct(),10<c)){if(_r(o,n,Pn,!mr),xa(o,0,!0)!==0)break t;o.timeoutHandle=Zp(bp.bind(null,o,r,mn,Iu,rf,n,Pn,Ea,ds,mr,f,2,-0,0),c);break t}bp(o,r,mn,Iu,rf,n,Pn,Ea,ds,mr,f,0,-0,0)}}break}while(!0);hi(t)}function bp(t,n,r,o,c,f,y,E,R,k,F,X,z,j){if(t.timeoutHandle=-1,X=n.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Yo={stylesheets:null,count:0,unsuspend:mT},pp(n),X=pT(),X!==null)){t.cancelPendingCommit=X(Np.bind(null,t,n,f,r,o,c,y,E,R,F,1,z,j)),_r(t,f,y,!k);return}Np(t,n,f,r,o,c,y,E,R)}function xE(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var c=r[o],f=c.getSnapshot;c=c.value;try{if(!_n(f(),c))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function _r(t,n,r,o){n&=~nf,n&=~Ea,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var c=n;0<c;){var f=31-le(c),y=1<<f;o[f]=-1,c&=~y}r!==0&&$n(t,r,n)}function Du(){return(Kt&6)===0?(Bo(0),!1):!0}function uf(){if(Ot!==null){if(Xt===0)var t=Ot.return;else t=Ot,Li=ma=null,Rh(t),ls=null,No=0,t=Ot;for(;t!==null;)np(t.alternate,t),t=t.return;Ot=null}}function ps(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,ZE(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),uf(),ae=t,Ot=r=xi(t.current,null),kt=n,Xt=0,An=null,mr=!1,fs=Yr(t,n),ef=!1,ds=Pn=nf=Ea=gr=pe=0,mn=ko=null,rf=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var c=31-le(o),f=1<<c;n|=t[c],o&=~f}return Gi=n,Zl(),r}function Sp(t,n){It=null,G.H=pu,n===To||n===su?(n=jm(),Xt=3):n===km?(n=jm(),Xt=4):Xt=n===qg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,An=n,Ot===null&&(pe=1,Tu(t,Vn(n,t.current)))}function Rp(){var t=G.H;return G.H=pu,t===null?pu:t}function wp(){var t=G.A;return G.A=OE,t}function cf(){pe=4,mr||(kt&4194048)!==kt&&Ln.current!==null||(fs=!0),(gr&134217727)===0&&(Ea&134217727)===0||ae===null||_r(ae,kt,Pn,!1)}function hf(t,n,r){var o=Kt;Kt|=2;var c=Rp(),f=wp();(ae!==t||kt!==n)&&(Iu=null,ps(t,n)),n=!1;var y=pe;t:do try{if(Xt!==0&&Ot!==null){var E=Ot,R=An;switch(Xt){case 8:uf(),y=6;break t;case 3:case 2:case 9:case 6:Ln.current===null&&(n=!0);var k=Xt;if(Xt=0,An=null,ys(t,E,R,k),r&&fs){y=0;break t}break;default:k=Xt,Xt=0,An=null,ys(t,E,R,k)}}ME(),y=pe;break}catch(F){Sp(t,F)}while(!0);return n&&t.shellSuspendCounter++,Li=ma=null,Kt=o,G.H=c,G.A=f,Ot===null&&(ae=null,kt=0,Zl()),y}function ME(){for(;Ot!==null;)Cp(Ot)}function UE(t,n){var r=Kt;Kt|=2;var o=Rp(),c=wp();ae!==t||kt!==n?(Iu=null,Cu=ct()+500,ps(t,n)):fs=Yr(t,n);t:do try{if(Xt!==0&&Ot!==null){n=Ot;var f=An;e:switch(Xt){case 1:Xt=0,An=null,ys(t,n,f,1);break;case 2:case 9:if(zm(f)){Xt=0,An=null,Ip(n);break}n=function(){Xt!==2&&Xt!==9||ae!==t||(Xt=7),hi(t)},f.then(n,n);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:zm(f)?(Xt=0,An=null,Ip(n)):(Xt=0,An=null,ys(t,n,f,7));break;case 5:var y=null;switch(Ot.tag){case 26:y=Ot.memoizedState;case 5:case 27:var E=Ot;if(!y||uy(y)){Xt=0,An=null;var R=E.sibling;if(R!==null)Ot=R;else{var k=E.return;k!==null?(Ot=k,Nu(k)):Ot=null}break e}}Xt=0,An=null,ys(t,n,f,5);break;case 6:Xt=0,An=null,ys(t,n,f,6);break;case 8:uf(),pe=6;break t;default:throw Error(s(462))}}LE();break}catch(F){Sp(t,F)}while(!0);return Li=ma=null,G.H=o,G.A=c,Kt=r,Ot!==null?0:(ae=null,kt=0,Zl(),pe)}function LE(){for(;Ot!==null&&!qr();)Cp(Ot)}function Cp(t){var n=tp(t.alternate,t,Gi);t.memoizedProps=t.pendingProps,n===null?Nu(t):Ot=n}function Ip(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=Kg(r,n,n.pendingProps,n.type,void 0,kt);break;case 11:n=Kg(r,n,n.pendingProps,n.type.render,n.ref,kt);break;case 5:Rh(n);default:np(r,n),n=Ot=Dm(n,Gi),n=tp(r,n,Gi)}t.memoizedProps=t.pendingProps,n===null?Nu(t):Ot=n}function ys(t,n,r,o){Li=ma=null,Rh(n),ls=null,No=0;var c=n.return;try{if(RE(t,c,n,r,kt)){pe=1,Tu(t,Vn(r,t.current)),Ot=null;return}}catch(f){if(c!==null)throw Ot=c,f;pe=1,Tu(t,Vn(r,t.current)),Ot=null;return}n.flags&32768?(Gt||o===1?t=!0:fs||(kt&536870912)!==0?t=!1:(mr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Ln.current,o!==null&&o.tag===13&&(o.flags|=16384))),Dp(n,t)):Nu(n)}function Nu(t){var n=t;do{if((n.flags&32768)!==0){Dp(n,mr);return}t=n.return;var r=CE(n.alternate,n,Gi);if(r!==null){Ot=r;return}if(n=n.sibling,n!==null){Ot=n;return}Ot=n=t}while(n!==null);pe===0&&(pe=5)}function Dp(t,n){do{var r=IE(t.alternate,t);if(r!==null){r.flags&=32767,Ot=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){Ot=t;return}Ot=t=r}while(t!==null);pe=6,Ot=null}function Np(t,n,r,o,c,f,y,E,R){t.cancelPendingCommit=null;do Ou();while($e!==0);if((Kt&6)!==0)throw Error(s(327));if(n!==null){if(n===t.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=th,Xs(t,r,f,y,E,R),t===ae&&(Ot=ae=null,kt=0),ms=n,yr=t,gs=r,sf=f,of=c,Ep=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,BE(oe,function(){return Up(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,c=nt.p,nt.p=2,y=Kt,Kt|=4;try{DE(t,n,r)}finally{Kt=y,nt.p=c,G.T=o}}$e=1,Op(),Vp(),xp()}}function Op(){if($e===1){$e=0;var t=yr,n=ms,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=G.T,G.T=null;var o=nt.p;nt.p=2;var c=Kt;Kt|=4;try{dp(n,t);var f=bf,y=vm(t.containerInfo),E=f.focusedElem,R=f.selectionRange;if(y!==E&&E&&E.ownerDocument&&_m(E.ownerDocument.documentElement,E)){if(R!==null&&Xc(E)){var k=R.start,F=R.end;if(F===void 0&&(F=k),"selectionStart"in E)E.selectionStart=k,E.selectionEnd=Math.min(F,E.value.length);else{var X=E.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var j=z.getSelection(),Et=E.textContent.length,gt=Math.min(R.start,Et),ee=R.end===void 0?gt:Math.min(R.end,Et);!j.extend&&gt>ee&&(y=ee,ee=gt,gt=y);var U=ym(E,gt),N=ym(E,ee);if(U&&N&&(j.rangeCount!==1||j.anchorNode!==U.node||j.anchorOffset!==U.offset||j.focusNode!==N.node||j.focusOffset!==N.offset)){var P=X.createRange();P.setStart(U.node,U.offset),j.removeAllRanges(),gt>ee?(j.addRange(P),j.extend(N.node,N.offset)):(P.setEnd(N.node,N.offset),j.addRange(P))}}}}for(X=[],j=E;j=j.parentNode;)j.nodeType===1&&X.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var Y=X[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Hu=!!Af,bf=Af=null}finally{Kt=c,nt.p=o,G.T=r}}t.current=n,$e=2}}function Vp(){if($e===2){$e=0;var t=yr,n=ms,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=G.T,G.T=null;var o=nt.p;nt.p=2;var c=Kt;Kt|=4;try{up(t,n.alternate,n)}finally{Kt=c,nt.p=o,G.T=r}}$e=3}}function xp(){if($e===4||$e===3){$e=0,ot();var t=yr,n=ms,r=gs,o=Ep;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?$e=5:($e=0,ms=yr=null,Mp(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(pr=null),Ma(r),n=n.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Zt,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=G.T,c=nt.p,nt.p=2,G.T=null;try{for(var f=t.onRecoverableError,y=0;y<o.length;y++){var E=o[y];f(E.value,{componentStack:E.stack})}}finally{G.T=n,nt.p=c}}(gs&3)!==0&&Ou(),hi(t),c=t.pendingLanes,(r&4194090)!==0&&(c&42)!==0?t===lf?zo++:(zo=0,lf=t):zo=0,Bo(0)}}function Mp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,vo(n)))}function Ou(t){return Op(),Vp(),xp(),Up()}function Up(){if($e!==5)return!1;var t=yr,n=sf;sf=0;var r=Ma(gs),o=G.T,c=nt.p;try{nt.p=32>r?32:r,G.T=null,r=of,of=null;var f=yr,y=gs;if($e=0,ms=yr=null,gs=0,(Kt&6)!==0)throw Error(s(331));var E=Kt;if(Kt|=4,_p(f.current),gp(f,f.current,y,r),Kt=E,Bo(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Zt,f)}catch{}return!0}finally{nt.p=c,G.T=o,Mp(t,n)}}function Lp(t,n,r){n=Vn(r,n),n=zh(t.stateNode,n,2),t=or(t,n,2),t!==null&&(Ai(t,2),hi(t))}function re(t,n,r){if(t.tag===3)Lp(t,t,r);else for(;n!==null;){if(n.tag===3){Lp(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(pr===null||!pr.has(o))){t=Vn(r,t),r=Bg(2),o=or(n,r,2),o!==null&&(jg(r,o,n,t),Ai(o,2),hi(o));break}}n=n.return}}function ff(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new VE;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(r)||(ef=!0,c.add(r),t=PE.bind(null,t,n,r),n.then(t,t))}function PE(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,ae===t&&(kt&r)===r&&(pe===4||pe===3&&(kt&62914560)===kt&&300>ct()-af?(Kt&2)===0&&ps(t,0):nf|=r,ds===kt&&(ds=0)),hi(t)}function Pp(t,n){n===0&&(n=Ks()),t=Ja(t,n),t!==null&&(Ai(t,n),hi(t))}function kE(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Pp(t,r)}function zE(t,n){var r=0;switch(t.tag){case 13:var o=t.stateNode,c=t.memoizedState;c!==null&&(r=c.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Pp(t,r)}function BE(t,n){return vi(t,n)}var Vu=null,_s=null,df=!1,xu=!1,mf=!1,Ta=0;function hi(t){t!==_s&&t.next===null&&(_s===null?Vu=_s=t:_s=_s.next=t),xu=!0,df||(df=!0,qE())}function Bo(t,n){if(!mf&&xu){mf=!0;do for(var r=!1,o=Vu;o!==null;){if(t!==0){var c=o.pendingLanes;if(c===0)var f=0;else{var y=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-le(42|t)+1)-1,f&=c&~(y&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,jp(o,f))}else f=kt,f=xa(o,o===ae?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Yr(o,f)||(r=!0,jp(o,f));o=o.next}while(r);mf=!1}}function jE(){kp()}function kp(){xu=df=!1;var t=0;Ta!==0&&($E()&&(t=Ta),Ta=0);for(var n=ct(),r=null,o=Vu;o!==null;){var c=o.next,f=zp(o,n);f===0?(o.next=null,r===null?Vu=c:r.next=c,c===null&&(_s=r)):(r=o,(t!==0||(f&3)!==0)&&(xu=!0)),o=c}Bo(t)}function zp(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var y=31-le(f),E=1<<y,R=c[y];R===-1?((E&r)===0||(E&o)!==0)&&(c[y]=Ys(E,n)):R<=n&&(t.expiredLanes|=E),f&=~E}if(n=ae,r=kt,r=xa(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Ei(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Yr(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&Ei(o),Ma(r)){case 2:case 8:r=ne;break;case 32:r=oe;break;case 268435456:r=ie;break;default:r=oe}return o=Bp.bind(null,t),r=vi(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&Ei(o),t.callbackPriority=2,t.callbackNode=null,2}function Bp(t,n){if($e!==0&&$e!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Ou()&&t.callbackNode!==r)return null;var o=kt;return o=xa(t,t===ae?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Ap(t,o,n),zp(t,ct()),t.callbackNode!=null&&t.callbackNode===r?Bp.bind(null,t):null)}function jp(t,n){if(Ou())return null;Ap(t,n,!0)}function qE(){JE(function(){(Kt&6)!==0?vi(bt,jE):kp()})}function gf(){return Ta===0&&(Ta=Qs()),Ta}function qp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ba(""+t)}function Hp(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function HE(t,n,r,o,c){if(n==="submit"&&r&&r.stateNode===c){var f=qp((c[be]||null).action),y=o.submitter;y&&(n=(n=y[be]||null)?qp(n.formAction):y.getAttribute("formAction"),n!==null&&(f=n,y=null));var E=new ja("action","action",null,o,c);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ta!==0){var R=y?Hp(c,y):new FormData(c);Mh(r,{pending:!0,data:R,method:c.method,action:f},null,R)}}else typeof f=="function"&&(E.preventDefault(),R=y?Hp(c,y):new FormData(c),Mh(r,{pending:!0,data:R,method:c.method,action:f},f,R))},currentTarget:c}]})}}for(var pf=0;pf<Wc.length;pf++){var yf=Wc[pf],GE=yf.toLowerCase(),FE=yf[0].toUpperCase()+yf.slice(1);Gn(GE,"on"+FE)}Gn(Am,"onAnimationEnd"),Gn(bm,"onAnimationIteration"),Gn(Sm,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(lE,"onTransitionRun"),Gn(uE,"onTransitionStart"),Gn(cE,"onTransitionCancel"),Gn(Rm,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jo));function Gp(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],c=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var y=o.length-1;0<=y;y--){var E=o[y],R=E.instance,k=E.currentTarget;if(E=E.listener,R!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=k;try{f(c)}catch(F){Eu(F)}c.currentTarget=null,f=R}else for(y=0;y<o.length;y++){if(E=o[y],R=E.instance,k=E.currentTarget,E=E.listener,R!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=k;try{f(c)}catch(F){Eu(F)}c.currentTarget=null,f=R}}}}function Vt(t,n){var r=n[Zs];r===void 0&&(r=n[Zs]=new Set);var o=t+"__bubble";r.has(o)||(Fp(n,t,2,!1),r.add(o))}function _f(t,n,r){var o=0;n&&(o|=4),Fp(r,t,o,n)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function vf(t){if(!t[Mu]){t[Mu]=!0,Js.forEach(function(r){r!=="selectionchange"&&(YE.has(r)||_f(r,!1,t),_f(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Mu]||(n[Mu]=!0,_f("selectionchange",!1,n))}}function Fp(t,n,r,o){switch(gy(n)){case 2:var c=vT;break;case 8:c=ET;break;default:c=xf}r=c.bind(null,n,r,t),c=void 0,!Nn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?t.addEventListener(n,r,{capture:!0,passive:c}):t.addEventListener(n,r,!0):c!==void 0?t.addEventListener(n,r,{passive:c}):t.addEventListener(n,r,!1)}function Ef(t,n,r,o,c){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var E=o.stateNode.containerInfo;if(E===c)break;if(y===4)for(y=o.return;y!==null;){var R=y.tag;if((R===3||R===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;E!==null;){if(y=bi(E),y===null)return;if(R=y.tag,R===5||R===6||R===26||R===27){o=f=y;continue t}E=E.parentNode}}o=o.return}Ll(function(){var k=f,F=Dn(r),X=[];t:{var z=wm.get(t);if(z!==void 0){var j=ja,Et=t;switch(t){case"keypress":if(ni(r)===0)break t;case"keydown":case"keyup":j=Qa;break;case"focusin":Et="focus",j=Ga;break;case"focusout":Et="blur",j=Ga;break;case"beforeblur":case"afterblur":j=Ga;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=On;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Gl;break;case Am:case bm:case Sm:j=Fa;break;case Rm:j=Yl;break;case"scroll":case"scrollend":j=Pl;break;case"wheel":j=Ka;break;case"copy":case"cut":case"paste":j=Ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=co;break;case"toggle":case"beforetoggle":j=Kl}var gt=(n&4)!==0,ee=!gt&&(t==="scroll"||t==="scrollend"),U=gt?z!==null?z+"Capture":null:z;gt=[];for(var N=k,P;N!==null;){var Y=N;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||U===null||(Y=ta(N,U),Y!=null&&gt.push(qo(N,Y,P))),ee)break;N=N.return}0<gt.length&&(z=new j(z,Et,null,r,F),X.push({event:z,listeners:gt}))}}if((n&7)===0){t:{if(z=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",z&&r!==Ci&&(Et=r.relatedTarget||r.fromElement)&&(bi(Et)||Et[Cn]))break t;if((j||z)&&(z=F.window===F?F:(z=F.ownerDocument)?z.defaultView||z.parentWindow:window,j?(Et=r.relatedTarget||r.toElement,j=k,Et=Et?bi(Et):null,Et!==null&&(ee=h(Et),gt=Et.tag,Et!==ee||gt!==5&&gt!==27&&gt!==6)&&(Et=null)):(j=null,Et=k),j!==Et)){if(gt=On,Y="onMouseLeave",U="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(gt=co,Y="onPointerLeave",U="onPointerEnter",N="pointer"),ee=j==null?z:Jn(j),P=Et==null?z:Jn(Et),z=new gt(Y,N+"leave",j,r,F),z.target=ee,z.relatedTarget=P,Y=null,bi(F)===k&&(gt=new gt(U,N+"enter",Et,r,F),gt.target=P,gt.relatedTarget=ee,Y=gt),ee=Y,j&&Et)e:{for(gt=j,U=Et,N=0,P=gt;P;P=vs(P))N++;for(P=0,Y=U;Y;Y=vs(Y))P++;for(;0<N-P;)gt=vs(gt),N--;for(;0<P-N;)U=vs(U),P--;for(;N--;){if(gt===U||U!==null&&gt===U.alternate)break e;gt=vs(gt),U=vs(U)}gt=null}else gt=null;j!==null&&Yp(X,z,j,gt,!1),Et!==null&&ee!==null&&Yp(X,ee,Et,gt,!0)}}t:{if(z=k?Jn(k):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var st=hm;else if(xe(z))if(fm)st=aE;else{st=iE;var Nt=nE}else j=z.nodeName,!j||j.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?k&&io(k.elementType)&&(st=hm):st=rE;if(st&&(st=st(t,k))){Vi(X,st,r,F);break t}Nt&&Nt(t,z,k),t==="focusout"&&k&&z.type==="number"&&k.memoizedProps.value!=null&&nr(z,"number",z.value)}switch(Nt=k?Jn(k):window,t){case"focusin":(xe(Nt)||Nt.contentEditable==="true")&&(Xa=Nt,$c=k,mo=null);break;case"focusout":mo=$c=Xa=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,Em(X,r,F);break;case"selectionchange":if(oE)break;case"keydown":case"keyup":Em(X,r,F)}var ut;if(ai)t:{switch(t){case"compositionstart":var pt="onCompositionStart";break t;case"compositionend":pt="onCompositionEnd";break t;case"compositionupdate":pt="onCompositionUpdate";break t}pt=void 0}else Lt?q(t,r)&&(pt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(pt="onCompositionStart");pt&&(p&&r.locale!=="ko"&&(Lt||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Lt&&(ut=ao()):(ei=F,ir="value"in ei?ei.value:ei.textContent,Lt=!0)),Nt=Uu(k,pt),0<Nt.length&&(pt=new lo(pt,t,null,r,F),X.push({event:pt,listeners:Nt}),ut?pt.data=ut:(ut=et(r),ut!==null&&(pt.data=ut)))),(ut=m?Ve(t,r):Pt(t,r))&&(pt=Uu(k,"onBeforeInput"),0<pt.length&&(Nt=new lo("onBeforeInput","beforeinput",null,r,F),X.push({event:Nt,listeners:pt}),Nt.data=ut)),HE(X,t,k,r,F)}Gp(X,n)})}function qo(t,n,r){return{instance:t,listener:n,currentTarget:r}}function Uu(t,n){for(var r=n+"Capture",o=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=ta(t,r),c!=null&&o.unshift(qo(t,c,f)),c=ta(t,n),c!=null&&o.push(qo(t,c,f))),t.tag===3)return o;t=t.return}return[]}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yp(t,n,r,o,c){for(var f=n._reactName,y=[];r!==null&&r!==o;){var E=r,R=E.alternate,k=E.stateNode;if(E=E.tag,R!==null&&R===o)break;E!==5&&E!==26&&E!==27||k===null||(R=k,c?(k=ta(r,f),k!=null&&y.unshift(qo(r,k,R))):c||(k=ta(r,f),k!=null&&y.push(qo(r,k,R)))),r=r.return}y.length!==0&&t.push({event:n,listeners:y})}var QE=/\r\n?/g,KE=/\u0000|\uFFFD/g;function Qp(t){return(typeof t=="string"?t:""+t).replace(QE,`
`).replace(KE,"")}function Kp(t,n){return n=Qp(n),Qp(t)===n}function Lu(){}function te(t,n,r,o,c,f){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||In(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&In(t,""+o);break;case"className":Wn(t,"class",o);break;case"tabIndex":Wn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wn(t,r,o);break;case"style":no(t,o,f);break;case"data":if(n!=="object"){Wn(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Ba(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(n!=="input"&&te(t,n,"name",c.name,c,null),te(t,n,"formEncType",c.formEncType,c,null),te(t,n,"formMethod",c.formMethod,c,null),te(t,n,"formTarget",c.formTarget,c,null)):(te(t,n,"encType",c.encType,c,null),te(t,n,"method",c.method,c,null),te(t,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Ba(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Lu);break;case"onScroll":o!=null&&Vt("scroll",t);break;case"onScrollEnd":o!=null&&Vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(r=o.__html,r!=null){if(c.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=Ba(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":Vt("beforetoggle",t),Vt("toggle",t),er(t,"popover",o);break;case"xlinkActuate":Qe(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Qe(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Qe(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Qe(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Qe(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Qe(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Qe(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Qe(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Qe(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":er(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Hc.get(r)||r,er(t,r,o))}}function Tf(t,n,r,o,c,f){switch(r){case"style":no(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(r=o.__html,r!=null){if(c.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"children":typeof o=="string"?In(t,o):(typeof o=="number"||typeof o=="bigint")&&In(t,""+o);break;case"onScroll":o!=null&&Vt("scroll",t);break;case"onScrollEnd":o!=null&&Vt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Lu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ua.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),n=r.slice(2,c?r.length-7:void 0),f=t[be]||null,f=f!=null?f[r]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof o=="function")){typeof f!="function"&&f!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,c);break t}r in t?t[r]=o:o===!0?t.setAttribute(r,""):er(t,r,o)}}}function Ze(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",t),Vt("load",t);var o=!1,c=!1,f;for(f in r)if(r.hasOwnProperty(f)){var y=r[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:te(t,n,f,y,r,null)}}c&&te(t,n,"srcSet",r.srcSet,r,null),o&&te(t,n,"src",r.src,r,null);return;case"input":Vt("invalid",t);var E=f=y=c=null,R=null,k=null;for(o in r)if(r.hasOwnProperty(o)){var F=r[o];if(F!=null)switch(o){case"name":c=F;break;case"type":y=F;break;case"checked":R=F;break;case"defaultChecked":k=F;break;case"value":f=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,n));break;default:te(t,n,o,F,r,null)}}Zr(t,f,E,R,k,y,c,!1),za(t);return;case"select":Vt("invalid",t),o=y=f=null;for(c in r)if(r.hasOwnProperty(c)&&(E=r[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":y=E;break;case"multiple":o=E;default:te(t,n,c,E,r,null)}n=f,r=y,t.multiple=!!o,n!=null?wi(t,!!o,n,!1):r!=null&&wi(t,!!o,r,!0);return;case"textarea":Vt("invalid",t),f=c=o=null;for(y in r)if(r.hasOwnProperty(y)&&(E=r[y],E!=null))switch(y){case"value":o=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:te(t,n,y,E,r,null)}Jr(t,o,c,f),za(t);return;case"option":for(R in r)if(r.hasOwnProperty(R)&&(o=r[R],o!=null))switch(R){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:te(t,n,R,o,r,null)}return;case"dialog":Vt("beforetoggle",t),Vt("toggle",t),Vt("cancel",t),Vt("close",t);break;case"iframe":case"object":Vt("load",t);break;case"video":case"audio":for(o=0;o<jo.length;o++)Vt(jo[o],t);break;case"image":Vt("error",t),Vt("load",t);break;case"details":Vt("toggle",t);break;case"embed":case"source":case"link":Vt("error",t),Vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in r)if(r.hasOwnProperty(k)&&(o=r[k],o!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:te(t,n,k,o,r,null)}return;default:if(io(n)){for(F in r)r.hasOwnProperty(F)&&(o=r[F],o!==void 0&&Tf(t,n,F,o,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(o=r[E],o!=null&&te(t,n,E,o,r,null))}function XE(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,y=null,E=null,R=null,k=null,F=null;for(j in r){var X=r[j];if(r.hasOwnProperty(j)&&X!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":R=X;default:o.hasOwnProperty(j)||te(t,n,j,null,o,X)}}for(var z in o){var j=o[z];if(X=r[z],o.hasOwnProperty(z)&&(j!=null||X!=null))switch(z){case"type":f=j;break;case"name":c=j;break;case"checked":k=j;break;case"defaultChecked":F=j;break;case"value":y=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,n));break;default:j!==X&&te(t,n,z,j,o,X)}}yn(t,y,E,R,k,F,f,c);return;case"select":j=y=E=z=null;for(f in r)if(R=r[f],r.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":j=R;default:o.hasOwnProperty(f)||te(t,n,f,null,o,R)}for(c in o)if(f=o[c],R=r[c],o.hasOwnProperty(c)&&(f!=null||R!=null))switch(c){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":y=f;default:f!==R&&te(t,n,c,f,o,R)}n=E,r=y,o=j,z!=null?wi(t,!!r,z,!1):!!o!=!!r&&(n!=null?wi(t,!!r,n,!0):wi(t,!!r,r?[]:"",!1));return;case"textarea":j=z=null;for(E in r)if(c=r[E],r.hasOwnProperty(E)&&c!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:te(t,n,E,null,o,c)}for(y in o)if(c=o[y],f=r[y],o.hasOwnProperty(y)&&(c!=null||f!=null))switch(y){case"value":z=c;break;case"defaultValue":j=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==f&&te(t,n,y,c,o,f)}Jt(t,z,j);return;case"option":for(var Et in r)if(z=r[Et],r.hasOwnProperty(Et)&&z!=null&&!o.hasOwnProperty(Et))switch(Et){case"selected":t.selected=!1;break;default:te(t,n,Et,null,o,z)}for(R in o)if(z=o[R],j=r[R],o.hasOwnProperty(R)&&z!==j&&(z!=null||j!=null))switch(R){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:te(t,n,R,z,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in r)z=r[gt],r.hasOwnProperty(gt)&&z!=null&&!o.hasOwnProperty(gt)&&te(t,n,gt,null,o,z);for(k in o)if(z=o[k],j=r[k],o.hasOwnProperty(k)&&z!==j&&(z!=null||j!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,n));break;default:te(t,n,k,z,o,j)}return;default:if(io(n)){for(var ee in r)z=r[ee],r.hasOwnProperty(ee)&&z!==void 0&&!o.hasOwnProperty(ee)&&Tf(t,n,ee,void 0,o,z);for(F in o)z=o[F],j=r[F],!o.hasOwnProperty(F)||z===j||z===void 0&&j===void 0||Tf(t,n,F,z,o,j);return}}for(var U in r)z=r[U],r.hasOwnProperty(U)&&z!=null&&!o.hasOwnProperty(U)&&te(t,n,U,null,o,z);for(X in o)z=o[X],j=r[X],!o.hasOwnProperty(X)||z===j||z==null&&j==null||te(t,n,X,z,o,j)}var Af=null,bf=null;function Pu(t){return t.nodeType===9?t:t.ownerDocument}function Xp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $p(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Sf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Rf=null;function $E(){var t=window.event;return t&&t.type==="popstate"?t===Rf?!1:(Rf=t,!0):(Rf=null,!1)}var Zp=typeof setTimeout=="function"?setTimeout:void 0,ZE=typeof clearTimeout=="function"?clearTimeout:void 0,Jp=typeof Promise=="function"?Promise:void 0,JE=typeof queueMicrotask=="function"?queueMicrotask:typeof Jp<"u"?function(t){return Jp.resolve(null).then(t).catch(WE)}:Zp;function WE(t){setTimeout(function(){throw t})}function vr(t){return t==="head"}function Wp(t,n){var r=n,o=0,c=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"){if(0<o&&8>o){r=o;var y=t.ownerDocument;if(r&1&&Ho(y.documentElement),r&2&&Ho(y.body),r&4)for(r=y.head,Ho(r),y=r.firstChild;y;){var E=y.nextSibling,R=y.nodeName;y[Qr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=E}}if(c===0){t.removeChild(f),Zo(n);return}c--}else r==="$"||r==="$?"||r==="$!"?c++:o=r.charCodeAt(0)-48;else o=0;r=f}while(r);Zo(n)}function wf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":wf(r),tr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function tT(t,n,r,o){for(;t.nodeType===1;){var c=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Qr])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Yn(t.nextSibling),t===null)break}return null}function eT(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Yn(t.nextSibling),t===null))return null;return t}function Cf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function nT(t,n){var r=t.ownerDocument;if(t.data!=="$?"||r.readyState==="complete")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Yn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var If=null;function ty(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}function ey(t,n,r){switch(n=Pu(r),t){case"html":if(t=n.documentElement,!t)throw Error(s(452));return t;case"head":if(t=n.head,!t)throw Error(s(453));return t;case"body":if(t=n.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ho(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);tr(t)}var kn=new Map,ny=new Set;function ku(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fi=nt.d;nt.d={f:iT,r:rT,D:aT,C:sT,L:oT,m:lT,X:cT,S:uT,M:hT};function iT(){var t=Fi.f(),n=Du();return t||n}function rT(t){var n=Zn(t);n!==null&&n.tag===5&&n.type==="form"?Ag(n):Fi.r(t)}var Es=typeof document>"u"?null:document;function iy(t,n,r){var o=Es;if(o&&typeof n=="string"&&n){var c=Se(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),ny.has(c)||(ny.add(c),t={rel:t,crossOrigin:r,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),Ze(n,"link",t),_e(n),o.head.appendChild(n)))}}function aT(t){Fi.D(t),iy("dns-prefetch",t,null)}function sT(t,n){Fi.C(t,n),iy("preconnect",t,n)}function oT(t,n,r){Fi.L(t,n,r);var o=Es;if(o&&t&&n){var c='link[rel="preload"][as="'+Se(n)+'"]';n==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+Se(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+Se(r.imageSizes)+'"]')):c+='[href="'+Se(t)+'"]';var f=c;switch(n){case"style":f=Ts(t);break;case"script":f=As(t)}kn.has(f)||(t=A({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),kn.set(f,t),o.querySelector(c)!==null||n==="style"&&o.querySelector(Go(f))||n==="script"&&o.querySelector(Fo(f))||(n=o.createElement("link"),Ze(n,"link",t),_e(n),o.head.appendChild(n)))}}function lT(t,n){Fi.m(t,n);var r=Es;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Se(o)+'"][href="'+Se(t)+'"]',f=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=As(t)}if(!kn.has(f)&&(t=A({rel:"modulepreload",href:t},n),kn.set(f,t),r.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Fo(f)))return}o=r.createElement("link"),Ze(o,"link",t),_e(o),r.head.appendChild(o)}}}function uT(t,n,r){Fi.S(t,n,r);var o=Es;if(o&&t){var c=ln(o).hoistableStyles,f=Ts(t);n=n||"default";var y=c.get(f);if(!y){var E={loading:0,preload:null};if(y=o.querySelector(Go(f)))E.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":n},r),(r=kn.get(f))&&Df(t,r);var R=y=o.createElement("link");_e(R),Ze(R,"link",t),R._p=new Promise(function(k,F){R.onload=k,R.onerror=F}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,zu(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:E},c.set(f,y)}}}function cT(t,n){Fi.X(t,n);var r=Es;if(r&&t){var o=ln(r).hoistableScripts,c=As(t),f=o.get(c);f||(f=r.querySelector(Fo(c)),f||(t=A({src:t,async:!0},n),(n=kn.get(c))&&Nf(t,n),f=r.createElement("script"),_e(f),Ze(f,"link",t),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function hT(t,n){Fi.M(t,n);var r=Es;if(r&&t){var o=ln(r).hoistableScripts,c=As(t),f=o.get(c);f||(f=r.querySelector(Fo(c)),f||(t=A({src:t,async:!0,type:"module"},n),(n=kn.get(c))&&Nf(t,n),f=r.createElement("script"),_e(f),Ze(f,"link",t),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function ry(t,n,r,o){var c=(c=vt.current)?ku(c):null;if(!c)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Ts(r.href),r=ln(c).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Ts(r.href);var f=ln(c).hoistableStyles,y=f.get(t);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,y),(f=c.querySelector(Go(t)))&&!f._p&&(y.instance=f,y.state.loading=5),kn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},kn.set(t,r),f||fT(c,t,r,y.state))),n&&o===null)throw Error(s(528,""));return y}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=As(r),r=ln(c).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ts(t){return'href="'+Se(t)+'"'}function Go(t){return'link[rel="stylesheet"]['+t+"]"}function ay(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function fT(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ze(n,"link",r),_e(n),t.head.appendChild(n))}function As(t){return'[src="'+Se(t)+'"]'}function Fo(t){return"script[async]"+t}function sy(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+Se(r.href)+'"]');if(o)return n.instance=o,_e(o),o;var c=A({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),_e(o),Ze(o,"style",c),zu(o,r.precedence,t),n.instance=o;case"stylesheet":c=Ts(r.href);var f=t.querySelector(Go(c));if(f)return n.state.loading|=4,n.instance=f,_e(f),f;o=ay(r),(c=kn.get(c))&&Df(o,c),f=(t.ownerDocument||t).createElement("link"),_e(f);var y=f;return y._p=new Promise(function(E,R){y.onload=E,y.onerror=R}),Ze(f,"link",o),n.state.loading|=4,zu(f,r.precedence,t),n.instance=f;case"script":return f=As(r.src),(c=t.querySelector(Fo(f)))?(n.instance=c,_e(c),c):(o=r,(c=kn.get(f))&&(o=A({},r),Nf(o,c)),t=t.ownerDocument||t,c=t.createElement("script"),_e(c),Ze(c,"link",o),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,zu(o,r.precedence,t));return n.instance}function zu(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,f=c,y=0;y<o.length;y++){var E=o[y];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function Df(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Nf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Bu=null;function oy(t,n,r){if(Bu===null){var o=new Map,c=Bu=new Map;c.set(r,o)}else c=Bu,o=c.get(r),o||(o=new Map,c.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),c=0;c<r.length;c++){var f=r[c];if(!(f[Qr]||f[Oe]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(n)||"";y=t+y;var E=o.get(y);E?E.push(f):o.set(y,[f])}}return o}function ly(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function dT(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function uy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Yo=null;function mT(){}function gT(t,n,r){if(Yo===null)throw Error(s(475));var o=Yo;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=Ts(r.href),f=t.querySelector(Go(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=ju.bind(o),t.then(o,o)),n.state.loading|=4,n.instance=f,_e(f);return}f=t.ownerDocument||t,r=ay(r),(c=kn.get(c))&&Df(r,c),f=f.createElement("link"),_e(f);var y=f;y._p=new Promise(function(E,R){y.onload=E,y.onerror=R}),Ze(f,"link",r),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=ju.bind(o),t.addEventListener("load",n),t.addEventListener("error",n))}}function pT(){if(Yo===null)throw Error(s(475));var t=Yo;return t.stylesheets&&t.count===0&&Of(t,t.stylesheets),0<t.count?function(n){var r=setTimeout(function(){if(t.stylesheets&&Of(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r)}}:null}function ju(){if(this.count--,this.count===0){if(this.stylesheets)Of(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qu=null;function Of(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qu=new Map,n.forEach(yT,t),qu=null,ju.call(t))}function yT(t,n){if(!(n.state.loading&4)){var r=qu.get(t);if(r)var o=r.get(null);else{r=new Map,qu.set(t,r);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var y=c[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}c=n.instance,y=c.getAttribute("data-precedence"),f=r.get(y)||o,f===o&&r.set(null,c),r.set(y,c),this.count++,o=ju.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Qo={$$typeof:dt,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function _T(t,n,r,o,c,f,y,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function cy(t,n,r,o,c,f,y,E,R,k,F,X){return t=new _T(t,n,r,y,E,R,k,X),n=1,f===!0&&(n|=24),f=vn(3,null,null,n),t.current=f,f.stateNode=t,n=hh(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:r,cache:n},gh(f),t}function hy(t){return t?(t=Wa,t):Wa}function fy(t,n,r,o,c,f){c=hy(c),o.context===null?o.context=c:o.pendingContext=c,o=sr(n),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=or(t,o,n),r!==null&&(Sn(r,t,n),bo(r,t,n))}function dy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Vf(t,n){dy(t,n),(t=t.alternate)&&dy(t,n)}function my(t){if(t.tag===13){var n=Ja(t,67108864);n!==null&&Sn(n,t,67108864),Vf(t,67108864)}}var Hu=!0;function vT(t,n,r,o){var c=G.T;G.T=null;var f=nt.p;try{nt.p=2,xf(t,n,r,o)}finally{nt.p=f,G.T=c}}function ET(t,n,r,o){var c=G.T;G.T=null;var f=nt.p;try{nt.p=8,xf(t,n,r,o)}finally{nt.p=f,G.T=c}}function xf(t,n,r,o){if(Hu){var c=Mf(o);if(c===null)Ef(t,n,o,Gu,r),py(t,o);else if(AT(c,t,n,r,o))o.stopPropagation();else if(py(t,o),n&4&&-1<TT.indexOf(t)){for(;c!==null;){var f=Zn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=jn(f.pendingLanes);if(y!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;y;){var R=1<<31-le(y);E.entanglements[1]|=R,y&=~R}hi(f),(Kt&6)===0&&(Cu=ct()+500,Bo(0))}}break;case 13:E=Ja(f,2),E!==null&&Sn(E,f,2),Du(),Vf(f,2)}if(f=Mf(o),f===null&&Ef(t,n,o,Gu,r),f===c)break;c=f}c!==null&&o.stopPropagation()}else Ef(t,n,o,null,r)}}function Mf(t){return t=Dn(t),Uf(t)}var Gu=null;function Uf(t){if(Gu=null,t=bi(t),t!==null){var n=h(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=d(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Gu=t,null}function gy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ct()){case bt:return 2;case ne:return 8;case oe:case Fe:return 32;case ie:return 268435456;default:return 32}default:return 32}}var Lf=!1,Er=null,Tr=null,Ar=null,Ko=new Map,Xo=new Map,br=[],TT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function py(t,n){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":Ko.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(n.pointerId)}}function $o(t,n,r,o,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Zn(n),n!==null&&my(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function AT(t,n,r,o,c){switch(n){case"focusin":return Er=$o(Er,t,n,r,o,c),!0;case"dragenter":return Tr=$o(Tr,t,n,r,o,c),!0;case"mouseover":return Ar=$o(Ar,t,n,r,o,c),!0;case"pointerover":var f=c.pointerId;return Ko.set(f,$o(Ko.get(f)||null,t,n,r,o,c)),!0;case"gotpointercapture":return f=c.pointerId,Xo.set(f,$o(Xo.get(f)||null,t,n,r,o,c)),!0}return!1}function yy(t){var n=bi(t.target);if(n!==null){var r=h(n);if(r!==null){if(n=r.tag,n===13){if(n=d(r),n!==null){t.blockedOn=n,Dl(t.priority,function(){if(r.tag===13){var o=bn();o=Zi(o);var c=Ja(r,o);c!==null&&Sn(c,r,o),Vf(r,o)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Mf(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Ci=o,r.target.dispatchEvent(o),Ci=null}else return n=Zn(r),n!==null&&my(n),t.blockedOn=r,!1;n.shift()}return!0}function _y(t,n,r){Fu(t)&&r.delete(n)}function bT(){Lf=!1,Er!==null&&Fu(Er)&&(Er=null),Tr!==null&&Fu(Tr)&&(Tr=null),Ar!==null&&Fu(Ar)&&(Ar=null),Ko.forEach(_y),Xo.forEach(_y)}function Yu(t,n){t.blockedOn===n&&(t.blockedOn=null,Lf||(Lf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bT)))}var Qu=null;function vy(t){Qu!==t&&(Qu=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Qu===t&&(Qu=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],c=t[n+2];if(typeof o!="function"){if(Uf(o||r)===null)continue;break}var f=Zn(r);f!==null&&(t.splice(n,3),n-=3,Mh(f,{pending:!0,data:c,method:r.method,action:o},o,c))}}))}function Zo(t){function n(R){return Yu(R,t)}Er!==null&&Yu(Er,t),Tr!==null&&Yu(Tr,t),Ar!==null&&Yu(Ar,t),Ko.forEach(n),Xo.forEach(n);for(var r=0;r<br.length;r++){var o=br[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<br.length&&(r=br[0],r.blockedOn===null);)yy(r),r.blockedOn===null&&br.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var c=r[o],f=r[o+1],y=c[be]||null;if(typeof f=="function")y||vy(r);else if(y){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,y=f[be]||null)E=y.formAction;else if(Uf(c)!==null)continue}else E=y.action;typeof E=="function"?r[o+1]=E:(r.splice(o,3),o-=3),vy(r)}}}function Pf(t){this._internalRoot=t}Ku.prototype.render=Pf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(s(409));var r=n.current,o=bn();fy(r,o,t,n,null,null)},Ku.prototype.unmount=Pf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;fy(t.current,2,null,t,null,null),Du(),n[Cn]=null}};function Ku(t){this._internalRoot=t}Ku.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ji();t={blockedOn:null,target:t,priority:n};for(var r=0;r<br.length&&n!==0&&n<br[r].priority;r++);br.splice(r,0,t),r===0&&yy(t)}};var Ey=e.version;if(Ey!=="19.1.0")throw Error(s(527,Ey,"19.1.0"));nt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=_(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var ST={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{Zt=Xu.inject(ST),qt=Xu}catch{}}return Wo.createRoot=function(t,n){if(!l(t))throw Error(s(299));var r=!1,o="",c=Lg,f=Pg,y=kg,E=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=cy(t,1,!1,null,null,r,o,c,f,y,E,null),t[Cn]=n.current,vf(t),new Pf(n)},Wo.hydrateRoot=function(t,n,r){if(!l(t))throw Error(s(299));var o=!1,c="",f=Lg,y=Pg,E=kg,R=null,k=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks),r.formState!==void 0&&(k=r.formState)),n=cy(t,1,!0,n,r??null,o,c,f,y,E,R,k),n.context=hy(null),r=n.current,o=bn(),o=Zi(o),c=sr(o),c.callback=null,or(r,c,o),r=o,n.current.lanes=r,Ai(n,r),hi(n),t[Cn]=n.current,vf(t),new Ku(n)},Wo.version="19.1.0",Wo}var Ny;function MT(){if(Ny)return Bf.exports;Ny=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Bf.exports=xT(),Bf.exports}var UT=MT();const LT=uv(UT);var Oy;(function(a){a.STRING="string",a.NUMBER="number",a.INTEGER="integer",a.BOOLEAN="boolean",a.ARRAY="array",a.OBJECT="object"})(Oy||(Oy={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vy;(function(a){a.LANGUAGE_UNSPECIFIED="language_unspecified",a.PYTHON="python"})(Vy||(Vy={}));var xy;(function(a){a.OUTCOME_UNSPECIFIED="outcome_unspecified",a.OUTCOME_OK="outcome_ok",a.OUTCOME_FAILED="outcome_failed",a.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(xy||(xy={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=["user","model","function","system"];var Uy;(function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Uy||(Uy={}));var Ly;(function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"})(Ly||(Ly={}));var Py;(function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"})(Py||(Py={}));var ky;(function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER"})(ky||(ky={}));var il;(function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.OTHER="OTHER"})(il||(il={}));var zy;(function(a){a.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",a.RETRIEVAL_QUERY="RETRIEVAL_QUERY",a.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",a.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",a.CLASSIFICATION="CLASSIFICATION",a.CLUSTERING="CLUSTERING"})(zy||(zy={}));var By;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE"})(By||(By={}));var jy;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"})(jy||(jy={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class bs extends on{constructor(e,i){super(e),this.response=i}}class cv extends on{constructor(e,i,s,l){super(e),this.status=i,this.statusText=s,this.errorDetails=l}}class Cr extends on{}class hv extends on{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="https://generativelanguage.googleapis.com",kT="v1beta",zT="0.24.1",BT="genai-js";var wa;(function(a){a.GENERATE_CONTENT="generateContent",a.STREAM_GENERATE_CONTENT="streamGenerateContent",a.COUNT_TOKENS="countTokens",a.EMBED_CONTENT="embedContent",a.BATCH_EMBED_CONTENTS="batchEmbedContents"})(wa||(wa={}));class jT{constructor(e,i,s,l,h){this.model=e,this.task=i,this.apiKey=s,this.stream=l,this.requestOptions=h}toString(){var e,i;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||kT;let h=`${((i=this.requestOptions)===null||i===void 0?void 0:i.baseUrl)||PT}/${s}/${this.model}:${this.task}`;return this.stream&&(h+="?alt=sse"),h}}function qT(a){const e=[];return a?.apiClient&&e.push(a.apiClient),e.push(`${BT}/${zT}`),e.join(" ")}async function HT(a){var e;const i=new Headers;i.append("Content-Type","application/json"),i.append("x-goog-api-client",qT(a.requestOptions)),i.append("x-goog-api-key",a.apiKey);let s=(e=a.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(l){throw new Cr(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${l.message}`)}for(const[l,h]of s.entries()){if(l==="x-goog-api-key")throw new Cr(`Cannot set reserved header name ${l}`);if(l==="x-goog-api-client")throw new Cr(`Header name ${l} can only be set using the apiClient field`);i.append(l,h)}}return i}async function GT(a,e,i,s,l,h){const d=new jT(a,e,i,s,h);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},KT(h)),{method:"POST",headers:await HT(d),body:l})}}async function Tl(a,e,i,s,l,h={},d=fetch){const{url:g,fetchOptions:_}=await GT(a,e,i,s,l,h);return FT(g,_,d)}async function FT(a,e,i=fetch){let s;try{s=await i(a,e)}catch(l){YT(l,a)}return s.ok||await QT(s,a),s}function YT(a,e){let i=a;throw i.name==="AbortError"?(i=new hv(`Request aborted when fetching ${e.toString()}: ${a.message}`),i.stack=a.stack):a instanceof cv||a instanceof Cr||(i=new on(`Error fetching from ${e.toString()}: ${a.message}`),i.stack=a.stack),i}async function QT(a,e){let i="",s;try{const l=await a.json();i=l.error.message,l.error.details&&(i+=` ${JSON.stringify(l.error.details)}`,s=l.error.details)}catch{}throw new cv(`Error fetching from ${e.toString()}: [${a.status} ${a.statusText}] ${i}`,a.status,a.statusText,s)}function KT(a){const e={};if(a?.signal!==void 0||a?.timeout>=0){const i=new AbortController;a?.timeout>=0&&setTimeout(()=>i.abort(),a.timeout),a?.signal&&a.signal.addEventListener("abort",()=>{i.abort()}),e.signal=i.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(a){return a.text=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),nc(a.candidates[0]))throw new bs(`${Rr(a)}`,a);return XT(a)}else if(a.promptFeedback)throw new bs(`Text not available. ${Rr(a)}`,a);return""},a.functionCall=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),nc(a.candidates[0]))throw new bs(`${Rr(a)}`,a);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),qy(a)[0]}else if(a.promptFeedback)throw new bs(`Function call not available. ${Rr(a)}`,a)},a.functionCalls=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),nc(a.candidates[0]))throw new bs(`${Rr(a)}`,a);return qy(a)}else if(a.promptFeedback)throw new bs(`Function call not available. ${Rr(a)}`,a)},a}function XT(a){var e,i,s,l;const h=[];if(!((i=(e=a.candidates)===null||e===void 0?void 0:e[0].content)===null||i===void 0)&&i.parts)for(const d of(l=(s=a.candidates)===null||s===void 0?void 0:s[0].content)===null||l===void 0?void 0:l.parts)d.text&&h.push(d.text),d.executableCode&&h.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&h.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return h.length>0?h.join(""):""}function qy(a){var e,i,s,l;const h=[];if(!((i=(e=a.candidates)===null||e===void 0?void 0:e[0].content)===null||i===void 0)&&i.parts)for(const d of(l=(s=a.candidates)===null||s===void 0?void 0:s[0].content)===null||l===void 0?void 0:l.parts)d.functionCall&&h.push(d.functionCall);if(h.length>0)return h}const $T=[il.RECITATION,il.SAFETY,il.LANGUAGE];function nc(a){return!!a.finishReason&&$T.includes(a.finishReason)}function Rr(a){var e,i,s;let l="";if((!a.candidates||a.candidates.length===0)&&a.promptFeedback)l+="Response was blocked",!((e=a.promptFeedback)===null||e===void 0)&&e.blockReason&&(l+=` due to ${a.promptFeedback.blockReason}`),!((i=a.promptFeedback)===null||i===void 0)&&i.blockReasonMessage&&(l+=`: ${a.promptFeedback.blockReasonMessage}`);else if(!((s=a.candidates)===null||s===void 0)&&s[0]){const h=a.candidates[0];nc(h)&&(l+=`Candidate was blocked due to ${h.finishReason}`,h.finishMessage&&(l+=`: ${h.finishMessage}`))}return l}function ul(a){return this instanceof ul?(this.v=a,this):new ul(a)}function ZT(a,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(a,e||[]),l,h=[];return l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l;function d(S){s[S]&&(l[S]=function(B){return new Promise(function(K,tt){h.push([S,B,K,tt])>1||g(S,B)})})}function g(S,B){try{_(s[S](B))}catch(K){D(h[0][3],K)}}function _(S){S.value instanceof ul?Promise.resolve(S.value.v).then(v,A):D(h[0][2],S)}function v(S){g("next",S)}function A(S){g("throw",S)}function D(S,B){S(B),h.shift(),h.length&&g(h[0][0],h[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function JT(a){const e=a.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),i=e1(e),[s,l]=i.tee();return{stream:t1(s),response:WT(l)}}async function WT(a){const e=[],i=a.getReader();for(;;){const{done:s,value:l}=await i.read();if(s)return Rd(n1(e));e.push(l)}}function t1(a){return ZT(this,arguments,function*(){const i=a.getReader();for(;;){const{value:s,done:l}=yield ul(i.read());if(l)break;yield yield ul(Rd(s))}})}function e1(a){const e=a.getReader();return new ReadableStream({start(s){let l="";return h();function h(){return e.read().then(({value:d,done:g})=>{if(g){if(l.trim()){s.error(new on("Failed to parse stream"));return}s.close();return}l+=d;let _=l.match(Hy),v;for(;_;){try{v=JSON.parse(_[1])}catch{s.error(new on(`Error parsing JSON response: "${_[1]}"`));return}s.enqueue(v),l=l.substring(_[0].length),_=l.match(Hy)}return h()}).catch(d=>{let g=d;throw g.stack=d.stack,g.name==="AbortError"?g=new hv("Request aborted when reading from the stream"):g=new on("Error reading from the stream"),g})}}})}function n1(a){const e=a[a.length-1],i={promptFeedback:e?.promptFeedback};for(const s of a){if(s.candidates){let l=0;for(const h of s.candidates)if(i.candidates||(i.candidates=[]),i.candidates[l]||(i.candidates[l]={index:l}),i.candidates[l].citationMetadata=h.citationMetadata,i.candidates[l].groundingMetadata=h.groundingMetadata,i.candidates[l].finishReason=h.finishReason,i.candidates[l].finishMessage=h.finishMessage,i.candidates[l].safetyRatings=h.safetyRatings,h.content&&h.content.parts){i.candidates[l].content||(i.candidates[l].content={role:h.content.role||"user",parts:[]});const d={};for(const g of h.content.parts)g.text&&(d.text=g.text),g.functionCall&&(d.functionCall=g.functionCall),g.executableCode&&(d.executableCode=g.executableCode),g.codeExecutionResult&&(d.codeExecutionResult=g.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),i.candidates[l].content.parts.push(d)}l++}s.usageMetadata&&(i.usageMetadata=s.usageMetadata)}return i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fv(a,e,i,s){const l=await Tl(e,wa.STREAM_GENERATE_CONTENT,a,!0,JSON.stringify(i),s);return JT(l)}async function dv(a,e,i,s){const h=await(await Tl(e,wa.GENERATE_CONTENT,a,!1,JSON.stringify(i),s)).json();return{response:Rd(h)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(a){if(a!=null){if(typeof a=="string")return{role:"system",parts:[{text:a}]};if(a.text)return{role:"system",parts:[a]};if(a.parts)return a.role?a:{role:"system",parts:a.parts}}}function cl(a){let e=[];if(typeof a=="string")e=[{text:a}];else for(const i of a)typeof i=="string"?e.push({text:i}):e.push(i);return i1(e)}function i1(a){const e={role:"user",parts:[]},i={role:"function",parts:[]};let s=!1,l=!1;for(const h of a)"functionResponse"in h?(i.parts.push(h),l=!0):(e.parts.push(h),s=!0);if(s&&l)throw new on("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!l)throw new on("No content is provided for sending chat message.");return s?e:i}function r1(a,e){var i;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(i=e?.cachedContent)===null||i===void 0?void 0:i.name,contents:[]};const l=a.generateContentRequest!=null;if(a.contents){if(l)throw new Cr("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=a.contents}else if(l)s=Object.assign(Object.assign({},s),a.generateContentRequest);else{const h=cl(a);s.contents=[h]}return{generateContentRequest:s}}function Gy(a){let e;return a.contents?e=a:e={contents:[cl(a)]},a.systemInstruction&&(e.systemInstruction=mv(a.systemInstruction)),e}function a1(a){return typeof a=="string"||Array.isArray(a)?{content:cl(a)}:a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],s1={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function o1(a){let e=!1;for(const i of a){const{role:s,parts:l}=i;if(!e&&s!=="user")throw new on(`First content should be with role 'user', got ${s}`);if(!My.includes(s))throw new on(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(My)}`);if(!Array.isArray(l))throw new on("Content should have 'parts' property with an array of Parts");if(l.length===0)throw new on("Each Content should have at least one part");const h={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const g of l)for(const _ of Fy)_ in g&&(h[_]+=1);const d=s1[s];for(const g of Fy)if(!d.includes(g)&&h[g]>0)throw new on(`Content with role '${s}' can't contain '${g}' part`);e=!0}}function Yy(a){var e;if(a.candidates===void 0||a.candidates.length===0)return!1;const i=(e=a.candidates[0])===null||e===void 0?void 0:e.content;if(i===void 0||i.parts===void 0||i.parts.length===0)return!1;for(const s of i.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="SILENT_ERROR";class l1{constructor(e,i,s,l={}){this.model=i,this.params=s,this._requestOptions=l,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(o1(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,i={}){var s,l,h,d,g,_;await this._sendPromise;const v=cl(e),A={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,v]},D=Object.assign(Object.assign({},this._requestOptions),i);let S;return this._sendPromise=this._sendPromise.then(()=>dv(this._apiKey,this.model,A,D)).then(B=>{var K;if(Yy(B.response)){this._history.push(v);const tt=Object.assign({parts:[],role:"model"},(K=B.response.candidates)===null||K===void 0?void 0:K[0].content);this._history.push(tt)}else{const tt=Rr(B.response);tt&&console.warn(`sendMessage() was unsuccessful. ${tt}. Inspect response object for details.`)}S=B}).catch(B=>{throw this._sendPromise=Promise.resolve(),B}),await this._sendPromise,S}async sendMessageStream(e,i={}){var s,l,h,d,g,_;await this._sendPromise;const v=cl(e),A={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,v]},D=Object.assign(Object.assign({},this._requestOptions),i),S=fv(this._apiKey,this.model,A,D);return this._sendPromise=this._sendPromise.then(()=>S).catch(B=>{throw new Error(Qy)}).then(B=>B.response).then(B=>{if(Yy(B)){this._history.push(v);const K=Object.assign({},B.candidates[0].content);K.role||(K.role="model"),this._history.push(K)}else{const K=Rr(B);K&&console.warn(`sendMessageStream() was unsuccessful. ${K}. Inspect response object for details.`)}}).catch(B=>{B.message!==Qy&&console.error(B)}),S}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(a,e,i,s){return(await Tl(e,wa.COUNT_TOKENS,a,!1,JSON.stringify(i),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(a,e,i,s){return(await Tl(e,wa.EMBED_CONTENT,a,!1,JSON.stringify(i),s)).json()}async function h1(a,e,i,s){const l=i.requests.map(d=>Object.assign(Object.assign({},d),{model:e}));return(await Tl(e,wa.BATCH_EMBED_CONTENTS,a,!1,JSON.stringify({requests:l}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,i,s={}){this.apiKey=e,this._requestOptions=s,i.model.includes("/")?this.model=i.model:this.model=`models/${i.model}`,this.generationConfig=i.generationConfig||{},this.safetySettings=i.safetySettings||[],this.tools=i.tools,this.toolConfig=i.toolConfig,this.systemInstruction=mv(i.systemInstruction),this.cachedContent=i.cachedContent}async generateContent(e,i={}){var s;const l=Gy(e),h=Object.assign(Object.assign({},this._requestOptions),i);return dv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},l),h)}async generateContentStream(e,i={}){var s;const l=Gy(e),h=Object.assign(Object.assign({},this._requestOptions),i);return fv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},l),h)}startChat(e){var i;return new l1(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},e),this._requestOptions)}async countTokens(e,i={}){const s=r1(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),l=Object.assign(Object.assign({},this._requestOptions),i);return u1(this.apiKey,this.model,s,l)}async embedContent(e,i={}){const s=a1(e),l=Object.assign(Object.assign({},this._requestOptions),i);return c1(this.apiKey,this.model,s,l)}async batchEmbedContents(e,i={}){const s=Object.assign(Object.assign({},this._requestOptions),i);return h1(this.apiKey,this.model,e,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.apiKey=e}getGenerativeModel(e,i){if(!e.model)throw new on("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Ky(this.apiKey,e,i)}getGenerativeModelFromCachedContent(e,i,s){if(!e.name)throw new Cr("Cached content must contain a `name` field.");if(!e.model)throw new Cr("Cached content must contain a `model` field.");const l=["model","systemInstruction"];for(const d of l)if(i?.[d]&&e[d]&&i?.[d]!==e[d]){if(d==="model"){const g=i.model.startsWith("models/")?i.model.replace("models/",""):i.model,_=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(g===_)continue}throw new Cr(`Different value for "${d}" specified in modelParams (${i[d]}) and cachedContent (${e[d]})`)}const h=Object.assign(Object.assign({},i),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Ky(this.apiKey,h,s)}}const f1=()=>{};var $y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=function(a){const e=[];let i=0;for(let s=0;s<a.length;s++){let l=a.charCodeAt(s);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&s+1<a.length&&(a.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++s)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},d1=function(a){const e=[];let i=0,s=0;for(;i<a.length;){const l=a[i++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const h=a[i++];e[s++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=a[i++],d=a[i++],g=a[i++],_=((l&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const h=a[i++],d=a[i++];e[s++]=String.fromCharCode((l&15)<<12|(h&63)<<6|d&63)}}return e.join("")},pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<a.length;l+=3){const h=a[l],d=l+1<a.length,g=d?a[l+1]:0,_=l+2<a.length,v=_?a[l+2]:0,A=h>>2,D=(h&3)<<4|g>>4;let S=(g&15)<<2|v>>6,B=v&63;_||(B=64,d||(S=64)),s.push(i[A],i[D],i[S],i[B])}return s.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(gv(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):d1(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<a.length;){const h=i[a.charAt(l++)],g=l<a.length?i[a.charAt(l)]:0;++l;const v=l<a.length?i[a.charAt(l)]:64;++l;const D=l<a.length?i[a.charAt(l)]:64;if(++l,h==null||g==null||v==null||D==null)throw new m1;const S=h<<2|g>>4;if(s.push(S),v!==64){const B=g<<4&240|v>>2;if(s.push(B),D!==64){const K=v<<6&192|D;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class m1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g1=function(a){const e=gv(a);return pv.encodeByteArray(e,!0)},cc=function(a){return g1(a).replace(/\./g,"")},p1=function(a){try{return pv.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=()=>y1().__FIREBASE_DEFAULTS__,v1=()=>{if(typeof process>"u"||typeof $y>"u")return;const a=$y.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},E1=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&p1(a[1]);return e&&JSON.parse(e)},wd=()=>{try{return f1()||_1()||v1()||E1()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},T1=a=>{var e,i;return(i=(e=wd())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[a]},A1=a=>{const e=T1(a);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),s]:[e.substring(0,i),s]},yv=()=>{var a;return(a=wd())===null||a===void 0?void 0:a.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function S1(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=e||"demo-project",l=a.iat||0,h=a.sub||a.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}}},a);return[cc(JSON.stringify(i)),cc(JSON.stringify(d)),""].join(".")}const rl={};function w1(){const a={prod:[],emulator:[]};for(const e of Object.keys(rl))rl[e]?a.emulator.push(e):a.prod.push(e);return a}function C1(a){let e=document.getElementById(a),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),i=!0),{created:i,element:e}}let Zy=!1;function I1(a,e){if(typeof window>"u"||typeof document>"u"||!Cd(window.location.host)||rl[a]===e||rl[a]||Zy)return;rl[a]=e;function i(S){return`__firebase__banner__${S}`}const s="__firebase__banner",h=w1().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function _(S,B){S.setAttribute("width","24"),S.setAttribute("id",B),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Zy=!0,d()},S}function A(S,B){S.setAttribute("id",B),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function D(){const S=C1(s),B=i("text"),K=document.getElementById(B)||document.createElement("span"),tt=i("learnmore"),W=document.getElementById(tt)||document.createElement("a"),wt=i("preprendIcon"),mt=document.getElementById(wt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const dt=S.element;g(dt),A(W,tt);const Mt=v();_(mt,wt),dt.append(mt,K,W,Mt),document.body.appendChild(dt)}h?(K.innerText="Preview backend disconnected.",mt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(mt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",D):D()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N1(){var a;const e=(a=wd())===null||a===void 0?void 0:a.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O1(){return!N1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V1(){try{return typeof indexedDB=="object"}catch{return!1}}function x1(){return new Promise((a,e)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(s),a(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var h;e(((h=l.error)===null||h===void 0?void 0:h.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="FirebaseError";class zs extends Error{constructor(e,i,s){super(i),this.code=e,this.customData=s,this.name=M1,Object.setPrototypeOf(this,zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_v.prototype.create)}}class _v{constructor(e,i,s){this.service=e,this.serviceName=i,this.errors=s}create(e,...i){const s=i[0]||{},l=`${this.service}/${e}`,h=this.errors[e],d=h?U1(h,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new zs(l,g,s)}}function U1(a,e){return a.replace(L1,(i,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const L1=/\{\$([^}]+)}/g;function hc(a,e){if(a===e)return!0;const i=Object.keys(a),s=Object.keys(e);for(const l of i){if(!s.includes(l))return!1;const h=a[l],d=e[l];if(Jy(h)&&Jy(d)){if(!hc(h,d))return!1}else if(h!==d)return!1}for(const l of s)if(!i.includes(l))return!1;return!0}function Jy(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(a){return a&&a._delegate?a._delegate:a}class hl{constructor(e,i,s){this.name=e,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const s=new b1;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const s=this.normalizeInstanceIdentifier(e?.identifier),l=(i=e?.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(h){if(l)return null;throw h}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z1(e))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:l});s.resolve(h)}catch{}}}}clearInstance(e=Aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Aa){return this.instances.has(e)}getOptions(e=Aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);s===g&&d.resolve(l)}return l}onInit(e,i){var s;const l=this.normalizeInstanceIdentifier(i),h=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;h.add(e),this.onInitCallbacks.set(l,h);const d=this.instances.get(l);return d&&e(d,l),()=>{h.delete(e)}}invokeOnInitCallbacks(e,i){const s=this.onInitCallbacks.get(i);if(s)for(const l of s)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:k1(e),options:i}),this.instances.set(e,s),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Aa){return this.component?this.component.multipleInstances?e:Aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k1(a){return a===Aa?void 0:a}function z1(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new P1(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Bt||(Bt={}));const j1={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},q1=Bt.INFO,H1={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},G1=(a,e,...i)=>{if(e<a.logLevel)return;const s=new Date().toISOString(),l=H1[e];if(l)console[l](`[${s}]  ${a.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vv{constructor(e){this.name=e,this._logLevel=q1,this._logHandler=G1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...e),this._logHandler(this,Bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...e),this._logHandler(this,Bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...e),this._logHandler(this,Bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...e),this._logHandler(this,Bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...e),this._logHandler(this,Bt.ERROR,...e)}}const F1=(a,e)=>e.some(i=>a instanceof i);let Wy,t_;function Y1(){return Wy||(Wy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q1(){return t_||(t_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,td=new WeakMap,Tv=new WeakMap,Gf=new WeakMap,Id=new WeakMap;function K1(a){const e=new Promise((i,s)=>{const l=()=>{a.removeEventListener("success",h),a.removeEventListener("error",d)},h=()=>{i(Ir(a.result)),l()},d=()=>{s(a.error),l()};a.addEventListener("success",h),a.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&Ev.set(i,a)}).catch(()=>{}),Id.set(e,a),e}function X1(a){if(td.has(a))return;const e=new Promise((i,s)=>{const l=()=>{a.removeEventListener("complete",h),a.removeEventListener("error",d),a.removeEventListener("abort",d)},h=()=>{i(),l()},d=()=>{s(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",h),a.addEventListener("error",d),a.addEventListener("abort",d)});td.set(a,e)}let ed={get(a,e,i){if(a instanceof IDBTransaction){if(e==="done")return td.get(a);if(e==="objectStoreNames")return a.objectStoreNames||Tv.get(a);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Ir(a[e])},set(a,e,i){return a[e]=i,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function $1(a){ed=a(ed)}function Z1(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const s=a.call(Ff(this),e,...i);return Tv.set(s,e.sort?e.sort():[e]),Ir(s)}:Q1().includes(a)?function(...e){return a.apply(Ff(this),e),Ir(Ev.get(this))}:function(...e){return Ir(a.apply(Ff(this),e))}}function J1(a){return typeof a=="function"?Z1(a):(a instanceof IDBTransaction&&X1(a),F1(a,Y1())?new Proxy(a,ed):a)}function Ir(a){if(a instanceof IDBRequest)return K1(a);if(Gf.has(a))return Gf.get(a);const e=J1(a);return e!==a&&(Gf.set(a,e),Id.set(e,a)),e}const Ff=a=>Id.get(a);function W1(a,e,{blocked:i,upgrade:s,blocking:l,terminated:h}={}){const d=indexedDB.open(a,e),g=Ir(d);return s&&d.addEventListener("upgradeneeded",_=>{s(Ir(d.result),_.oldVersion,_.newVersion,Ir(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),g.then(_=>{h&&_.addEventListener("close",()=>h()),l&&_.addEventListener("versionchange",v=>l(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const tA=["get","getKey","getAll","getAllKeys","count"],eA=["put","add","delete","clear"],Yf=new Map;function e_(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Yf.get(e))return Yf.get(e);const i=e.replace(/FromIndex$/,""),s=e!==i,l=eA.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(l||tA.includes(i)))return;const h=async function(d,...g){const _=this.transaction(d,l?"readwrite":"readonly");let v=_.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[i](...g),l&&_.done]))[0]};return Yf.set(e,h),h}$1(a=>({...a,get:(e,i,s)=>e_(e,i)||a.get(e,i,s),has:(e,i)=>!!e_(e,i)||a.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(iA(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function iA(a){const e=a.getComponent();return e?.type==="VERSION"}const nd="@firebase/app",n_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new vv("@firebase/app"),rA="@firebase/app-compat",aA="@firebase/analytics-compat",sA="@firebase/analytics",oA="@firebase/app-check-compat",lA="@firebase/app-check",uA="@firebase/auth",cA="@firebase/auth-compat",hA="@firebase/database",fA="@firebase/data-connect",dA="@firebase/database-compat",mA="@firebase/functions",gA="@firebase/functions-compat",pA="@firebase/installations",yA="@firebase/installations-compat",_A="@firebase/messaging",vA="@firebase/messaging-compat",EA="@firebase/performance",TA="@firebase/performance-compat",AA="@firebase/remote-config",bA="@firebase/remote-config-compat",SA="@firebase/storage",RA="@firebase/storage-compat",wA="@firebase/firestore",CA="@firebase/ai",IA="@firebase/firestore-compat",DA="firebase",NA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="[DEFAULT]",OA={[nd]:"fire-core",[rA]:"fire-core-compat",[sA]:"fire-analytics",[aA]:"fire-analytics-compat",[lA]:"fire-app-check",[oA]:"fire-app-check-compat",[uA]:"fire-auth",[cA]:"fire-auth-compat",[hA]:"fire-rtdb",[fA]:"fire-data-connect",[dA]:"fire-rtdb-compat",[mA]:"fire-fn",[gA]:"fire-fn-compat",[pA]:"fire-iid",[yA]:"fire-iid-compat",[_A]:"fire-fcm",[vA]:"fire-fcm-compat",[EA]:"fire-perf",[TA]:"fire-perf-compat",[AA]:"fire-rc",[bA]:"fire-rc-compat",[SA]:"fire-gcs",[RA]:"fire-gcs-compat",[wA]:"fire-fst",[IA]:"fire-fst-compat",[CA]:"fire-vertex","fire-js":"fire-js",[DA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Map,VA=new Map,rd=new Map;function i_(a,e){try{a.container.addComponent(e)}catch(i){Qi.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,i)}}function dc(a){const e=a.name;if(rd.has(e))return Qi.debug(`There were multiple attempts to register component ${e}.`),!1;rd.set(e,a);for(const i of fc.values())i_(i,a);for(const i of VA.values())i_(i,a);return!0}function xA(a,e){const i=a.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),a.container.getProvider(e)}function MA(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new _v("app","Firebase",UA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,i,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=NA;function Av(a,e={}){let i=a;typeof e!="object"&&(e={name:e});const s=Object.assign({name:id,automaticDataCollectionEnabled:!0},e),l=s.name;if(typeof l!="string"||!l)throw Dr.create("bad-app-name",{appName:String(l)});if(i||(i=yv()),!i)throw Dr.create("no-options");const h=fc.get(l);if(h){if(hc(i,h.options)&&hc(s,h.config))return h;throw Dr.create("duplicate-app",{appName:l})}const d=new B1(l);for(const _ of rd.values())d.addComponent(_);const g=new LA(i,s,d);return fc.set(l,g),g}function kA(a=id){const e=fc.get(a);if(!e&&a===id&&yv())return Av();if(!e)throw Dr.create("no-app",{appName:a});return e}function Ds(a,e,i){var s;let l=(s=OA[a])!==null&&s!==void 0?s:a;i&&(l+=`-${i}`);const h=l.match(/\s|\//),d=e.match(/\s|\//);if(h||d){const g=[`Unable to register library "${l}" with version "${e}":`];h&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),h&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qi.warn(g.join(" "));return}dc(new hl(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",BA=1,fl="firebase-heartbeat-store";let Qf=null;function bv(){return Qf||(Qf=W1(zA,BA,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(fl)}catch(i){console.warn(i)}}}}).catch(a=>{throw Dr.create("idb-open",{originalErrorMessage:a.message})})),Qf}async function jA(a){try{const i=(await bv()).transaction(fl),s=await i.objectStore(fl).get(Sv(a));return await i.done,s}catch(e){if(e instanceof zs)Qi.warn(e.message);else{const i=Dr.create("idb-get",{originalErrorMessage:e?.message});Qi.warn(i.message)}}}async function r_(a,e){try{const s=(await bv()).transaction(fl,"readwrite");await s.objectStore(fl).put(e,Sv(a)),await s.done}catch(i){if(i instanceof zs)Qi.warn(i.message);else{const s=Dr.create("idb-set",{originalErrorMessage:i?.message});Qi.warn(s.message)}}}function Sv(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1024,HA=30;class GA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new YA(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,i;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=a_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(d=>d.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:l}),this._heartbeatsCache.heartbeats.length>HA){const d=QA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Qi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=a_(),{heartbeatsToSend:s,unsentEntries:l}=FA(this._heartbeatsCache.heartbeats),h=cc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=i,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(i){return Qi.warn(i),""}}}function a_(){return new Date().toISOString().substring(0,10)}function FA(a,e=qA){const i=[];let s=a.slice();for(const l of a){const h=i.find(d=>d.agent===l.agent);if(h){if(h.dates.push(l.date),s_(i)>e){h.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),s_(i)>e){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class YA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V1()?x1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await jA(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const l=await this.read();return r_(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const l=await this.read();return r_(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function s_(a){return cc(JSON.stringify({version:2,heartbeats:a})).length}function QA(a){if(a.length===0)return-1;let e=0,i=a[0].date;for(let s=1;s<a.length;s++)a[s].date<i&&(i=a[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(a){dc(new hl("platform-logger",e=>new nA(e),"PRIVATE")),dc(new hl("heartbeat",e=>new GA(e),"PRIVATE")),Ds(nd,n_,a),Ds(nd,n_,"esm2017"),Ds("fire-js","")}KA("");var XA="firebase",$A="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(XA,$A,"app");var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nr,Rv;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,b){function C(){}C.prototype=b.prototype,V.D=b.prototype,V.prototype=new C,V.prototype.constructor=V,V.C=function(O,x,M){for(var w=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)w[ye-2]=arguments[ye];return b.prototype[x].apply(O,w)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,i),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,b,C){C||(C=0);var O=Array(16);if(typeof b=="string")for(var x=0;16>x;++x)O[x]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(x=0;16>x;++x)O[x]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=V.g[0],C=V.g[1],x=V.g[2];var M=V.g[3],w=b+(M^C&(x^M))+O[0]+3614090360&4294967295;b=C+(w<<7&4294967295|w>>>25),w=M+(x^b&(C^x))+O[1]+3905402710&4294967295,M=b+(w<<12&4294967295|w>>>20),w=x+(C^M&(b^C))+O[2]+606105819&4294967295,x=M+(w<<17&4294967295|w>>>15),w=C+(b^x&(M^b))+O[3]+3250441966&4294967295,C=x+(w<<22&4294967295|w>>>10),w=b+(M^C&(x^M))+O[4]+4118548399&4294967295,b=C+(w<<7&4294967295|w>>>25),w=M+(x^b&(C^x))+O[5]+1200080426&4294967295,M=b+(w<<12&4294967295|w>>>20),w=x+(C^M&(b^C))+O[6]+2821735955&4294967295,x=M+(w<<17&4294967295|w>>>15),w=C+(b^x&(M^b))+O[7]+4249261313&4294967295,C=x+(w<<22&4294967295|w>>>10),w=b+(M^C&(x^M))+O[8]+1770035416&4294967295,b=C+(w<<7&4294967295|w>>>25),w=M+(x^b&(C^x))+O[9]+2336552879&4294967295,M=b+(w<<12&4294967295|w>>>20),w=x+(C^M&(b^C))+O[10]+4294925233&4294967295,x=M+(w<<17&4294967295|w>>>15),w=C+(b^x&(M^b))+O[11]+2304563134&4294967295,C=x+(w<<22&4294967295|w>>>10),w=b+(M^C&(x^M))+O[12]+1804603682&4294967295,b=C+(w<<7&4294967295|w>>>25),w=M+(x^b&(C^x))+O[13]+4254626195&4294967295,M=b+(w<<12&4294967295|w>>>20),w=x+(C^M&(b^C))+O[14]+2792965006&4294967295,x=M+(w<<17&4294967295|w>>>15),w=C+(b^x&(M^b))+O[15]+1236535329&4294967295,C=x+(w<<22&4294967295|w>>>10),w=b+(x^M&(C^x))+O[1]+4129170786&4294967295,b=C+(w<<5&4294967295|w>>>27),w=M+(C^x&(b^C))+O[6]+3225465664&4294967295,M=b+(w<<9&4294967295|w>>>23),w=x+(b^C&(M^b))+O[11]+643717713&4294967295,x=M+(w<<14&4294967295|w>>>18),w=C+(M^b&(x^M))+O[0]+3921069994&4294967295,C=x+(w<<20&4294967295|w>>>12),w=b+(x^M&(C^x))+O[5]+3593408605&4294967295,b=C+(w<<5&4294967295|w>>>27),w=M+(C^x&(b^C))+O[10]+38016083&4294967295,M=b+(w<<9&4294967295|w>>>23),w=x+(b^C&(M^b))+O[15]+3634488961&4294967295,x=M+(w<<14&4294967295|w>>>18),w=C+(M^b&(x^M))+O[4]+3889429448&4294967295,C=x+(w<<20&4294967295|w>>>12),w=b+(x^M&(C^x))+O[9]+568446438&4294967295,b=C+(w<<5&4294967295|w>>>27),w=M+(C^x&(b^C))+O[14]+3275163606&4294967295,M=b+(w<<9&4294967295|w>>>23),w=x+(b^C&(M^b))+O[3]+4107603335&4294967295,x=M+(w<<14&4294967295|w>>>18),w=C+(M^b&(x^M))+O[8]+1163531501&4294967295,C=x+(w<<20&4294967295|w>>>12),w=b+(x^M&(C^x))+O[13]+2850285829&4294967295,b=C+(w<<5&4294967295|w>>>27),w=M+(C^x&(b^C))+O[2]+4243563512&4294967295,M=b+(w<<9&4294967295|w>>>23),w=x+(b^C&(M^b))+O[7]+1735328473&4294967295,x=M+(w<<14&4294967295|w>>>18),w=C+(M^b&(x^M))+O[12]+2368359562&4294967295,C=x+(w<<20&4294967295|w>>>12),w=b+(C^x^M)+O[5]+4294588738&4294967295,b=C+(w<<4&4294967295|w>>>28),w=M+(b^C^x)+O[8]+2272392833&4294967295,M=b+(w<<11&4294967295|w>>>21),w=x+(M^b^C)+O[11]+1839030562&4294967295,x=M+(w<<16&4294967295|w>>>16),w=C+(x^M^b)+O[14]+4259657740&4294967295,C=x+(w<<23&4294967295|w>>>9),w=b+(C^x^M)+O[1]+2763975236&4294967295,b=C+(w<<4&4294967295|w>>>28),w=M+(b^C^x)+O[4]+1272893353&4294967295,M=b+(w<<11&4294967295|w>>>21),w=x+(M^b^C)+O[7]+4139469664&4294967295,x=M+(w<<16&4294967295|w>>>16),w=C+(x^M^b)+O[10]+3200236656&4294967295,C=x+(w<<23&4294967295|w>>>9),w=b+(C^x^M)+O[13]+681279174&4294967295,b=C+(w<<4&4294967295|w>>>28),w=M+(b^C^x)+O[0]+3936430074&4294967295,M=b+(w<<11&4294967295|w>>>21),w=x+(M^b^C)+O[3]+3572445317&4294967295,x=M+(w<<16&4294967295|w>>>16),w=C+(x^M^b)+O[6]+76029189&4294967295,C=x+(w<<23&4294967295|w>>>9),w=b+(C^x^M)+O[9]+3654602809&4294967295,b=C+(w<<4&4294967295|w>>>28),w=M+(b^C^x)+O[12]+3873151461&4294967295,M=b+(w<<11&4294967295|w>>>21),w=x+(M^b^C)+O[15]+530742520&4294967295,x=M+(w<<16&4294967295|w>>>16),w=C+(x^M^b)+O[2]+3299628645&4294967295,C=x+(w<<23&4294967295|w>>>9),w=b+(x^(C|~M))+O[0]+4096336452&4294967295,b=C+(w<<6&4294967295|w>>>26),w=M+(C^(b|~x))+O[7]+1126891415&4294967295,M=b+(w<<10&4294967295|w>>>22),w=x+(b^(M|~C))+O[14]+2878612391&4294967295,x=M+(w<<15&4294967295|w>>>17),w=C+(M^(x|~b))+O[5]+4237533241&4294967295,C=x+(w<<21&4294967295|w>>>11),w=b+(x^(C|~M))+O[12]+1700485571&4294967295,b=C+(w<<6&4294967295|w>>>26),w=M+(C^(b|~x))+O[3]+2399980690&4294967295,M=b+(w<<10&4294967295|w>>>22),w=x+(b^(M|~C))+O[10]+4293915773&4294967295,x=M+(w<<15&4294967295|w>>>17),w=C+(M^(x|~b))+O[1]+2240044497&4294967295,C=x+(w<<21&4294967295|w>>>11),w=b+(x^(C|~M))+O[8]+1873313359&4294967295,b=C+(w<<6&4294967295|w>>>26),w=M+(C^(b|~x))+O[15]+4264355552&4294967295,M=b+(w<<10&4294967295|w>>>22),w=x+(b^(M|~C))+O[6]+2734768916&4294967295,x=M+(w<<15&4294967295|w>>>17),w=C+(M^(x|~b))+O[13]+1309151649&4294967295,C=x+(w<<21&4294967295|w>>>11),w=b+(x^(C|~M))+O[4]+4149444226&4294967295,b=C+(w<<6&4294967295|w>>>26),w=M+(C^(b|~x))+O[11]+3174756917&4294967295,M=b+(w<<10&4294967295|w>>>22),w=x+(b^(M|~C))+O[2]+718787259&4294967295,x=M+(w<<15&4294967295|w>>>17),w=C+(M^(x|~b))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+b&4294967295,V.g[1]=V.g[1]+(x+(w<<21&4294967295|w>>>11))&4294967295,V.g[2]=V.g[2]+x&4294967295,V.g[3]=V.g[3]+M&4294967295}s.prototype.u=function(V,b){b===void 0&&(b=V.length);for(var C=b-this.blockSize,O=this.B,x=this.h,M=0;M<b;){if(x==0)for(;M<=C;)l(this,V,M),M+=this.blockSize;if(typeof V=="string"){for(;M<b;)if(O[x++]=V.charCodeAt(M++),x==this.blockSize){l(this,O),x=0;break}}else for(;M<b;)if(O[x++]=V[M++],x==this.blockSize){l(this,O),x=0;break}}this.h=x,this.o+=b},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var b=1;b<V.length-8;++b)V[b]=0;var C=8*this.o;for(b=V.length-8;b<V.length;++b)V[b]=C&255,C/=256;for(this.u(V),V=Array(16),b=C=0;4>b;++b)for(var O=0;32>O;O+=8)V[C++]=this.g[b]>>>O&255;return V};function h(V,b){var C=g;return Object.prototype.hasOwnProperty.call(C,V)?C[V]:C[V]=b(V)}function d(V,b){this.h=b;for(var C=[],O=!0,x=V.length-1;0<=x;x--){var M=V[x]|0;O&&M==b||(C[x]=M,O=!1)}this.g=C}var g={};function _(V){return-128<=V&&128>V?h(V,function(b){return new d([b|0],0>b?-1:0)}):new d([V|0],0>V?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return D;if(0>V)return W(v(-V));for(var b=[],C=1,O=0;V>=C;O++)b[O]=V/C|0,C*=4294967296;return new d(b,0)}function A(V,b){if(V.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(V.charAt(0)=="-")return W(A(V.substring(1),b));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=v(Math.pow(b,8)),O=D,x=0;x<V.length;x+=8){var M=Math.min(8,V.length-x),w=parseInt(V.substring(x,x+M),b);8>M?(M=v(Math.pow(b,M)),O=O.j(M).add(v(w))):(O=O.j(C),O=O.add(v(w)))}return O}var D=_(0),S=_(1),B=_(16777216);a=d.prototype,a.m=function(){if(tt(this))return-W(this).m();for(var V=0,b=1,C=0;C<this.g.length;C++){var O=this.i(C);V+=(0<=O?O:4294967296+O)*b,b*=4294967296}return V},a.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(K(this))return"0";if(tt(this))return"-"+W(this).toString(V);for(var b=v(Math.pow(V,6)),C=this,O="";;){var x=Mt(C,b).g;C=wt(C,x.j(b));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(V);if(C=x,K(C))return M+O;for(;6>M.length;)M="0"+M;O=M+O}},a.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function K(V){if(V.h!=0)return!1;for(var b=0;b<V.g.length;b++)if(V.g[b]!=0)return!1;return!0}function tt(V){return V.h==-1}a.l=function(V){return V=wt(this,V),tt(V)?-1:K(V)?0:1};function W(V){for(var b=V.g.length,C=[],O=0;O<b;O++)C[O]=~V.g[O];return new d(C,~V.h).add(S)}a.abs=function(){return tt(this)?W(this):this},a.add=function(V){for(var b=Math.max(this.g.length,V.g.length),C=[],O=0,x=0;x<=b;x++){var M=O+(this.i(x)&65535)+(V.i(x)&65535),w=(M>>>16)+(this.i(x)>>>16)+(V.i(x)>>>16);O=w>>>16,M&=65535,w&=65535,C[x]=w<<16|M}return new d(C,C[C.length-1]&-2147483648?-1:0)};function wt(V,b){return V.add(W(b))}a.j=function(V){if(K(this)||K(V))return D;if(tt(this))return tt(V)?W(this).j(W(V)):W(W(this).j(V));if(tt(V))return W(this.j(W(V)));if(0>this.l(B)&&0>V.l(B))return v(this.m()*V.m());for(var b=this.g.length+V.g.length,C=[],O=0;O<2*b;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var x=0;x<V.g.length;x++){var M=this.i(O)>>>16,w=this.i(O)&65535,ye=V.i(x)>>>16,Ft=V.i(x)&65535;C[2*O+2*x]+=w*Ft,mt(C,2*O+2*x),C[2*O+2*x+1]+=M*Ft,mt(C,2*O+2*x+1),C[2*O+2*x+1]+=w*ye,mt(C,2*O+2*x+1),C[2*O+2*x+2]+=M*ye,mt(C,2*O+2*x+2)}for(O=0;O<b;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=b;O<2*b;O++)C[O]=0;return new d(C,0)};function mt(V,b){for(;(V[b]&65535)!=V[b];)V[b+1]+=V[b]>>>16,V[b]&=65535,b++}function dt(V,b){this.g=V,this.h=b}function Mt(V,b){if(K(b))throw Error("division by zero");if(K(V))return new dt(D,D);if(tt(V))return b=Mt(W(V),b),new dt(W(b.g),W(b.h));if(tt(b))return b=Mt(V,W(b)),new dt(W(b.g),b.h);if(30<V.g.length){if(tt(V)||tt(b))throw Error("slowDivide_ only works with positive integers.");for(var C=S,O=b;0>=O.l(V);)C=_t(C),O=_t(O);var x=Ut(C,1),M=Ut(O,1);for(O=Ut(O,2),C=Ut(C,2);!K(O);){var w=M.add(O);0>=w.l(V)&&(x=x.add(C),M=w),O=Ut(O,1),C=Ut(C,1)}return b=wt(V,x.j(b)),new dt(x,b)}for(x=D;0<=V.l(b);){for(C=Math.max(1,Math.floor(V.m()/b.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),M=v(C),w=M.j(b);tt(w)||0<w.l(V);)C-=O,M=v(C),w=M.j(b);K(M)&&(M=S),x=x.add(M),V=wt(V,w)}return new dt(x,V)}a.A=function(V){return Mt(this,V).h},a.and=function(V){for(var b=Math.max(this.g.length,V.g.length),C=[],O=0;O<b;O++)C[O]=this.i(O)&V.i(O);return new d(C,this.h&V.h)},a.or=function(V){for(var b=Math.max(this.g.length,V.g.length),C=[],O=0;O<b;O++)C[O]=this.i(O)|V.i(O);return new d(C,this.h|V.h)},a.xor=function(V){for(var b=Math.max(this.g.length,V.g.length),C=[],O=0;O<b;O++)C[O]=this.i(O)^V.i(O);return new d(C,this.h^V.h)};function _t(V){for(var b=V.g.length+1,C=[],O=0;O<b;O++)C[O]=V.i(O)<<1|V.i(O-1)>>>31;return new d(C,V.h)}function Ut(V,b){var C=b>>5;b%=32;for(var O=V.g.length-C,x=[],M=0;M<O;M++)x[M]=0<b?V.i(M+C)>>>b|V.i(M+C+1)<<32-b:V.i(M+C);return new d(x,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Rv=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=A,Nr=d}).apply(typeof o_<"u"?o_:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wv,tl,Cv,ic,ad,Iv,Dv,Nv;(function(){var a,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,p){return u==Array.prototype||u==Object.prototype||(u[m]=p.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var m=0;m<u.length;++m){var p=u[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=i(this);function l(u,m){if(m)t:{var p=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var L=u[T];if(!(L in p))break t;p=p[L]}u=u[u.length-1],T=p[u],m=m(T),m!=T&&m!=null&&e(p,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var p=0,T=!1,L={next:function(){if(!T&&p<u.length){var q=p++;return{value:m(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(u){return u||function(){return h(this,function(m,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function _(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,p){return u.call.apply(u.bind,arguments)}function D(u,m,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function S(u,m,p){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:D,S.apply(null,arguments)}function B(u,m){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function K(u,m){function p(){}p.prototype=m.prototype,u.aa=m.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,L,q){for(var et=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)et[Lt-2]=arguments[Lt];return m.prototype[L].apply(T,et)}}function tt(u){const m=u.length;if(0<m){const p=Array(m);for(let T=0;T<m;T++)p[T]=u[T];return p}return[]}function W(u,m){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(_(T)){const L=u.length||0,q=T.length||0;u.length=L+q;for(let et=0;et<q;et++)u[L+et]=T[et]}else u.push(T)}}class wt{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function mt(u){return/^[\s\xa0]*$/.test(u)}function dt(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Mt(u){return Mt[" "](u),u}Mt[" "]=function(){};var _t=dt().indexOf("Gecko")!=-1&&!(dt().toLowerCase().indexOf("webkit")!=-1&&dt().indexOf("Edge")==-1)&&!(dt().indexOf("Trident")!=-1||dt().indexOf("MSIE")!=-1)&&dt().indexOf("Edge")==-1;function Ut(u,m,p){for(const T in u)m.call(p,u[T],T,u)}function V(u,m){for(const p in u)m.call(void 0,u[p],p,u)}function b(u){const m={};for(const p in u)m[p]=u[p];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let p,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(p in T)u[p]=T[p];for(let q=0;q<C.length;q++)p=C[q],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function x(u){var m=1;u=u.split(":");const p=[];for(;0<m&&u.length;)p.push(u.shift()),m--;return u.length&&p.push(u.join(":")),p}function M(u){g.setTimeout(()=>{throw u},0)}function w(){var u=jt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ye{constructor(){this.h=this.g=null}add(m,p){const T=Ft.get();T.set(m,p),this.h?this.h.next=T:this.g=T,this.h=T}}var Ft=new wt(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,lt=!1,jt=new ye,I=()=>{const u=g.Promise.resolve(void 0);nt=()=>{u.then(Z)}};var Z=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){M(p)}var m=Ft;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}lt=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ht=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};g.addEventListener("test",p,m),g.removeEventListener("test",p,m)}catch{}return u}();function St(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(_t){t:{try{Mt(m.nodeName);var L=!0;break t}catch{}L=!1}L||(m=null)}}else p=="mouseover"?m=u.fromElement:p=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&St.aa.h.call(this)}}K(St,J);var vt={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),$t=0;function wn(u,m,p,T,L){this.listener=u,this.proxy=null,this.src=m,this.type=p,this.capture=!!T,this.ha=L,this.key=++$t,this.da=this.fa=!1}function Xn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Bn(u){this.src=u,this.g={},this.h=0}Bn.prototype.add=function(u,m,p,T,L){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var et=vi(u,m,T,L);return-1<et?(m=u[et],p||(m.fa=!1)):(m=new wn(m,this.src,q,!!T,L),m.fa=p,u.push(m)),m};function _i(u,m){var p=m.type;if(p in u.g){var T=u.g[p],L=Array.prototype.indexOf.call(T,m,void 0),q;(q=0<=L)&&Array.prototype.splice.call(T,L,1),q&&(Xn(m),u.g[p].length==0&&(delete u.g[p],u.h--))}}function vi(u,m,p,T){for(var L=0;L<u.length;++L){var q=u[L];if(!q.da&&q.listener==m&&q.capture==!!p&&q.ha==T)return L}return-1}var Ei="closure_lm_"+(1e6*Math.random()|0),qr={};function ot(u,m,p,T,L){if(Array.isArray(m)){for(var q=0;q<m.length;q++)ot(u,m[q],p,T,L);return null}return p=ke(p),u&&u[Ae]?u.K(m,p,v(T)?!!T.capture:!1,L):ct(u,m,p,!1,T,L)}function ct(u,m,p,T,L,q){if(!m)throw Error("Invalid event type");var et=v(L)?!!L.capture:!!L,Lt=ie(u);if(Lt||(u[Ei]=Lt=new Bn(u)),p=Lt.add(m,p,T,et,q),p.proxy)return p;if(T=Ct(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)ht||(L=et),L===void 0&&(L=!1),u.addEventListener(m.toString(),T,L);else if(u.attachEvent)u.attachEvent(oe(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ct(){function u(p){return m.call(u.src,u.listener,p)}const m=Fe;return u}function bt(u,m,p,T,L){if(Array.isArray(m))for(var q=0;q<m.length;q++)bt(u,m[q],p,T,L);else T=v(T)?!!T.capture:!!T,p=ke(p),u&&u[Ae]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],p=vi(q,p,T,L),-1<p&&(Xn(q[p]),Array.prototype.splice.call(q,p,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=ie(u))&&(m=u.g[m.toString()],u=-1,m&&(u=vi(m,p,T,L)),(p=-1<u?m[u]:null)&&ne(p))}function ne(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ae])_i(m.i,u);else{var p=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(p,T,u.capture):m.detachEvent?m.detachEvent(oe(p),T):m.addListener&&m.removeListener&&m.removeListener(T),(p=ie(m))?(_i(p,u),p.h==0&&(p.src=null,m[Ei]=null)):Xn(u)}}}function oe(u){return u in qr?qr[u]:qr[u]="on"+u}function Fe(u,m){if(u.da)u=!0;else{m=new St(m,this);var p=u.listener,T=u.ha||u.src;u.fa&&ne(u),u=p.call(T,m)}return u}function ie(u){return u=u[Ei],u instanceof Bn?u:null}var Ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(u){return typeof u=="function"?u:(u[Ye]||(u[Ye]=function(m){return u.handleEvent(m)}),u[Ye])}function Zt(){it.call(this),this.i=new Bn(this),this.M=this,this.F=null}K(Zt,it),Zt.prototype[Ae]=!0,Zt.prototype.removeEventListener=function(u,m,p,T){bt(this,u,m,p,T)};function qt(u,m){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var L=m;m=new J(T,u),O(m,L)}if(L=!0,p)for(var q=p.length-1;0<=q;q--){var et=m.g=p[q];L=Ne(et,T,!0,m)&&L}if(et=m.g=u,L=Ne(et,T,!0,m)&&L,L=Ne(et,T,!1,m)&&L,p)for(q=0;q<p.length;q++)et=m.g=p[q],L=Ne(et,T,!1,m)&&L}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var p=u.g[m],T=0;T<p.length;T++)Xn(p[T]);delete u.g[m],u.h--}}this.F=null},Zt.prototype.K=function(u,m,p,T){return this.i.add(String(u),m,!1,p,T)},Zt.prototype.L=function(u,m,p,T){return this.i.add(String(u),m,!0,p,T)};function Ne(u,m,p,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,q=0;q<m.length;++q){var et=m[q];if(et&&!et.da&&et.capture==p){var Lt=et.listener,Ve=et.ha||et.src;et.fa&&_i(u.i,et),L=Lt.call(Ve,T)!==!1&&L}}return L&&!T.defaultPrevented}function le(u,m,p){if(typeof u=="function")p&&(u=S(u,p));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function $i(u){u.g=le(()=>{u.g=null,u.i&&(u.i=!1,$i(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Fs extends it{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$i(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(u){it.call(this),this.h=u,this.g={}}K(Hr,it);var Gr=[];function Fr(u){Ut(u.g,function(m,p){this.g.hasOwnProperty(p)&&ne(m)},u),u.g={}}Hr.prototype.N=function(){Hr.aa.N.call(this),Fr(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=g.JSON.stringify,xa=g.JSON.parse,Yr=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function Ys(){}Ys.prototype.h=null;function Qs(u){return u.h||(u.h=u.i())}function Ks(){}var Ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ai(){J.call(this,"d")}K(Ai,J);function Xs(){J.call(this,"c")}K(Xs,J);var $n={},$s=null;function Zi(){return $s=$s||new Zt}$n.La="serverreachability";function Ma(u){J.call(this,$n.La,u)}K(Ma,J);function Ji(u){const m=Zi();qt(m,new Ma(m))}$n.STAT_EVENT="statevent";function Dl(u,m){J.call(this,$n.STAT_EVENT,u),this.stat=m}K(Dl,J);function ce(u){const m=Zi();qt(m,new Dl(m,u))}$n.Ma="timingevent";function Oe(u,m){J.call(this,$n.Ma,u),this.size=m}K(Oe,J);function be(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function Cn(){this.g=!0}Cn.prototype.xa=function(){this.g=!1};function Zs(u,m,p,T,L,q){u.info(function(){if(u.g)if(q)for(var et="",Lt=q.split("&"),Ve=0;Ve<Lt.length;Ve++){var Pt=Lt[Ve].split("=");if(1<Pt.length){var Be=Pt[0];Pt=Pt[1];var xe=Be.split("_");et=2<=xe.length&&xe[1]=="type"?et+(Be+"="+Pt+"&"):et+(Be+"=redacted&")}}else et=null;else et=q;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+m+`
`+p+`
`+et})}function Bc(u,m,p,T,L,q,et){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+m+`
`+p+`
`+q+" "+et})}function Wi(u,m,p,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Qr(u,p)+(T?" "+T:"")})}function Nl(u,m){u.info(function(){return"TIMEOUT: "+m})}Cn.prototype.info=function(){};function Qr(u,m){if(!u.g)return m;if(!m)return null;try{var p=JSON.parse(m);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var q=L[0];if(q!="noop"&&q!="stop"&&q!="close")for(var et=1;et<L.length;et++)L[et]=""}}}}return jn(p)}catch{return m}}var tr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zn;function Jn(){}K(Jn,Ys),Jn.prototype.g=function(){return new XMLHttpRequest},Jn.prototype.i=function(){return{}},Zn=new Jn;function ln(u,m,p,T){this.j=u,this.i=m,this.l=p,this.R=T||1,this.U=new Hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}var Js={},Ua={};function qn(u,m,p){u.L=1,u.v=Jr(yn(m)),u.m=p,u.P=!0,Si(u,null)}function Si(u,m){u.F=Date.now(),Kr(u),u.A=yn(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),ro(p.i,"t",T),u.C=0,p=u.j.J,u.h=new _e,u.g=Yl(u.j,p?m:null,!u.m),0<u.O&&(u.M=new Fs(S(u.Y,u,u.g),u.O)),m=u.U,p=u.g,T=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Gr[0]=L.toString()),L=Gr);for(var q=0;q<L.length;q++){var et=ot(p,L[q],T||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Ji(),Zs(u.i,u.u,u.A,u.l,u.R,u.m)}ln.prototype.ca=function(u){u=u.target;const m=this.M;m&&On(u)==3?m.j():this.Y(u)},ln.prototype.Y=function(u){try{if(u==this.g)t:{const xe=On(this.g);var m=this.g.Ba();const Vi=this.g.Z();if(!(3>xe)&&(xe!=3||this.g&&(this.h.h||this.g.oa()||kl(this.g)))){this.J||xe!=4||m==7||(m==8||0>=Vi?Ji(3):Ji(2)),er(this);var p=this.g.Z();this.X=p;e:if(Ol(this)){var T=kl(this.g);u="";var L=T.length,q=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qe(this),Wn(this);var et="";break e}this.h.i=new g.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(q&&m==L-1)});T.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=p==200,Bc(this.i,this.u,this.A,this.l,this.R,xe,p),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,Ve=this.g;if((Lt=Ve.g?Ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mt(Lt)){var Pt=Lt;break e}}Pt=null}if(p=Pt)Wi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xr(this,p);else{this.o=!1,this.s=3,ce(12),Qe(this),Wn(this);break t}}if(this.P){p=!0;let Ke;for(;!this.J&&this.C<et.length;)if(Ke=Vl(this,et),Ke==Ua){xe==4&&(this.s=4,ce(14),p=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==Js){this.s=4,ce(15),Wi(this.i,this.l,et,"[Invalid Chunk]"),p=!1;break}else Wi(this.i,this.l,Ke,null),Xr(this,Ke);if(Ol(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||et.length!=0||this.h.h||(this.s=1,ce(16),p=!1),this.o=this.o&&p,!p)Wi(this.i,this.l,et,"[Invalid Chunked Response]"),Qe(this),Wn(this);else if(0<et.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),sa(Be),Be.M=!0,ce(11))}}else Wi(this.i,this.l,et,null),Xr(this,et);xe==4&&Qe(this),this.o&&!this.J&&(xe==4?Hl(this.j,this):(this.o=!1,Kr(this)))}else Fc(this.g),p==400&&0<et.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Qe(this),Wn(this)}}}catch{}finally{}};function Ol(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Vl(u,m){var p=u.C,T=m.indexOf(`
`,p);return T==-1?Ua:(p=Number(m.substring(p,T)),isNaN(p)?Js:(T+=1,T+p>m.length?Ua:(m=m.slice(T,T+p),u.C=T+p,m)))}ln.prototype.cancel=function(){this.J=!0,Qe(this)};function Kr(u){u.S=Date.now()+u.I,xl(u,u.I)}function xl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=be(S(u.ba,u),m)}function er(u){u.B&&(g.clearTimeout(u.B),u.B=null)}ln.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Nl(this.i,this.A),this.L!=2&&(Ji(),ce(17)),Qe(this),this.s=2,Wn(this)):xl(this,this.S-u)};function Wn(u){u.j.G==0||u.J||Hl(u.j,u)}function Qe(u){er(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Fr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Xr(u,m){try{var p=u.j;if(p.G!=0&&(p.g==u||Ws(p.h,u))){if(!u.K&&Ws(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Qa(p),Fa(p);else break t;uo(p),ce(18)}}else p.za=L[1],0<p.za-p.T&&37500>L[2]&&p.F&&p.v==0&&!p.C&&(p.C=be(S(p.Za,p),6e3));if(1>=Pa(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Oi(p,11)}else if((u.K||p.g==u)&&Qa(p),!mt(m))for(L=p.Da.g.parse(m),m=0;m<L.length;m++){let Pt=L[m];if(p.T=Pt[0],Pt=Pt[1],p.G==2)if(Pt[0]=="c"){p.K=Pt[1],p.ia=Pt[2];const Be=Pt[3];Be!=null&&(p.la=Be,p.j.info("VER="+p.la));const xe=Pt[4];xe!=null&&(p.Aa=xe,p.j.info("SVER="+p.Aa));const Vi=Pt[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(T=1.5*Vi,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const Ke=u.g;if(Ke){const si=Ke.g?Ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var q=T.h;q.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ka(q,q.h),q.h=null))}if(T.D){const ho=Ke.g?Ke.g.getResponseHeader("X-HTTP-Session-Id"):null;ho&&(T.ya=ho,Jt(T.I,T.D,ho))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var et=u;if(T.qa=Fl(T,T.J?T.ia:null,T.W),et.K){un(T.h,et);var Lt=et,Ve=T.L;Ve&&(Lt.I=Ve),Lt.B&&(er(Lt),Kr(Lt)),T.g=et}else jl(T);0<p.i.length&&Ya(p)}else Pt[0]!="stop"&&Pt[0]!="close"||Oi(p,7);else p.G==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?Oi(p,7):oo(p):Pt[0]!="noop"&&p.l&&p.l.ta(Pt),p.v=0)}}Ji(4)}catch{}}var Ml=class{constructor(u,m){this.g=u,this.map=m}};function Ri(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function La(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pa(u){return u.h?1:u.g?u.g.size:0}function Ws(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ka(u,m){u.g?u.g.add(m):u.h=m}function un(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ri.prototype.cancel=function(){if(this.i=to(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function to(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const p of u.g.values())m=m.concat(p.D);return m}return tt(u.i)}function jc(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(_(u)){for(var m=[],p=u.length,T=0;T<p;T++)m.push(u[T]);return m}m=[],p=0;for(T in u)m[p++]=u[T];return m}function za(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(_(u)||typeof u=="string"){var m=[];u=u.length;for(var p=0;p<u;p++)m.push(p);return m}m=[],p=0;for(const T in u)m[p++]=T;return m}}}function eo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(_(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var p=za(u),T=jc(u),L=T.length,q=0;q<L;q++)m.call(void 0,T[q],p&&p[q],u)}var $r=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qc(u,m){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),L=null;if(0<=T){var q=u[p].substring(0,T);L=u[p].substring(T+1)}else q=u[p];m(q,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Se(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Se){this.h=u.h,Zr(this,u.j),this.o=u.o,this.g=u.g,nr(this,u.s),this.l=u.l;var m=u.i,p=new Ci;p.i=m.i,m.g&&(p.g=new Map(m.g),p.h=m.h),wi(this,p),this.m=u.m}else u&&(m=String(u).match($r))?(this.h=!1,Zr(this,m[1]||"",!0),this.o=In(m[2]||""),this.g=In(m[3]||"",!0),nr(this,m[4]),this.l=In(m[5]||"",!0),wi(this,m[6]||"",!0),this.m=In(m[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}Se.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Wr(m,no,!0),":");var p=this.g;return(p||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Wr(m,no,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Wr(p,p.charAt(0)=="/"?Hc:io,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Wr(p,Ba)),u.join("")};function yn(u){return new Se(u)}function Zr(u,m,p){u.j=p?In(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function nr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function wi(u,m,p){m instanceof Ci?(u.i=m,Ll(u.i,u.h)):(p||(m=Wr(m,Gc)),u.i=new Ci(m,u.h))}function Jt(u,m,p){u.i.set(m,p)}function Jr(u){return Jt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function In(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Wr(u,m,p){return typeof u=="string"?(u=encodeURI(u).replace(m,Ul),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ul(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var no=/[#\/\?@]/g,io=/[#\?:]/g,Hc=/[#\?]/g,Gc=/[#\?@]/g,Ba=/#/g;function Ci(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Dn(u){u.g||(u.g=new Map,u.h=0,u.i&&qc(u.i,function(m,p){u.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}a=Ci.prototype,a.add=function(u,m){Dn(this),this.i=null,u=ti(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(m),this.h+=1,this};function Ii(u,m){Dn(u),m=ti(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Di(u,m){return Dn(u),m=ti(u,m),u.g.has(m)}a.forEach=function(u,m){Dn(this),this.g.forEach(function(p,T){p.forEach(function(L){u.call(m,L,T,this)},this)},this)},a.na=function(){Dn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),p=[];for(let T=0;T<m.length;T++){const L=u[T];for(let q=0;q<L.length;q++)p.push(m[T])}return p},a.V=function(u){Dn(this);let m=[];if(typeof u=="string")Di(this,u)&&(m=m.concat(this.g.get(ti(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)m=m.concat(u[p])}return m},a.set=function(u,m){return Dn(this),this.i=null,u=ti(this,u),Di(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},a.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function ro(u,m,p){Ii(u,m),0<p.length&&(u.i=null,u.g.set(ti(u,m),tt(p)),u.h+=p.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var p=0;p<m.length;p++){var T=m[p];const q=encodeURIComponent(String(T)),et=this.V(T);for(T=0;T<et.length;T++){var L=q;et[T]!==""&&(L+="="+encodeURIComponent(String(et[T]))),u.push(L)}}return this.i=u.join("&")};function ti(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ll(u,m){m&&!u.j&&(Dn(u),u.i=null,u.g.forEach(function(p,T){var L=T.toLowerCase();T!=L&&(Ii(this,T),ro(this,L,p))},u)),u.j=m}function ta(u,m){const p=new Cn;if(g.Image){const T=new Image;T.onload=B(Nn,p,"TestLoadImage: loaded",!0,m,T),T.onerror=B(Nn,p,"TestLoadImage: error",!1,m,T),T.onabort=B(Nn,p,"TestLoadImage: abort",!1,m,T),T.ontimeout=B(Nn,p,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Hn(u,m){const p=new Cn,T=new AbortController,L=setTimeout(()=>{T.abort(),Nn(p,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(L),q.ok?Nn(p,"TestPingServer: ok",!0,m):Nn(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Nn(p,"TestPingServer: error",!1,m)})}function Nn(u,m,p,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(p)}catch{}}function ea(){this.g=new Yr}function ei(u,m,p){const T=p||"";try{eo(u,function(L,q){let et=L;v(L)&&(et=jn(L)),m.push(T+q+"="+encodeURIComponent(et))})}catch(L){throw m.push(T+"type="+encodeURIComponent("_badmap")),L}}function ir(u){this.l=u.Ub||null,this.j=u.eb||!1}K(ir,Ys),ir.prototype.g=function(){return new Ni(this.l,this.j)},ir.prototype.i=function(u){return function(){return u}}({});function Ni(u,m){Zt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(Ni,Zt),a=Ni.prototype,a.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ii(this)},a.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},a.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ao(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ao(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}a.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ni(this):ii(this),this.readyState==3&&ao(this)}},a.Ra=function(u){this.g&&(this.response=this.responseText=u,ni(this))},a.Qa=function(u){this.g&&(this.response=u,ni(this))},a.ga=function(){this.g&&ni(this)};function ni(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ii(u)}a.setRequestHeader=function(u,m){this.u.append(u,m)},a.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=m.next();return u.join(`\r
`)};function ii(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function so(u){let m="";return Ut(u,function(p,T){m+=T,m+=":",m+=p,m+=`\r
`}),m}function ze(u,m,p){t:{for(T in p){var T=!1;break t}T=!0}T||(p=so(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Jt(u,m,p))}function Yt(u){Zt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(Yt,Zt);var ja=/^https?$/i,na=["POST","PUT"];a=Yt.prototype,a.Ha=function(u){this.J=u},a.ea=function(u,m,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zn.g(),this.v=this.o?Qs(this.o):Qs(Zn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){Pl(this,q);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)p.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())p.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(q=>q.toLowerCase()=="content-type"),L=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(na,m,void 0))||T||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,et]of p)this.g.setRequestHeader(q,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Pl(this,q)}};function Pl(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,qa(u),ri(u)}function qa(u){u.A||(u.A=!0,qt(u,"complete"),qt(u,"error"))}a.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,qt(this,"complete"),qt(this,"abort"),ri(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),Yt.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?Ha(this):this.bb())},a.bb=function(){Ha(this)};function Ha(u){if(u.h&&typeof d<"u"&&(!u.v[1]||On(u)!=4||u.Z()!=2)){if(u.u&&On(u)==4)le(u.Ea,0,u);else if(qt(u,"readystatechange"),On(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var p;if(!(p=m)){var T;if(T=et===0){var L=String(u.D).match($r)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),T=!ja.test(L?L.toLowerCase():"")}p=T}if(p)qt(u,"complete"),qt(u,"success");else{u.m=6;try{var q=2<On(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",qa(u)}}finally{ri(u)}}}}function ri(u,m){if(u.g){ia(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||qt(u,"ready");try{p.onreadystatechange=T}catch{}}}function ia(u){u.I&&(g.clearTimeout(u.I),u.I=null)}a.isActive=function(){return!!this.g};function On(u){return u.g?u.g.readyState:0}a.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),xa(m)}};function kl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fc(u){const m={};u=(u.g&&2<=On(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(mt(u[T]))continue;var p=x(u[T]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const q=m[L]||[];m[L]=q,q.push(p)}V(m,function(T){return T.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(u,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||m}function Ga(u){this.Aa=0,this.i=[],this.j=new Cn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,u),this.cb=ra("retryDelaySeedMs",1e4,u),this.Wa=ra("forwardChannelMaxRetries",2,u),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(u&&u.concurrentRequestLimit),this.Da=new ea,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=Ga.prototype,a.la=8,a.G=1,a.connect=function(u,m,p,T){ce(0),this.W=u,this.H=m||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=Fl(this,null,this.W),Ya(this)};function oo(u){if(zl(u),u.G==3){var m=u.U++,p=yn(u.I);if(Jt(p,"SID",u.K),Jt(p,"RID",m),Jt(p,"TYPE","terminate"),aa(u,p),m=new ln(u,u.j,m),m.L=2,m.v=Jr(yn(p)),p=!1,g.navigator&&g.navigator.sendBeacon)try{p=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!p&&g.Image&&(new Image().src=m.v,p=!0),p||(m.g=Yl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Kr(m)}Gl(u)}function Fa(u){u.g&&(sa(u),u.g.cancel(),u.g=null)}function zl(u){Fa(u),u.u&&(g.clearTimeout(u.u),u.u=null),Qa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Ya(u){if(!La(u.h)&&!u.s){u.s=!0;var m=u.Ga;nt||I(),lt||(nt(),lt=!0),jt.add(m,u),u.B=0}}function Yc(u,m){return Pa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=be(S(u.Ga,u,m),co(u,u.B)),u.B++,!0)}a.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new ln(this,this.j,u);let q=this.o;if(this.S&&(q?(q=b(q),O(q,this.S)):q=this.S),this.m!==null||this.O||(L.H=q,q=null),this.P)t:{for(var m=0,p=0;p<this.i.length;p++){e:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=p;break t}if(m===4096||p===this.i.length-1){m=p+1;break t}}m=1e3}else m=1e3;m=Bl(this,L,m),p=yn(this.I),Jt(p,"RID",u),Jt(p,"CVER",22),this.D&&Jt(p,"X-HTTP-Session-Id",this.D),aa(this,p),q&&(this.O?m="headers="+encodeURIComponent(String(so(q)))+"&"+m:this.m&&ze(p,this.m,q)),ka(this.h,L),this.Ua&&Jt(p,"TYPE","init"),this.P?(Jt(p,"$req",m),Jt(p,"SID","null"),L.T=!0,qn(L,p,null)):qn(L,p,m),this.G=2}}else this.G==3&&(u?lo(this,u):this.i.length==0||La(this.h)||lo(this))};function lo(u,m){var p;m?p=m.l:p=u.U++;const T=yn(u.I);Jt(T,"SID",u.K),Jt(T,"RID",p),Jt(T,"AID",u.T),aa(u,T),u.m&&u.o&&ze(T,u.m,u.o),p=new ln(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Bl(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ka(u.h,p),qn(p,T,m)}function aa(u,m){u.H&&Ut(u.H,function(p,T){Jt(m,T,p)}),u.l&&eo({},function(p,T){Jt(m,T,p)})}function Bl(u,m,p){p=Math.min(u.i.length,p);var T=u.l?S(u.l.Na,u.l,u):null;t:{var L=u.i;let q=-1;for(;;){const et=["count="+p];q==-1?0<p?(q=L[0].g,et.push("ofs="+q)):q=0:et.push("ofs="+q);let Lt=!0;for(let Ve=0;Ve<p;Ve++){let Pt=L[Ve].g;const Be=L[Ve].map;if(Pt-=q,0>Pt)q=Math.max(0,L[Ve].g-100),Lt=!1;else try{ei(Be,et,"req"+Pt+"_")}catch{T&&T(Be)}}if(Lt){T=et.join("&");break t}}}return u=u.i.splice(0,p),m.D=u,T}function jl(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;nt||I(),lt||(nt(),lt=!0),jt.add(m,u),u.v=0}}function uo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=be(S(u.Fa,u),co(u,u.v)),u.v++,!0)}a.Fa=function(){if(this.u=null,ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=be(S(this.ab,this),u)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Fa(this),ql(this))};function sa(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function ql(u){u.g=new ln(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=yn(u.qa);Jt(m,"RID","rpc"),Jt(m,"SID",u.K),Jt(m,"AID",u.T),Jt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Jt(m,"TO",u.ja),Jt(m,"TYPE","xmlhttp"),aa(u,m),u.m&&u.o&&ze(m,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Jr(yn(m)),p.m=null,p.P=!0,Si(p,u)}a.Za=function(){this.C!=null&&(this.C=null,Fa(this),uo(this),ce(19))};function Qa(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Hl(u,m){var p=null;if(u.g==m){Qa(u),sa(u),u.g=null;var T=2}else if(Ws(u.h,m))p=m.D,un(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){p=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;T=Zi(),qt(T,new Oe(T,p)),Ya(u)}else jl(u);else if(L=m.s,L==3||L==0&&0<m.X||!(T==1&&Yc(u,m)||T==2&&uo(u)))switch(p&&0<p.length&&(m=u.h,m.i=m.i.concat(p)),L){case 1:Oi(u,5);break;case 4:Oi(u,10);break;case 3:Oi(u,6);break;default:Oi(u,2)}}}function co(u,m){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*m}function Oi(u,m){if(u.j.info("Error code "+m),m==2){var p=S(u.fb,u),T=u.Xa;const L=!T;T=new Se(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Zr(T,"https"),Jr(T),L?ta(T.toString(),p):Hn(T.toString(),p)}else ce(2);u.G=0,u.l&&u.l.sa(m),Gl(u),zl(u)}a.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Gl(u){if(u.G=0,u.ka=[],u.l){const m=to(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ka,m),W(u.ka,u.i),u.h.i.length=0,tt(u.i),u.i.length=0),u.l.ra()}}function Fl(u,m,p){var T=p instanceof Se?yn(p):new Se(p);if(T.g!="")m&&(T.g=m+"."+T.g),nr(T,T.s);else{var L=g.location;T=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var q=new Se(null);T&&Zr(q,T),m&&(q.g=m),L&&nr(q,L),p&&(q.l=p),T=q}return p=u.D,m=u.ya,p&&m&&Jt(T,p,m),Jt(T,"VER",u.la),aa(u,T),T}function Yl(u,m,p){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Yt(new ir({eb:p})):new Yt(u.pa),m.Ha(u.J),m}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ql(){}a=Ql.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function Ka(){}Ka.prototype.g=function(u,m){return new cn(u,m)};function cn(u,m){Zt.call(this),this.g=new Ga(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!mt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!mt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ai(this)}K(cn,Zt),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){oo(this.g)},cn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=jn(u),u=p);m.i.push(new Ml(m.Ya++,u)),m.G==3&&Ya(m)},cn.prototype.N=function(){this.g.l=null,delete this.j,oo(this.g),delete this.g,cn.aa.N.call(this)};function Kl(u){Ai.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const p in m){u=p;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}K(Kl,Ai);function Xl(){Xs.call(this),this.status=1}K(Xl,Xs);function ai(u){this.g=u}K(ai,Ql),ai.prototype.ua=function(){qt(this.g,"a")},ai.prototype.ta=function(u){qt(this.g,new Kl(u))},ai.prototype.sa=function(u){qt(this.g,new Xl)},ai.prototype.ra=function(){qt(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Nv=function(){return new Ka},Dv=function(){return Zi()},Iv=$n,ad={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,ic=tr,bi.COMPLETE="complete",Cv=bi,Ks.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,tl=Ks,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,wv=Yt}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const l_="@firebase/firestore",u_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new vv("@firebase/firestore");function Rs(){return Ca.logLevel}function at(a,...e){if(Ca.logLevel<=Bt.DEBUG){const i=e.map(Dd);Ca.debug(`Firestore (${Bs}): ${a}`,...i)}}function Ki(a,...e){if(Ca.logLevel<=Bt.ERROR){const i=e.map(Dd);Ca.error(`Firestore (${Bs}): ${a}`,...i)}}function xr(a,...e){if(Ca.logLevel<=Bt.WARN){const i=e.map(Dd);Ca.warn(`Firestore (${Bs}): ${a}`,...i)}}function Dd(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(a,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,Ov(a,s,i)}function Ov(a,e,i){let s=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw Ki(s),new Error(s)}function Qt(a,e,i,s){let l="Unexpected state";typeof i=="string"?l=i:s=i,a||Ov(e,l,s)}function At(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends zs{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(an.UNAUTHENTICATED))}shutdown(){}}class JA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class WA{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){Qt(this.o===void 0,42304);let s=this.i;const l=_=>this.i!==s?(s=this.i,i(_)):Promise.resolve();let h=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Or,e.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const _=h;e.enqueueRetryable(async()=>{await _.promise,await l(this.currentUser)})},g=_=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(_=>g(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Or)}},0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(s=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qt(typeof s.accessToken=="string",31837,{l:s}),new Vv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class tb{constructor(e,i,s){this.P=e,this.T=i,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eb{constructor(e,i,s){this.P=e,this.T=i,this.I=s}getToken(){return Promise.resolve(new tb(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable(()=>i(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nb{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,MA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){Qt(this.o===void 0,3512);const s=h=>{h.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,at("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const l=h=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(Qt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new c_(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let s=0;s<a;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=ib(40);for(let h=0;h<l.length;++h)s.length<20&&l[h]<i&&(s+=e.charAt(l[h]%62))}return s}}function Dt(a,e){return a<e?-1:a>e?1:0}function sd(a,e){let i=0;for(;i<a.length&&i<e.length;){const s=a.codePointAt(i),l=e.codePointAt(i);if(s!==l){if(s<128&&l<128)return Dt(s,l);{const h=xv(),d=rb(h.encode(h_(a,i)),h.encode(h_(e,i)));return d!==0?d:Dt(s,l)}}i+=s>65535?2:1}return Dt(a.length,e.length)}function h_(a,e){return a.codePointAt(e)>65535?a.substring(e,e+2):a.substring(e,e+1)}function rb(a,e){for(let i=0;i<a.length&&i<e.length;++i)if(a[i]!==e[i])return Dt(a[i],e[i]);return Dt(a.length,e.length)}function xs(a,e,i){return a.length===e.length&&a.every((s,l)=>i(s,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="__name__";class fi{constructor(e,i,s){i===void 0?i=0:i>e.length&&yt(637,{offset:i,range:e.length}),s===void 0?s=e.length-i:s>e.length-i&&yt(1746,{length:s,range:e.length-i}),this.segments=e,this.offset=i,this.len=s}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach(s=>{i.push(s)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,s=this.limit();i<s;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const s=Math.min(e.length,i.length);for(let l=0;l<s;l++){const h=fi.compareSegments(e.get(l),i.get(l));if(h!==0)return h}return Dt(e.length,i.length)}static compareSegments(e,i){const s=fi.isNumericId(e),l=fi.isNumericId(i);return s&&!l?-1:!s&&l?1:s&&l?fi.extractNumericId(e).compare(fi.extractNumericId(i)):sd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nr.fromString(e.substring(4,e.length-2))}}class se extends fi{construct(e,i,s){return new se(e,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const s of e){if(s.indexOf("//")>=0)throw new rt(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(l=>l.length>0))}return new se(i)}static emptyPath(){return new se([])}}const ab=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends fi{construct(e,i,s){return new We(e,i,s)}static isValidIdentifier(e){return ab.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f_}static keyField(){return new We([f_])}static fromServerFormat(e){const i=[];let s="",l=0;const h=()=>{if(s.length===0)throw new rt(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let d=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new rt(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new rt(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(h(),l++)}if(h(),d)throw new rt(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(i)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(se.fromString(e))}static fromName(e){return new ft(se.fromString(e).popFirst(5))}static empty(){return new ft(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return se.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(a,e,i){if(!i)throw new rt(Q.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function sb(a,e,i,s){if(e===!0&&s===!0)throw new rt(Q.INVALID_ARGUMENT,`${a} and ${i} cannot be used together.`)}function d_(a){if(!ft.isDocumentKey(a))throw new rt(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function m_(a){if(ft.isDocumentKey(a))throw new rt(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Uv(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Sc(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":yt(12329,{type:typeof a})}function Ia(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new rt(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Sc(a);throw new rt(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return a}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(a,e){const i={typeString:a};return e&&(i.value=e),i}function Al(a,e){if(!Uv(a))throw new rt(Q.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in e)if(e[s]){const l=e[s].typeString,h="value"in e[s]?{value:e[s].value}:void 0;if(!(s in a)){i=`JSON missing required field: '${s}'`;break}const d=a[s];if(l&&typeof d!==l){i=`JSON field '${s}' must be a ${l}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${s}' field to equal '${h.value}'`;break}}if(i)throw new rt(Q.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=-62135596800,p_=1e6;class ue{static now(){return ue.fromMillis(Date.now())}static fromDate(e){return ue.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),s=Math.floor((e-1e3*i)*p_);return new ue(i,s)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new rt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new rt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<g_)throw new rt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p_}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Al(e,ue._jsonSchema))return new ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-g_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ue._jsonSchemaVersion="firestore/timestamp/1.0",ue._jsonSchema={type:De("string",ue._jsonSchemaVersion),seconds:De("number"),nanoseconds:De("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new ue(0,0))}static max(){return new Tt(new ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function ob(a,e){const i=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,l=Tt.fromTimestamp(s===1e9?new ue(i+1,0):new ue(i,s));return new Mr(l,ft.empty(),e)}function lb(a){return new Mr(a.readTime,a.key,dl)}class Mr{constructor(e,i,s){this.readTime=e,this.documentKey=i,this.largestBatchId=s}static min(){return new Mr(Tt.min(),ft.empty(),dl)}static max(){return new Mr(Tt.max(),ft.empty(),dl)}}function ub(a,e){let i=a.readTime.compareTo(e.readTime);return i!==0?i:(i=ft.comparator(a.documentKey,e.documentKey),i!==0?i:Dt(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(a){if(a.code!==Q.FAILED_PRECONDITION||a.message!==cb)throw a;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new $((s,l)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,l)},this.catchCallback=h=>{this.wrapFailure(i,h).next(s,l)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof $?i:$.resolve(i)}catch(i){return $.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):$.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):$.reject(i)}static resolve(e){return new $((i,s)=>{i(e)})}static reject(e){return new $((i,s)=>{s(e)})}static waitFor(e){return new $((i,s)=>{let l=0,h=0,d=!1;e.forEach(g=>{++l,g.next(()=>{++h,d&&h===l&&i()},_=>s(_))}),d=!0,h===l&&i()})}static or(e){let i=$.resolve(!1);for(const s of e)i=i.next(l=>l?$.resolve(l):s());return i}static forEach(e,i){const s=[];return e.forEach((l,h)=>{s.push(i.call(this,l,h))}),this.waitFor(s)}static mapArray(e,i){return new $((s,l)=>{const h=e.length,d=new Array(h);let g=0;for(let _=0;_<h;_++){const v=_;i(e[v]).next(A=>{d[v]=A,++g,g===h&&s(d)},A=>l(A))}})}static doWhile(e,i){return new $((s,l)=>{const h=()=>{e()===!0?i().next(()=>{h()},l):s()};h()})}}function fb(a){const e=a.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function qs(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=s=>this._e(s),this.ae=s=>i.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Rc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=-1;function wc(a){return a==null}function mc(a){return a===0&&1/a==-1/0}function db(a){return typeof a=="number"&&Number.isInteger(a)&&!mc(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="";function mb(a){let e="";for(let i=0;i<a.length;i++)e.length>0&&(e=y_(e)),e=gb(a.get(i),e);return y_(e)}function gb(a,e){let i=e;const s=a.length;for(let l=0;l<s;l++){const h=a.charAt(l);switch(h){case"\0":i+="";break;case Lv:i+="";break;default:i+=h}}return i}function y_(a){return a+Lv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(a){let e=0;for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&e++;return e}function Br(a,e){for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&e(i,a[i])}function Pv(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e,i){this.comparator=e,this.root=i||Je.EMPTY}insert(e,i){return new me(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(e){let i=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return i+s.left.size;l<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,s)=>(e(i,s),!1))}toString(){const e=[];return this.inorderTraversal((i,s)=>(e.push(`${i}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,i,s,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?s(e.key,i):1,i&&l&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,i,s,l,h){this.key=e,this.value=i,this.color=s??Je.RED,this.left=l??Je.EMPTY,this.right=h??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,s,l,h){return new Je(e??this.key,i??this.value,s??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,s){let l=this;const h=s(e,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(e,i,s),null):h===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let s,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return Je.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yt(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(e,i,s,l,h){return this}insert(e,i,s){return new Je(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.comparator=e,this.data=new me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,s)=>(e(i),!1))}forEachInRange(e,i){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new v_(this.data.getIterator())}getIteratorFrom(e){return new v_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(s=>{i=i.add(s)}),i}isEqual(e){if(!(e instanceof Pe)||this.size!==e.size)return!1;const i=this.data.getIterator(),s=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=s.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new Pe(this.comparator);return i.data=e,i}}class v_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new Rn([])}unionWith(e){let i=new Pe(We.comparator);for(const s of this.fields)i=i.add(s);for(const s of e)i=i.add(s);return new Rn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return xs(this.fields,e.fields,(i,s)=>i.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new kv("Invalid base64 string: "+h):h}}(e);return new tn(i)}static fromUint8Array(e){const i=function(l){let h="";for(let d=0;d<l.length;++d)h+=String.fromCharCode(l[d]);return h}(e);return new tn(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const pb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(a){if(Qt(!!a,39018),typeof a=="string"){let e=0;const i=pb.exec(a);if(Qt(!!i,46558,{timestamp:a}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Te(a.seconds),nanos:Te(a.nanos)}}function Te(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Lr(a){return typeof a=="string"?tn.fromBase64String(a):tn.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="server_timestamp",Bv="__type__",jv="__previous_value__",qv="__local_write_time__";function Vd(a){var e,i;return((i=(((e=a?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Bv])===null||i===void 0?void 0:i.stringValue)===zv}function Cc(a){const e=a.mapValue.fields[jv];return Vd(e)?Cc(e):e}function ml(a){const e=Ur(a.mapValue.fields[qv].timestampValue);return new ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,i,s,l,h,d,g,_,v,A){this.databaseId=e,this.appId=i,this.persistenceKey=s,this.host=l,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=v,this.isUsingEmulator=A}}const gc="(default)";class gl{constructor(e,i){this.projectId=e,this.database=i||gc}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===gc}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="__type__",_b="__max__",Ju={mapValue:{}},Gv="__vector__",pc="value";function Pr(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Vd(a)?4:Eb(a)?9007199254740991:vb(a)?10:11:yt(28295,{value:a})}function yi(a,e){if(a===e)return!0;const i=Pr(a);if(i!==Pr(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return ml(a).isEqual(ml(e));case 3:return function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const d=Ur(l.timestampValue),g=Ur(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return function(l,h){return Lr(l.bytesValue).isEqual(Lr(h.bytesValue))}(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return function(l,h){return Te(l.geoPointValue.latitude)===Te(h.geoPointValue.latitude)&&Te(l.geoPointValue.longitude)===Te(h.geoPointValue.longitude)}(a,e);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return Te(l.integerValue)===Te(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const d=Te(l.doubleValue),g=Te(h.doubleValue);return d===g?mc(d)===mc(g):isNaN(d)&&isNaN(g)}return!1}(a,e);case 9:return xs(a.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return function(l,h){const d=l.mapValue.fields||{},g=h.mapValue.fields||{};if(__(d)!==__(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!yi(d[_],g[_])))return!1;return!0}(a,e);default:return yt(52216,{left:a})}}function pl(a,e){return(a.values||[]).find(i=>yi(i,e))!==void 0}function Ms(a,e){if(a===e)return 0;const i=Pr(a),s=Pr(e);if(i!==s)return Dt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Dt(a.booleanValue,e.booleanValue);case 2:return function(h,d){const g=Te(h.integerValue||h.doubleValue),_=Te(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1}(a,e);case 3:return E_(a.timestampValue,e.timestampValue);case 4:return E_(ml(a),ml(e));case 5:return sd(a.stringValue,e.stringValue);case 6:return function(h,d){const g=Lr(h),_=Lr(d);return g.compareTo(_)}(a.bytesValue,e.bytesValue);case 7:return function(h,d){const g=h.split("/"),_=d.split("/");for(let v=0;v<g.length&&v<_.length;v++){const A=Dt(g[v],_[v]);if(A!==0)return A}return Dt(g.length,_.length)}(a.referenceValue,e.referenceValue);case 8:return function(h,d){const g=Dt(Te(h.latitude),Te(d.latitude));return g!==0?g:Dt(Te(h.longitude),Te(d.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return T_(a.arrayValue,e.arrayValue);case 10:return function(h,d){var g,_,v,A;const D=h.fields||{},S=d.fields||{},B=(g=D[pc])===null||g===void 0?void 0:g.arrayValue,K=(_=S[pc])===null||_===void 0?void 0:_.arrayValue,tt=Dt(((v=B?.values)===null||v===void 0?void 0:v.length)||0,((A=K?.values)===null||A===void 0?void 0:A.length)||0);return tt!==0?tt:T_(B,K)}(a.mapValue,e.mapValue);case 11:return function(h,d){if(h===Ju.mapValue&&d===Ju.mapValue)return 0;if(h===Ju.mapValue)return 1;if(d===Ju.mapValue)return-1;const g=h.fields||{},_=Object.keys(g),v=d.fields||{},A=Object.keys(v);_.sort(),A.sort();for(let D=0;D<_.length&&D<A.length;++D){const S=sd(_[D],A[D]);if(S!==0)return S;const B=Ms(g[_[D]],v[A[D]]);if(B!==0)return B}return Dt(_.length,A.length)}(a.mapValue,e.mapValue);default:throw yt(23264,{le:i})}}function E_(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Dt(a,e);const i=Ur(a),s=Ur(e),l=Dt(i.seconds,s.seconds);return l!==0?l:Dt(i.nanos,s.nanos)}function T_(a,e){const i=a.values||[],s=e.values||[];for(let l=0;l<i.length&&l<s.length;++l){const h=Ms(i[l],s[l]);if(h)return h}return Dt(i.length,s.length)}function Us(a){return od(a)}function od(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(i){const s=Ur(i);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?function(i){return Lr(i).toBase64()}(a.bytesValue):"referenceValue"in a?function(i){return ft.fromName(i).toString()}(a.referenceValue):"geoPointValue"in a?function(i){return`geo(${i.latitude},${i.longitude})`}(a.geoPointValue):"arrayValue"in a?function(i){let s="[",l=!0;for(const h of i.values||[])l?l=!1:s+=",",s+=od(h);return s+"]"}(a.arrayValue):"mapValue"in a?function(i){const s=Object.keys(i.fields||{}).sort();let l="{",h=!0;for(const d of s)h?h=!1:l+=",",l+=`${d}:${od(i.fields[d])}`;return l+"}"}(a.mapValue):yt(61005,{value:a})}function rc(a){switch(Pr(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cc(a);return e?16+rc(e):16;case 5:return 2*a.stringValue.length;case 6:return Lr(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,h)=>l+rc(h),0)}(a.arrayValue);case 10:case 11:return function(s){let l=0;return Br(s.fields,(h,d)=>{l+=h.length+rc(d)}),l}(a.mapValue);default:throw yt(13486,{value:a})}}function A_(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function ld(a){return!!a&&"integerValue"in a}function xd(a){return!!a&&"arrayValue"in a}function b_(a){return!!a&&"nullValue"in a}function S_(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function ac(a){return!!a&&"mapValue"in a}function vb(a){var e,i;return((i=(((e=a?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hv])===null||i===void 0?void 0:i.stringValue)===Gv}function al(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Br(a.mapValue.fields,(i,s)=>e.mapValue.fields[i]=al(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(a.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=al(a.arrayValue.values[i]);return e}return Object.assign({},a)}function Eb(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===_b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let s=0;s<e.length-1;++s)if(i=(i.mapValue.fields||{})[e.get(s)],!ac(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(i)}setAll(e){let i=We.emptyPath(),s={},l=[];e.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const _=this.getFieldsMap(i);this.applyChanges(_,s,l),s={},l=[],i=g.popLast()}d?s[g.lastSegment()]=al(d):l.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,s,l)}delete(e){const i=this.field(e.popLast());ac(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=i.mapValue.fields[e.get(s)];ac(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(s)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,s){Br(i,(l,h)=>e[l]=h);for(const l of s)delete e[l]}clone(){return new pn(al(this.value))}}function Fv(a){const e=[];return Br(a.fields,(i,s)=>{const l=new We([i]);if(ac(s)){const h=Fv(s.mapValue).fields;if(h.length===0)e.push(l);else for(const d of h)e.push(l.child(d))}else e.push(l)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,i,s,l,h,d,g){this.key=e,this.documentType=i,this.version=s,this.readTime=l,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(e){return new sn(e,0,Tt.min(),Tt.min(),Tt.min(),pn.empty(),0)}static newFoundDocument(e,i,s,l){return new sn(e,1,i,Tt.min(),s,l,0)}static newNoDocument(e,i){return new sn(e,2,i,Tt.min(),Tt.min(),pn.empty(),0)}static newUnknownDocument(e,i){return new sn(e,3,i,Tt.min(),Tt.min(),pn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,i){this.position=e,this.inclusive=i}}function R_(a,e,i){let s=0;for(let l=0;l<a.position.length;l++){const h=e[l],d=a.position[l];if(h.field.isKeyField()?s=ft.comparator(ft.fromName(d.referenceValue),i.key):s=Ms(d,i.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function w_(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let i=0;i<a.position.length;i++)if(!yi(a.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,i="asc"){this.field=e,this.dir=i}}function Tb(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{}class Ie extends Yv{constructor(e,i,s){super(),this.field=e,this.op=i,this.value=s}static create(e,i,s){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,s):new bb(e,i,s):i==="array-contains"?new wb(e,s):i==="in"?new Cb(e,s):i==="not-in"?new Ib(e,s):i==="array-contains-any"?new Db(e,s):new Ie(e,i,s)}static createKeyFieldInFilter(e,i,s){return i==="in"?new Sb(e,s):new Rb(e,s)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Ms(i,this.value)):i!==null&&Pr(this.value)===Pr(i)&&this.matchesComparison(Ms(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends Yv{constructor(e,i){super(),this.filters=e,this.op=i,this.he=null}static create(e,i){return new Kn(e,i)}matches(e){return Qv(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Qv(a){return a.op==="and"}function Kv(a){return Ab(a)&&Qv(a)}function Ab(a){for(const e of a.filters)if(e instanceof Kn)return!1;return!0}function ud(a){if(a instanceof Ie)return a.field.canonicalString()+a.op.toString()+Us(a.value);if(Kv(a))return a.filters.map(e=>ud(e)).join(",");{const e=a.filters.map(i=>ud(i)).join(",");return`${a.op}(${e})`}}function Xv(a,e){return a instanceof Ie?function(s,l){return l instanceof Ie&&s.op===l.op&&s.field.isEqual(l.field)&&yi(s.value,l.value)}(a,e):a instanceof Kn?function(s,l){return l instanceof Kn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((h,d,g)=>h&&Xv(d,l.filters[g]),!0):!1}(a,e):void yt(19439)}function $v(a){return a instanceof Ie?function(i){return`${i.field.canonicalString()} ${i.op} ${Us(i.value)}`}(a):a instanceof Kn?function(i){return i.op.toString()+" {"+i.getFilters().map($v).join(" ,")+"}"}(a):"Filter"}class bb extends Ie{constructor(e,i,s){super(e,i,s),this.key=ft.fromName(s.referenceValue)}matches(e){const i=ft.comparator(e.key,this.key);return this.matchesComparison(i)}}class Sb extends Ie{constructor(e,i){super(e,"in",i),this.keys=Zv("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class Rb extends Ie{constructor(e,i){super(e,"not-in",i),this.keys=Zv("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function Zv(a,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(s=>ft.fromName(s.referenceValue))}class wb extends Ie{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return xd(i)&&pl(i.arrayValue,this.value)}}class Cb extends Ie{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&pl(this.value.arrayValue,i)}}class Ib extends Ie{constructor(e,i){super(e,"not-in",i)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!pl(this.value.arrayValue,i)}}class Db extends Ie{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!xd(i)||!i.arrayValue.values)&&i.arrayValue.values.some(s=>pl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,i=null,s=[],l=[],h=null,d=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=s,this.filters=l,this.limit=h,this.startAt=d,this.endAt=g,this.Pe=null}}function C_(a,e=null,i=[],s=[],l=null,h=null,d=null){return new Nb(a,e,i,s,l,h,d)}function Md(a){const e=At(a);if(e.Pe===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(s=>ud(s)).join(","),i+="|ob:",i+=e.orderBy.map(s=>function(h){return h.field.canonicalString()+h.dir}(s)).join(","),wc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>Us(s)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>Us(s)).join(",")),e.Pe=i}return e.Pe}function Ud(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<a.orderBy.length;i++)if(!Tb(a.orderBy[i],e.orderBy[i]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let i=0;i<a.filters.length;i++)if(!Xv(a.filters[i],e.filters[i]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!w_(a.startAt,e.startAt)&&w_(a.endAt,e.endAt)}function cd(a){return ft.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,i=null,s=[],l=[],h=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=l,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=_,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ob(a,e,i,s,l,h,d,g){return new Hs(a,e,i,s,l,h,d,g)}function Jv(a){return new Hs(a)}function I_(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function Wv(a){return a.collectionGroup!==null}function sl(a){const e=At(a);if(e.Te===null){e.Te=[];const i=new Set;for(const h of e.explicitOrderBy)e.Te.push(h),i.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Pe(We.comparator);return d.filters.forEach(_=>{_.getFlattenedFilters().forEach(v=>{v.isInequality()&&(g=g.add(v.field))})}),g})(e).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||e.Te.push(new yl(h,s))}),i.has(We.keyField().canonicalString())||e.Te.push(new yl(We.keyField(),s))}return e.Te}function di(a){const e=At(a);return e.Ie||(e.Ie=Vb(e,sl(a))),e.Ie}function Vb(a,e){if(a.limitType==="F")return C_(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(l=>{const h=l.dir==="desc"?"asc":"desc";return new yl(l.field,h)});const i=a.endAt?new yc(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new yc(a.startAt.position,a.startAt.inclusive):null;return C_(a.path,a.collectionGroup,e,a.filters,a.limit,i,s)}}function hd(a,e){const i=a.filters.concat([e]);return new Hs(a.path,a.collectionGroup,a.explicitOrderBy.slice(),i,a.limit,a.limitType,a.startAt,a.endAt)}function fd(a,e,i){return new Hs(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,i,a.startAt,a.endAt)}function Ic(a,e){return Ud(di(a),di(e))&&a.limitType===e.limitType}function t0(a){return`${Md(di(a))}|lt:${a.limitType}`}function ws(a){return`Query(target=${function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(l=>$v(l)).join(", ")}]`),wc(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(l=>Us(l)).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(l=>Us(l)).join(",")),`Target(${s})`}(di(a))}; limitType=${a.limitType})`}function Dc(a,e){return e.isFoundDocument()&&function(s,l){const h=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):ft.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(a,e)&&function(s,l){for(const h of sl(s))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0}(a,e)&&function(s,l){for(const h of s.filters)if(!h.matches(l))return!1;return!0}(a,e)&&function(s,l){return!(s.startAt&&!function(d,g,_){const v=R_(d,g,_);return d.inclusive?v<=0:v<0}(s.startAt,sl(s),l)||s.endAt&&!function(d,g,_){const v=R_(d,g,_);return d.inclusive?v>=0:v>0}(s.endAt,sl(s),l))}(a,e)}function xb(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function e0(a){return(e,i)=>{let s=!1;for(const l of sl(a)){const h=Mb(l,e,i);if(h!==0)return h;s=s||l.field.isKeyField()}return 0}}function Mb(a,e,i){const s=a.field.isKeyField()?ft.comparator(e.key,i.key):function(h,d,g){const _=d.data.field(h),v=g.data.field(h);return _!==null&&v!==null?Ms(_,v):yt(42886)}(a.field,e,i);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return yt(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),s=this.inner[i];if(s!==void 0){for(const[l,h]of s)if(this.equalsFn(l,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,i]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],e))return void(l[h]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[i]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,(i,s)=>{for(const[l,h]of s)e(l,h)})}isEmpty(){return Pv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new me(ft.comparator);function Xi(){return Ub}const n0=new me(ft.comparator);function el(...a){let e=n0;for(const i of a)e=e.insert(i.key,i);return e}function i0(a){let e=n0;return a.forEach((i,s)=>e=e.insert(i,s.overlayedDocument)),e}function Ra(){return ol()}function r0(){return ol()}function ol(){return new Na(a=>a.toString(),(a,e)=>a.isEqual(e))}const Lb=new me(ft.comparator),Pb=new Pe(ft.comparator);function xt(...a){let e=Pb;for(const i of a)e=e.add(i);return e}const kb=new Pe(Dt);function zb(){return kb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function a0(a){return{integerValue:""+a}}function Bb(a,e){return db(e)?a0(e):Ld(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function jb(a,e,i){return a instanceof _l?function(l,h){const d={fields:{[Bv]:{stringValue:zv},[qv]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&Vd(h)&&(h=Cc(h)),h&&(d.fields[jv]=h),{mapValue:d}}(i,e):a instanceof vl?o0(a,e):a instanceof El?l0(a,e):function(l,h){const d=s0(l,h),g=D_(d)+D_(l.Ee);return ld(d)&&ld(l.Ee)?a0(g):Ld(l.serializer,g)}(a,e)}function qb(a,e,i){return a instanceof vl?o0(a,e):a instanceof El?l0(a,e):i}function s0(a,e){return a instanceof _c?function(s){return ld(s)||function(h){return!!h&&"doubleValue"in h}(s)}(e)?e:{integerValue:0}:null}class _l extends Nc{}class vl extends Nc{constructor(e){super(),this.elements=e}}function o0(a,e){const i=u0(e);for(const s of a.elements)i.some(l=>yi(l,s))||i.push(s);return{arrayValue:{values:i}}}class El extends Nc{constructor(e){super(),this.elements=e}}function l0(a,e){let i=u0(e);for(const s of a.elements)i=i.filter(l=>!yi(l,s));return{arrayValue:{values:i}}}class _c extends Nc{constructor(e,i){super(),this.serializer=e,this.Ee=i}}function D_(a){return Te(a.integerValue||a.doubleValue)}function u0(a){return xd(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,i){this.field=e,this.transform=i}}function Gb(a,e){return a.field.isEqual(e.field)&&function(s,l){return s instanceof vl&&l instanceof vl||s instanceof El&&l instanceof El?xs(s.elements,l.elements,yi):s instanceof _c&&l instanceof _c?yi(s.Ee,l.Ee):s instanceof _l&&l instanceof _l}(a.transform,e.transform)}class Fb{constructor(e,i){this.version=e,this.transformResults=i}}class Qn{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Oc{}function c0(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new Pd(a.key,Qn.none()):new bl(a.key,a.data,Qn.none());{const i=a.data,s=pn.empty();let l=new Pe(We.comparator);for(let h of e.fields)if(!l.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?s.delete(h):s.set(h,d),l=l.add(h)}return new jr(a.key,s,new Rn(l.toArray()),Qn.none())}}function Yb(a,e,i){a instanceof bl?function(l,h,d){const g=l.value.clone(),_=O_(l.fieldTransforms,h,d.transformResults);g.setAll(_),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(a,e,i):a instanceof jr?function(l,h,d){if(!sc(l.precondition,h))return void h.convertToUnknownDocument(d.version);const g=O_(l.fieldTransforms,h,d.transformResults),_=h.data;_.setAll(h0(l)),_.setAll(g),h.convertToFoundDocument(d.version,_).setHasCommittedMutations()}(a,e,i):function(l,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,i)}function ll(a,e,i,s){return a instanceof bl?function(h,d,g,_){if(!sc(h.precondition,d))return g;const v=h.value.clone(),A=V_(h.fieldTransforms,_,d);return v.setAll(A),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(a,e,i,s):a instanceof jr?function(h,d,g,_){if(!sc(h.precondition,d))return g;const v=V_(h.fieldTransforms,_,d),A=d.data;return A.setAll(h0(h)),A.setAll(v),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(D=>D.field))}(a,e,i,s):function(h,d,g){return sc(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(a,e,i)}function Qb(a,e){let i=null;for(const s of a.fieldTransforms){const l=e.data.field(s.field),h=s0(s.transform,l||null);h!=null&&(i===null&&(i=pn.empty()),i.set(s.field,h))}return i||null}function N_(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&xs(s,l,(h,d)=>Gb(h,d))}(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class bl extends Oc{constructor(e,i,s,l=[]){super(),this.key=e,this.value=i,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class jr extends Oc{constructor(e,i,s,l,h=[]){super(),this.key=e,this.data=i,this.fieldMask=s,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function h0(a){const e=new Map;return a.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const s=a.data.field(i);e.set(i,s)}}),e}function O_(a,e,i){const s=new Map;Qt(a.length===i.length,32656,{Ae:i.length,Re:a.length});for(let l=0;l<i.length;l++){const h=a[l],d=h.transform,g=e.data.field(h.field);s.set(h.field,qb(d,g,i[l]))}return s}function V_(a,e,i){const s=new Map;for(const l of a){const h=l.transform,d=i.data.field(l.field);s.set(l.field,jb(h,d,e))}return s}class Pd extends Oc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kb extends Oc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,i,s,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,i){const s=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(e.key)&&Yb(h,e,s[l])}}applyToLocalView(e,i){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(i=ll(s,e,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(i=ll(s,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const s=r0();return this.mutations.forEach(l=>{const h=e.get(l.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(l.key)?null:g;const _=c0(d,g);_!==null&&s.set(l.key,_),d.isValidDocument()||d.convertToNoDocument(Tt.min())}),s}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),xt())}isEqual(e){return this.batchId===e.batchId&&xs(this.mutations,e.mutations,(i,s)=>N_(i,s))&&xs(this.baseMutations,e.baseMutations,(i,s)=>N_(i,s))}}class kd{constructor(e,i,s,l){this.batch=e,this.commitVersion=i,this.mutationResults=s,this.docVersions=l}static from(e,i,s){Qt(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let l=function(){return Lb}();const h=e.mutations;for(let d=0;d<h.length;d++)l=l.insert(h[d].key,s[d].version);return new kd(e,i,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce,zt;function Jb(a){switch(a){case Q.OK:return yt(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return yt(15467,{code:a})}}function f0(a){if(a===void 0)return Ki("GRPC error has no .code"),Q.UNKNOWN;switch(a){case Ce.OK:return Q.OK;case Ce.CANCELLED:return Q.CANCELLED;case Ce.UNKNOWN:return Q.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return Q.INTERNAL;case Ce.UNAVAILABLE:return Q.UNAVAILABLE;case Ce.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ce.NOT_FOUND:return Q.NOT_FOUND;case Ce.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ce.ABORTED:return Q.ABORTED;case Ce.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ce.DATA_LOSS:return Q.DATA_LOSS;default:return yt(39323,{code:a})}}(zt=Ce||(Ce={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new Nr([4294967295,4294967295],0);function x_(a){const e=xv().encode(a),i=new Rv;return i.update(e),new Uint8Array(i.digest())}function M_(a){const e=new DataView(a.buffer),i=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Nr([i,s],0),new Nr([l,h],0)]}class zd{constructor(e,i,s){if(this.bitmap=e,this.padding=i,this.hashCount=s,i<0||i>=8)throw new nl(`Invalid padding: ${i}`);if(s<0)throw new nl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${s}`);if(e.length===0&&i!==0)throw new nl(`Invalid padding when bitmap length is 0: ${i}`);this.fe=8*e.length-i,this.ge=Nr.fromNumber(this.fe)}pe(e,i,s){let l=e.add(i.multiply(Nr.fromNumber(s)));return l.compare(Wb)===1&&(l=new Nr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const i=x_(e),[s,l]=M_(i);for(let h=0;h<this.hashCount;h++){const d=this.pe(s,l,h);if(!this.ye(d))return!1}return!0}static create(e,i,s){const l=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),d=new zd(h,l,i);return s.forEach(g=>d.insert(g)),d}insert(e){if(this.fe===0)return;const i=x_(e),[s,l]=M_(i);for(let h=0;h<this.hashCount;h++){const d=this.pe(s,l,h);this.we(d)}}we(e){const i=Math.floor(e/8),s=e%8;this.bitmap[i]|=1<<s}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,i,s,l,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,s){const l=new Map;return l.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,i,s)),new Vc(Tt.min(),l,new me(Dt),Xi(),xt())}}class Sl{constructor(e,i,s,l,h){this.resumeToken=e,this.current=i,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,s){return new Sl(s,i,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,i,s,l){this.Se=e,this.removedTargetIds=i,this.key=s,this.be=l}}class d0{constructor(e,i){this.targetId=e,this.De=i}}class m0{constructor(e,i,s=tn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=s,this.cause=l}}class U_{constructor(){this.ve=0,this.Ce=L_(),this.Fe=tn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=xt(),i=xt(),s=xt();return this.Ce.forEach((l,h)=>{switch(h){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:s=s.add(l);break;default:yt(38017,{changeType:h})}}),new Sl(this.Fe,this.Me,e,i,s)}ke(){this.xe=!1,this.Ce=L_()}qe(e,i){this.xe=!0,this.Ce=this.Ce.insert(e,i)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class tS{constructor(e){this.We=e,this.Ge=new Map,this.ze=Xi(),this.je=Wu(),this.Je=Wu(),this.He=new me(Dt)}Ye(e){for(const i of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(i,e.be):this.Xe(i,e.key,e.be);for(const i of e.removedTargetIds)this.Xe(i,e.key,e.be)}et(e){this.forEachTarget(e,i=>{const s=this.tt(i);switch(e.state){case 0:this.nt(i)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(i);break;case 3:this.nt(i)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(i)&&(this.rt(i),s.Be(e.resumeToken));break;default:yt(56790,{state:e.state})}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.Ge.forEach((s,l)=>{this.nt(l)&&i(l)})}it(e){const i=e.targetId,s=e.De.count,l=this.st(i);if(l){const h=l.target;if(cd(h))if(s===0){const d=new ft(h.path);this.Xe(i,d,sn.newNoDocument(d,Tt.min()))}else Qt(s===1,20013,{expectedCount:s});else{const d=this.ot(i);if(d!==s){const g=this._t(e),_=g?this.ut(g,e,d):1;if(_!==0){this.rt(i);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(i,v)}}}}}_t(e){const i=e.De.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=i;let d,g;try{d=Lr(s).toUint8Array()}catch(_){if(_ instanceof kv)return xr("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new zd(d,l,h)}catch(_){return xr(_ instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.fe===0?null:g}ut(e,i,s){return i.De.count===s-this.ht(e,i.targetId)?0:2}ht(e,i){const s=this.We.getRemoteKeysForTarget(i);let l=0;return s.forEach(h=>{const d=this.We.lt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;e.mightContain(g)||(this.Xe(i,h,null),l++)}),l}Pt(e){const i=new Map;this.Ge.forEach((h,d)=>{const g=this.st(d);if(g){if(h.current&&cd(g.target)){const _=new ft(g.target.path);this.Tt(_).has(d)||this.It(d,_)||this.Xe(d,_,sn.newNoDocument(_,e))}h.Ne&&(i.set(d,h.Le()),h.ke())}});let s=xt();this.Je.forEach((h,d)=>{let g=!0;d.forEachWhile(_=>{const v=this.st(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(h))}),this.ze.forEach((h,d)=>d.setReadTime(e));const l=new Vc(e,i,this.He,this.ze,s);return this.ze=Xi(),this.je=Wu(),this.Je=Wu(),this.He=new me(Dt),l}Ze(e,i){if(!this.nt(e))return;const s=this.It(e,i.key)?2:0;this.tt(e).qe(i.key,s),this.ze=this.ze.insert(i.key,i),this.je=this.je.insert(i.key,this.Tt(i.key).add(e)),this.Je=this.Je.insert(i.key,this.dt(i.key).add(e))}Xe(e,i,s){if(!this.nt(e))return;const l=this.tt(e);this.It(e,i)?l.qe(i,1):l.Qe(i),this.Je=this.Je.insert(i,this.dt(i).delete(e)),this.Je=this.Je.insert(i,this.dt(i).add(e)),s&&(this.ze=this.ze.insert(i,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const i=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let i=this.Ge.get(e);return i||(i=new U_,this.Ge.set(e,i)),i}dt(e){let i=this.Je.get(e);return i||(i=new Pe(Dt),this.Je=this.Je.insert(e,i)),i}Tt(e){let i=this.je.get(e);return i||(i=new Pe(Dt),this.je=this.je.insert(e,i)),i}nt(e){const i=this.st(e)!==null;return i||at("WatchChangeAggregator","Detected inactive target",e),i}st(e){const i=this.Ge.get(e);return i&&i.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new U_),this.We.getRemoteKeysForTarget(e).forEach(i=>{this.Xe(e,i,null)})}It(e,i){return this.We.getRemoteKeysForTarget(e).has(i)}}function Wu(){return new me(ft.comparator)}function L_(){return new me(ft.comparator)}const eS={asc:"ASCENDING",desc:"DESCENDING"},nS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iS={and:"AND",or:"OR"};class rS{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function dd(a,e){return a.useProto3Json||wc(e)?e:{value:e}}function vc(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g0(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function aS(a,e){return vc(a,e.toTimestamp())}function mi(a){return Qt(!!a,49232),Tt.fromTimestamp(function(i){const s=Ur(i);return new ue(s.seconds,s.nanos)}(a))}function Bd(a,e){return md(a,e).canonicalString()}function md(a,e){const i=function(l){return new se(["projects",l.projectId,"databases",l.database])}(a).child("documents");return e===void 0?i:i.child(e)}function p0(a){const e=se.fromString(a);return Qt(T0(e),10190,{key:e.toString()}),e}function gd(a,e){return Bd(a.databaseId,e.path)}function Kf(a,e){const i=p0(e);if(i.get(1)!==a.databaseId.projectId)throw new rt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+a.databaseId.projectId);if(i.get(3)!==a.databaseId.database)throw new rt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+a.databaseId.database);return new ft(_0(i))}function y0(a,e){return Bd(a.databaseId,e)}function sS(a){const e=p0(a);return e.length===4?se.emptyPath():_0(e)}function pd(a){return new se(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function _0(a){return Qt(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function P_(a,e,i){return{name:gd(a,e),fields:i.value.mapValue.fields}}function oS(a,e){let i;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:yt(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],h=function(v,A){return v.useProto3Json?(Qt(A===void 0||typeof A=="string",58123),tn.fromBase64String(A||"")):(Qt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),tn.fromUint8Array(A||new Uint8Array))}(a,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(v){const A=v.code===void 0?Q.UNKNOWN:f0(v.code);return new rt(A,v.message||"")}(d);i=new m0(s,l,h,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Kf(a,s.document.name),h=mi(s.document.updateTime),d=s.document.createTime?mi(s.document.createTime):Tt.min(),g=new pn({mapValue:{fields:s.document.fields}}),_=sn.newFoundDocument(l,h,d,g),v=s.targetIds||[],A=s.removedTargetIds||[];i=new oc(v,A,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Kf(a,s.document),h=s.readTime?mi(s.readTime):Tt.min(),d=sn.newNoDocument(l,h),g=s.removedTargetIds||[];i=new oc([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Kf(a,s.document),h=s.removedTargetIds||[];i=new oc([],h,l,null)}else{if(!("filter"in e))return yt(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:h}=s,d=new Zb(l,h),g=s.targetId;i=new d0(g,d)}}return i}function lS(a,e){let i;if(e instanceof bl)i={update:P_(a,e.key,e.value)};else if(e instanceof Pd)i={delete:gd(a,e.key)};else if(e instanceof jr)i={update:P_(a,e.key,e.data),updateMask:yS(e.fieldMask)};else{if(!(e instanceof Kb))return yt(16599,{Rt:e.type});i={verify:gd(a,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(s=>function(h,d){const g=d.transform;if(g instanceof _l)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof vl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof El)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof _c)return{fieldPath:d.field.canonicalString(),increment:g.Ee};throw yt(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(i.currentDocument=function(l,h){return h.updateTime!==void 0?{updateTime:aS(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:yt(27497)}(a,e.precondition)),i}function uS(a,e){return a&&a.length>0?(Qt(e!==void 0,14353),a.map(i=>function(l,h){let d=l.updateTime?mi(l.updateTime):mi(h);return d.isEqual(Tt.min())&&(d=mi(h)),new Fb(d,l.transformResults||[])}(i,e))):[]}function cS(a,e){return{documents:[y0(a,e.path)]}}function hS(a,e){const i={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=y0(a,l);const h=function(v){if(v.length!==0)return E0(Kn.create(v,"and"))}(e.filters);h&&(i.structuredQuery.where=h);const d=function(v){if(v.length!==0)return v.map(A=>function(S){return{field:Cs(S.field),direction:mS(S.dir)}}(A))}(e.orderBy);d&&(i.structuredQuery.orderBy=d);const g=dd(a,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{Vt:i,parent:l}}function fS(a){let e=sS(a.parent);const i=a.structuredQuery,s=i.from?i.from.length:0;let l=null;if(s>0){Qt(s===1,65062);const A=i.from[0];A.allDescendants?l=A.collectionId:e=e.child(A.collectionId)}let h=[];i.where&&(h=function(D){const S=v0(D);return S instanceof Kn&&Kv(S)?S.getFilters():[S]}(i.where));let d=[];i.orderBy&&(d=function(D){return D.map(S=>function(K){return new yl(Is(K.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction))}(S))}(i.orderBy));let g=null;i.limit&&(g=function(D){let S;return S=typeof D=="object"?D.value:D,wc(S)?null:S}(i.limit));let _=null;i.startAt&&(_=function(D){const S=!!D.before,B=D.values||[];return new yc(B,S)}(i.startAt));let v=null;return i.endAt&&(v=function(D){const S=!D.before,B=D.values||[];return new yc(B,S)}(i.endAt)),Ob(e,l,d,h,g,"F",_,v)}function dS(a,e){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:l})}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function v0(a){return a.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=Is(i.unaryFilter.field);return Ie.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Is(i.unaryFilter.field);return Ie.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Is(i.unaryFilter.field);return Ie.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Is(i.unaryFilter.field);return Ie.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}}(a):a.fieldFilter!==void 0?function(i){return Ie.create(Is(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(a):a.compositeFilter!==void 0?function(i){return Kn.create(i.compositeFilter.filters.map(s=>v0(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return yt(1026)}}(i.compositeFilter.op))}(a):yt(30097,{filter:a})}function mS(a){return eS[a]}function gS(a){return nS[a]}function pS(a){return iS[a]}function Cs(a){return{fieldPath:a.canonicalString()}}function Is(a){return We.fromServerFormat(a.fieldPath)}function E0(a){return a instanceof Ie?function(i){if(i.op==="=="){if(S_(i.value))return{unaryFilter:{field:Cs(i.field),op:"IS_NAN"}};if(b_(i.value))return{unaryFilter:{field:Cs(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(S_(i.value))return{unaryFilter:{field:Cs(i.field),op:"IS_NOT_NAN"}};if(b_(i.value))return{unaryFilter:{field:Cs(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(i.field),op:gS(i.op),value:i.value}}}(a):a instanceof Kn?function(i){const s=i.getFilters().map(l=>E0(l));return s.length===1?s[0]:{compositeFilter:{op:pS(i.op),filters:s}}}(a):yt(54877,{filter:a})}function yS(a){const e=[];return a.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function T0(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,i,s,l,h=Tt.min(),d=Tt.min(),g=tn.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=i,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.gt=e}}function vS(a){const e=fS({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?fd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.Dn=new TS}addToCollectionParentIndex(e,i){return this.Dn.add(i),$.resolve()}getCollectionParents(e,i){return $.resolve(this.Dn.getEntries(i))}addFieldIndex(e,i){return $.resolve()}deleteFieldIndex(e,i){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,i){return $.resolve()}getDocumentsMatchingTarget(e,i){return $.resolve(null)}getIndexType(e,i){return $.resolve(0)}getFieldIndexes(e,i){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,i){return $.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,i){return $.resolve(Mr.min())}updateCollectionGroup(e,i,s){return $.resolve()}updateIndexEntries(e,i){return $.resolve()}}class TS{constructor(){this.index={}}add(e){const i=e.lastSegment(),s=e.popLast(),l=this.index[i]||new Pe(se.comparator),h=!l.has(s);return this.index[i]=l.add(s),h}has(e){const i=e.lastSegment(),s=e.popLast(),l=this.index[i];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Pe(se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A0=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(A0,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ls(0)}static ur(){return new Ls(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="LruGarbageCollector",AS=1048576;function B_([a,e],[i,s]){const l=Dt(a,i);return l===0?Dt(e,s):l}class bS{constructor(e){this.Tr=e,this.buffer=new Pe(B_),this.Ir=0}dr(){return++this.Ir}Er(e){const i=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();B_(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class SS{constructor(e,i,s){this.garbageCollector=e,this.asyncQueue=i,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){at(z_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){qs(i)?at(z_,"Ignoring IndexedDB error during garbage collection: ",i):await js(i)}await this.Rr(3e5)})}}class RS{constructor(e,i){this.Vr=e,this.params=i}calculateTargetCount(e,i){return this.Vr.mr(e).next(s=>Math.floor(i/100*s))}nthSequenceNumber(e,i){if(i===0)return $.resolve(Rc.ue);const s=new bS(i);return this.Vr.forEachTarget(e,l=>s.Er(l.sequenceNumber)).next(()=>this.Vr.gr(e,l=>s.Er(l))).next(()=>s.maxValue)}removeTargets(e,i,s){return this.Vr.removeTargets(e,i,s)}removeOrphanedDocuments(e,i){return this.Vr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(k_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k_):this.pr(e,i))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,i){let s,l,h,d,g,_,v;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),l=this.params.maximumSequenceNumbersToCollect):l=D,d=Date.now(),this.nthSequenceNumber(e,l))).next(D=>(s=D,g=Date.now(),this.removeTargets(e,s,i))).next(D=>(h=D,_=Date.now(),this.removeOrphanedDocuments(e,s))).next(D=>(v=Date.now(),Rs()<=Bt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${h} targets in `+(_-g)+`ms
	Removed ${D} documents in `+(v-_)+`ms
Total Duration: ${v-A}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:D})))}}function wS(a,e){return new RS(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.changes=new Na(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?$.resolve(s):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,i,s,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,i){let s=null;return this.documentOverlayCache.getOverlay(e,i).next(l=>(s=l,this.remoteDocumentCache.getEntry(e,i))).next(l=>(s!==null&&ll(s.mutation,l,Rn.empty(),ue.now()),l))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(s=>this.getLocalViewOfDocuments(e,s,xt()).next(()=>s))}getLocalViewOfDocuments(e,i,s=xt()){const l=Ra();return this.populateOverlays(e,l,i).next(()=>this.computeViews(e,i,l,s).next(h=>{let d=el();return h.forEach((g,_)=>{d=d.insert(g,_.overlayedDocument)}),d}))}getOverlayedDocuments(e,i){const s=Ra();return this.populateOverlays(e,s,i).next(()=>this.computeViews(e,i,s,xt()))}populateOverlays(e,i,s){const l=[];return s.forEach(h=>{i.has(h)||l.push(h)}),this.documentOverlayCache.getOverlays(e,l).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(e,i,s,l){let h=Xi();const d=ol(),g=function(){return ol()}();return i.forEach((_,v)=>{const A=s.get(v.key);l.has(v.key)&&(A===void 0||A.mutation instanceof jr)?h=h.insert(v.key,v):A!==void 0?(d.set(v.key,A.mutation.getFieldMask()),ll(A.mutation,v,A.mutation.getFieldMask(),ue.now())):d.set(v.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,h).next(_=>(_.forEach((v,A)=>d.set(v,A)),i.forEach((v,A)=>{var D;return g.set(v,new IS(A,(D=d.get(v))!==null&&D!==void 0?D:null))}),g))}recalculateAndSaveOverlays(e,i){const s=ol();let l=new me((d,g)=>d-g),h=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(d=>{for(const g of d)g.keys().forEach(_=>{const v=i.get(_);if(v===null)return;let A=s.get(_)||Rn.empty();A=g.applyToLocalView(v,A),s.set(_,A);const D=(l.get(g.batchId)||xt()).add(_);l=l.insert(g.batchId,D)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),v=_.key,A=_.value,D=r0();A.forEach(S=>{if(!h.has(S)){const B=c0(i.get(S),s.get(S));B!==null&&D.set(S,B),h=h.add(S)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,D))}return $.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,i,s,l){return function(d){return ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):Wv(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,s,l):this.getDocumentsMatchingCollectionQuery(e,i,s,l)}getNextDocuments(e,i,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,s,l).next(h=>{const d=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,s.largestBatchId,l-h.size):$.resolve(Ra());let g=dl,_=h;return d.next(v=>$.forEach(v,(A,D)=>(g<D.largestBatchId&&(g=D.largestBatchId),h.get(A)?$.resolve():this.remoteDocumentCache.getEntry(e,A).next(S=>{_=_.insert(A,S)}))).next(()=>this.populateOverlays(e,v,h)).next(()=>this.computeViews(e,_,v,xt())).next(A=>({batchId:g,changes:i0(A)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new ft(i)).next(s=>{let l=el();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(e,i,s,l){const h=i.collectionGroup;let d=el();return this.indexManager.getCollectionParents(e,h).next(g=>$.forEach(g,_=>{const v=function(D,S){return new Hs(S,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt)}(i,_.child(h));return this.getDocumentsMatchingCollectionQuery(e,v,s,l).next(A=>{A.forEach((D,S)=>{d=d.insert(D,S)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,i,s,l){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,s.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,s,h,l))).next(d=>{h.forEach((_,v)=>{const A=v.getKey();d.get(A)===null&&(d=d.insert(A,sn.newInvalidDocument(A)))});let g=el();return d.forEach((_,v)=>{const A=h.get(_);A!==void 0&&ll(A.mutation,v,Rn.empty(),ue.now()),Dc(i,v)&&(g=g.insert(_,v))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,i){return $.resolve(this.Br.get(i))}saveBundleMetadata(e,i){return this.Br.set(i.id,function(l){return{id:l.id,version:l.version,createTime:mi(l.createTime)}}(i)),$.resolve()}getNamedQuery(e,i){return $.resolve(this.Lr.get(i))}saveNamedQuery(e,i){return this.Lr.set(i.name,function(l){return{name:l.name,query:vS(l.bundledQuery),readTime:mi(l.readTime)}}(i)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.overlays=new me(ft.comparator),this.kr=new Map}getOverlay(e,i){return $.resolve(this.overlays.get(i))}getOverlays(e,i){const s=Ra();return $.forEach(i,l=>this.getOverlay(e,l).next(h=>{h!==null&&s.set(l,h)})).next(()=>s)}saveOverlays(e,i,s){return s.forEach((l,h)=>{this.wt(e,i,h)}),$.resolve()}removeOverlaysForBatchId(e,i,s){const l=this.kr.get(s);return l!==void 0&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.kr.delete(s)),$.resolve()}getOverlaysForCollection(e,i,s){const l=Ra(),h=i.length+1,d=new ft(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,v=_.getKey();if(!i.isPrefixOf(v.path))break;v.path.length===h&&_.largestBatchId>s&&l.set(_.getKey(),_)}return $.resolve(l)}getOverlaysForCollectionGroup(e,i,s,l){let h=new me((v,A)=>v-A);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===i&&v.largestBatchId>s){let A=h.get(v.largestBatchId);A===null&&(A=Ra(),h=h.insert(v.largestBatchId,A)),A.set(v.getKey(),v)}}const g=Ra(),_=h.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((v,A)=>g.set(v,A)),!(g.size()>=l)););return $.resolve(g)}wt(e,i,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.kr.get(l.largestBatchId).delete(s.key);this.kr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new $b(i,s));let h=this.kr.get(i);h===void 0&&(h=xt(),this.kr.set(i,h)),this.kr.set(i,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this.qr=new Pe(Ge.Qr),this.$r=new Pe(Ge.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,i){const s=new Ge(e,i);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,i){e.forEach(s=>this.addReference(s,i))}removeReference(e,i){this.Wr(new Ge(e,i))}Gr(e,i){e.forEach(s=>this.removeReference(s,i))}zr(e){const i=new ft(new se([])),s=new Ge(i,e),l=new Ge(i,e+1),h=[];return this.$r.forEachInRange([s,l],d=>{this.Wr(d),h.push(d.key)}),h}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const i=new ft(new se([])),s=new Ge(i,e),l=new Ge(i,e+1);let h=xt();return this.$r.forEachInRange([s,l],d=>{h=h.add(d.key)}),h}containsKey(e){const i=new Ge(e,0),s=this.qr.firstAfterOrEqual(i);return s!==null&&e.isEqual(s.key)}}class Ge{constructor(e,i){this.key=e,this.Hr=i}static Qr(e,i){return ft.comparator(e.key,i.key)||Dt(e.Hr,i.Hr)}static Ur(e,i){return Dt(e.Hr,i.Hr)||ft.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.er=1,this.Yr=new Pe(Ge.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,s,l){const h=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Xb(h,i,s,l);this.mutationQueue.push(d);for(const g of l)this.Yr=this.Yr.add(new Ge(g.key,h)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return $.resolve(d)}lookupMutationBatch(e,i){return $.resolve(this.Zr(i))}getNextMutationBatchAfterBatchId(e,i){const s=i+1,l=this.Xr(s),h=l<0?0:l;return $.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Od:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const s=new Ge(i,0),l=new Ge(i,Number.POSITIVE_INFINITY),h=[];return this.Yr.forEachInRange([s,l],d=>{const g=this.Zr(d.Hr);h.push(g)}),$.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let s=new Pe(Dt);return i.forEach(l=>{const h=new Ge(l,0),d=new Ge(l,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([h,d],g=>{s=s.add(g.Hr)})}),$.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,i){const s=i.path,l=s.length+1;let h=s;ft.isDocumentKey(h)||(h=h.child(""));const d=new Ge(new ft(h),0);let g=new Pe(Dt);return this.Yr.forEachWhile(_=>{const v=_.key.path;return!!s.isPrefixOf(v)&&(v.length===l&&(g=g.add(_.Hr)),!0)},d),$.resolve(this.ei(g))}ei(e){const i=[];return e.forEach(s=>{const l=this.Zr(s);l!==null&&i.push(l)}),i}removeMutationBatch(e,i){Qt(this.ti(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return $.forEach(i.mutations,l=>{const h=new Ge(l.key,i.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,i){const s=new Ge(i,0),l=this.Yr.firstAfterOrEqual(s);return $.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,i){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const i=this.Xr(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.ni=e,this.docs=function(){return new me(ft.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const s=i.key,l=this.docs.get(s),h=l?l.size:0,d=this.ni(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const s=this.docs.get(i);return $.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(i))}getEntries(e,i){let s=Xi();return i.forEach(l=>{const h=this.docs.get(l);s=s.insert(l,h?h.document.mutableCopy():sn.newInvalidDocument(l))}),$.resolve(s)}getDocumentsMatchingQuery(e,i,s,l){let h=Xi();const d=i.path,g=new ft(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:v,value:{document:A}}=_.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||ub(lb(A),s)<=0||(l.has(A.key)||Dc(i,A))&&(h=h.insert(A.key,A.mutableCopy()))}return $.resolve(h)}getAllFromCollectionGroup(e,i,s,l){yt(9500)}ri(e,i){return $.forEach(this.docs,s=>i(s))}newChangeBuffer(e){return new US(this)}getSize(e){return $.resolve(this.size)}}class US extends CS{constructor(e){super(),this.Or=e}applyChanges(e){const i=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?i.push(this.Or.addEntry(e,l)):this.Or.removeEntry(s)}),$.waitFor(i)}getFromCache(e,i){return this.Or.getEntry(e,i)}getAllFromCache(e,i){return this.Or.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.persistence=e,this.ii=new Na(i=>Md(i),Ud),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.si=0,this.oi=new jd,this.targetCount=0,this._i=Ls.ar()}forEachTarget(e,i){return this.ii.forEach((s,l)=>i(l)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.si&&(this.si=i),$.resolve()}hr(e){this.ii.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this._i=new Ls(i),this.highestTargetId=i),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,i){return this.hr(i),this.targetCount+=1,$.resolve()}updateTargetData(e,i){return this.hr(i),$.resolve()}removeTargetData(e,i){return this.ii.delete(i.target),this.oi.zr(i.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,i,s){let l=0;const h=[];return this.ii.forEach((d,g)=>{g.sequenceNumber<=i&&s.get(g.targetId)===null&&(this.ii.delete(d),h.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)}),$.waitFor(h).next(()=>l)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,i){const s=this.ii.get(i)||null;return $.resolve(s)}addMatchingKeys(e,i,s){return this.oi.Kr(i,s),$.resolve()}removeMatchingKeys(e,i,s){this.oi.Gr(i,s);const l=this.persistence.referenceDelegate,h=[];return l&&i.forEach(d=>{h.push(l.markPotentiallyOrphaned(e,d))}),$.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this.oi.zr(i),$.resolve()}getMatchingKeysForTargetId(e,i){const s=this.oi.Jr(i);return $.resolve(s)}containsKey(e,i){return $.resolve(this.oi.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,i){this.ai={},this.overlays={},this.ui=new Rc(0),this.ci=!1,this.ci=!0,this.li=new VS,this.referenceDelegate=e(this),this.hi=new LS(this),this.indexManager=new ES,this.remoteDocumentCache=function(l){return new MS(l)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new _S(i),this.Ti=new NS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new OS,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let s=this.ai[e.toKey()];return s||(s=new xS(i,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,i,s){at("MemoryPersistence","Starting transaction:",e);const l=new PS(this.ui.next());return this.referenceDelegate.Ii(),s(l).next(h=>this.referenceDelegate.di(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ei(e,i){return $.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,i)))}}class PS extends hb{constructor(e){super(),this.currentSequenceNumber=e}}class qd{constructor(e){this.persistence=e,this.Ai=new jd,this.Ri=null}static Vi(e){return new qd(e)}get mi(){if(this.Ri)return this.Ri;throw yt(60996)}addReference(e,i,s){return this.Ai.addReference(s,i),this.mi.delete(s.toString()),$.resolve()}removeReference(e,i,s){return this.Ai.removeReference(s,i),this.mi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,i){return this.mi.add(i.toString()),$.resolve()}removeTarget(e,i){this.Ai.zr(i.targetId).forEach(l=>this.mi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,i.targetId).next(l=>{l.forEach(h=>this.mi.add(h.toString()))}).next(()=>s.removeTargetData(e,i))}Ii(){this.Ri=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,s=>{const l=ft.fromPath(s);return this.fi(e,l).next(h=>{h||i.removeEntry(l,Tt.min())})}).next(()=>(this.Ri=null,i.apply(e)))}updateLimboDocument(e,i){return this.fi(e,i).next(s=>{s?this.mi.delete(i.toString()):this.mi.add(i.toString())})}Pi(e){return 0}fi(e,i){return $.or([()=>$.resolve(this.Ai.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ei(e,i)])}}class Ec{constructor(e,i){this.persistence=e,this.gi=new Na(s=>mb(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=wS(this,i)}static Vi(e,i){return new Ec(e,i)}Ii(){}di(e){return $.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}mr(e){const i=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>i.next(l=>s+l))}yr(e){let i=0;return this.gr(e,s=>{i++}).next(()=>i)}gr(e,i){return $.forEach(this.gi,(s,l)=>this.Sr(e,s,l).next(h=>h?$.resolve():i(l)))}removeTargets(e,i,s){return this.persistence.getTargetCache().removeTargets(e,i,s)}removeOrphanedDocuments(e,i){let s=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ri(e,d=>this.Sr(e,d,i).next(g=>{g||(s++,h.removeEntry(d,Tt.min()))})).next(()=>h.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,i){return this.gi.set(i,e.currentSequenceNumber),$.resolve()}removeTarget(e,i){const s=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,i,s){return this.gi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,i,s){return this.gi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,i){return this.gi.set(i,e.currentSequenceNumber),$.resolve()}Pi(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=rc(e.data.value)),i}Sr(e,i,s){return $.or([()=>this.persistence.Ei(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.gi.get(i);return $.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,i,s,l){this.targetId=e,this.fromCache=i,this.Is=s,this.ds=l}static Es(e,i){let s=xt(),l=xt();for(const h of i.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new Hd(e,i.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return O1()?8:fb(D1())>0?6:4}()}initialize(e,i){this.gs=e,this.indexManager=i,this.As=!0}getDocumentsMatchingQuery(e,i,s,l){const h={result:null};return this.ps(e,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.ys(e,i,l,s).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new kS;return this.ws(e,i,d).next(g=>{if(h.result=g,this.Rs)return this.Ss(e,i,d,g.size)})}).next(()=>h.result)}Ss(e,i,s,l){return s.documentReadCount<this.Vs?(Rs()<=Bt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",ws(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(Rs()<=Bt.DEBUG&&at("QueryEngine","Query:",ws(i),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.fs*l?(Rs()<=Bt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",ws(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(i))):$.resolve())}ps(e,i){if(I_(i))return $.resolve(null);let s=di(i);return this.indexManager.getIndexType(e,s).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=fd(i,null,"F"),s=di(i)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const d=xt(...h);return this.gs.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,s).next(_=>{const v=this.bs(i,g);return this.Ds(i,v,d,_.readTime)?this.ps(e,fd(i,null,"F")):this.vs(e,v,i,_)}))})))}ys(e,i,s,l){return I_(i)||l.isEqual(Tt.min())?$.resolve(null):this.gs.getDocuments(e,s).next(h=>{const d=this.bs(i,h);return this.Ds(i,d,s,l)?$.resolve(null):(Rs()<=Bt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ws(i)),this.vs(e,d,i,ob(l,dl)).next(g=>g))})}bs(e,i){let s=new Pe(e0(e));return i.forEach((l,h)=>{Dc(e,h)&&(s=s.add(h))}),s}Ds(e,i,s,l){if(e.limit===null)return!1;if(s.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}ws(e,i,s){return Rs()<=Bt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",ws(i)),this.gs.getDocumentsMatchingQuery(e,i,Mr.min(),s)}vs(e,i,s,l){return this.gs.getDocumentsMatchingQuery(e,s,l).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="LocalStore",BS=3e8;class jS{constructor(e,i,s,l){this.persistence=e,this.Cs=i,this.serializer=l,this.Fs=new me(Dt),this.Ms=new Na(h=>Md(h),Ud),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Fs))}}function qS(a,e,i,s){return new jS(a,e,i,s)}async function S0(a,e){const i=At(a);return await i.persistence.runTransaction("Handle user change","readonly",s=>{let l;return i.mutationQueue.getAllMutationBatches(s).next(h=>(l=h,i.Ns(e),i.mutationQueue.getAllMutationBatches(s))).next(h=>{const d=[],g=[];let _=xt();for(const v of l){d.push(v.batchId);for(const A of v.mutations)_=_.add(A.key)}for(const v of h){g.push(v.batchId);for(const A of v.mutations)_=_.add(A.key)}return i.localDocuments.getDocuments(s,_).next(v=>({Bs:v,removedBatchIds:d,addedBatchIds:g}))})})}function HS(a,e){const i=At(a);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=e.batch.keys(),h=i.Os.newChangeBuffer({trackRemovals:!0});return function(g,_,v,A){const D=v.batch,S=D.keys();let B=$.resolve();return S.forEach(K=>{B=B.next(()=>A.getEntry(_,K)).next(tt=>{const W=v.docVersions.get(K);Qt(W!==null,48541),tt.version.compareTo(W)<0&&(D.applyToRemoteDocument(tt,v),tt.isValidDocument()&&(tt.setReadTime(v.commitVersion),A.addEntry(tt)))})}),B.next(()=>g.mutationQueue.removeMutationBatch(_,D))}(i,s,e,h).next(()=>h.apply(s)).next(()=>i.mutationQueue.performConsistencyCheck(s)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let _=xt();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(_=_.add(g.batch.mutations[v].key));return _}(e))).next(()=>i.localDocuments.getDocuments(s,l))})}function R0(a){const e=At(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.hi.getLastRemoteSnapshotVersion(i))}function GS(a,e){const i=At(a),s=e.snapshotVersion;let l=i.Fs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Os.newChangeBuffer({trackRemovals:!0});l=i.Fs;const g=[];e.targetChanges.forEach((A,D)=>{const S=l.get(D);if(!S)return;g.push(i.hi.removeMatchingKeys(h,A.removedDocuments,D).next(()=>i.hi.addMatchingKeys(h,A.addedDocuments,D)));let B=S.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(D)!==null?B=B.withResumeToken(tn.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):A.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(A.resumeToken,s)),l=l.insert(D,B),function(tt,W,wt){return tt.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-tt.snapshotVersion.toMicroseconds()>=BS?!0:wt.addedDocuments.size+wt.modifiedDocuments.size+wt.removedDocuments.size>0}(S,B,A)&&g.push(i.hi.updateTargetData(h,B))});let _=Xi(),v=xt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,A))}),g.push(FS(h,d,e.documentUpdates).next(A=>{_=A.Ls,v=A.ks})),!s.isEqual(Tt.min())){const A=i.hi.getLastRemoteSnapshotVersion(h).next(D=>i.hi.setTargetsMetadata(h,h.currentSequenceNumber,s));g.push(A)}return $.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,_,v)).next(()=>_)}).then(h=>(i.Fs=l,h))}function FS(a,e,i){let s=xt(),l=xt();return i.forEach(h=>s=s.add(h)),e.getEntries(a,s).next(h=>{let d=Xi();return i.forEach((g,_)=>{const v=h.get(g);_.isFoundDocument()!==v.isFoundDocument()&&(l=l.add(g)),_.isNoDocument()&&_.version.isEqual(Tt.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):at(Gd,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",_.version)}),{Ls:d,ks:l}})}function YS(a,e){const i=At(a);return i.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Od),i.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function QS(a,e){const i=At(a);return i.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return i.hi.getTargetData(s,e).next(h=>h?(l=h,$.resolve(l)):i.hi.allocateTargetId(s).next(d=>(l=new wr(e,d,"TargetPurposeListen",s.currentSequenceNumber),i.hi.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=i.Fs.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Fs=i.Fs.insert(s.targetId,s),i.Ms.set(e,s.targetId)),s})}async function yd(a,e,i){const s=At(a),l=s.Fs.get(e),h=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",h,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!qs(d))throw d;at(Gd,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(l.target)}function j_(a,e,i){const s=At(a);let l=Tt.min(),h=xt();return s.persistence.runTransaction("Execute query","readwrite",d=>function(_,v,A){const D=At(_),S=D.Ms.get(A);return S!==void 0?$.resolve(D.Fs.get(S)):D.hi.getTargetData(v,A)}(s,d,di(e)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(d,g.targetId).next(_=>{h=_})}).next(()=>s.Cs.getDocumentsMatchingQuery(d,e,i?l:Tt.min(),i?h:xt())).next(g=>(KS(s,xb(e),g),{documents:g,qs:h})))}function KS(a,e,i){let s=a.xs.get(e)||Tt.min();i.forEach((l,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),a.xs.set(e,s)}class q_{constructor(){this.activeTargetIds=zb()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XS{constructor(){this.Fo=new q_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,s){}addLocalQueryTarget(e,i=!0){return i&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,i,s){this.Mo[e]=i}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new q_,Promise.resolve()}handleUserChange(e,i,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="ConnectivityMonitor";class G_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){at(H_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){at(H_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc=null;function _d(){return tc===null?tc=function(){return 268435456+Math.round(2147483648*Math.random())}():tc++,"0x"+tc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="RestConnection",ZS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JS{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.$o=i+"://"+e.host,this.Uo=`projects/${s}/databases/${l}`,this.Ko=this.databaseId.database===gc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Wo(e,i,s,l,h){const d=_d(),g=this.Go(e,i.toUriEncodedString());at(Xf,`Sending RPC '${e}' ${d}:`,g,s);const _={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(_,l,h);const{host:v}=new URL(g),A=Cd(v);return this.jo(e,g,_,s,A).then(D=>(at(Xf,`Received RPC '${e}' ${d}: `,D),D),D=>{throw xr(Xf,`RPC '${e}' ${d} failed with error: `,D,"url: ",g,"request:",s),D})}Jo(e,i,s,l,h,d){return this.Wo(e,i,s,l,h)}zo(e,i,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>e[h]=l),s&&s.headers.forEach((l,h)=>e[h]=l)}Go(e,i){const s=ZS[e];return`${this.$o}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class tR extends JS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,i,s,l,h){const d=_d();return new Promise((g,_)=>{const v=new wv;v.setWithCredentials(!0),v.listenOnce(Cv.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case ic.NO_ERROR:const D=v.getResponseJson();at(rn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(D)),g(D);break;case ic.TIMEOUT:at(rn,`RPC '${e}' ${d} timed out`),_(new rt(Q.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:const S=v.getStatus();if(at(rn,`RPC '${e}' ${d} failed with status:`,S,"response text:",v.getResponseText()),S>0){let B=v.getResponseJson();Array.isArray(B)&&(B=B[0]);const K=B?.error;if(K&&K.status&&K.message){const tt=function(wt){const mt=wt.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(mt)>=0?mt:Q.UNKNOWN}(K.status);_(new rt(tt,K.message))}else _(new rt(Q.UNKNOWN,"Server responded with status "+v.getStatus()))}else _(new rt(Q.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{at(rn,`RPC '${e}' ${d} completed.`)}});const A=JSON.stringify(l);at(rn,`RPC '${e}' ${d} sending request:`,l),v.send(i,"POST",A,s,15)})}P_(e,i,s){const l=_d(),h=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Nv(),g=Dv(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.zo(_.initMessageHeaders,i,s),_.encodeInitMessageHeaders=!0;const A=h.join("");at(rn,`Creating RPC '${e}' stream ${l}: ${A}`,_);const D=d.createWebChannel(A,_);this.T_(D);let S=!1,B=!1;const K=new WS({Ho:W=>{B?at(rn,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(S||(at(rn,`Opening RPC '${e}' stream ${l} transport.`),D.open(),S=!0),at(rn,`RPC '${e}' stream ${l} sending:`,W),D.send(W))},Yo:()=>D.close()}),tt=(W,wt,mt)=>{W.listen(wt,dt=>{try{mt(dt)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return tt(D,tl.EventType.OPEN,()=>{B||(at(rn,`RPC '${e}' stream ${l} transport opened.`),K.s_())}),tt(D,tl.EventType.CLOSE,()=>{B||(B=!0,at(rn,`RPC '${e}' stream ${l} transport closed`),K.__(),this.I_(D))}),tt(D,tl.EventType.ERROR,W=>{B||(B=!0,xr(rn,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),K.__(new rt(Q.UNAVAILABLE,"The operation could not be completed")))}),tt(D,tl.EventType.MESSAGE,W=>{var wt;if(!B){const mt=W.data[0];Qt(!!mt,16349);const dt=mt,Mt=dt?.error||((wt=dt[0])===null||wt===void 0?void 0:wt.error);if(Mt){at(rn,`RPC '${e}' stream ${l} received error:`,Mt);const _t=Mt.status;let Ut=function(C){const O=Ce[C];if(O!==void 0)return f0(O)}(_t),V=Mt.message;Ut===void 0&&(Ut=Q.INTERNAL,V="Unknown error status: "+_t+" with message "+Mt.message),B=!0,K.__(new rt(Ut,V)),D.close()}else at(rn,`RPC '${e}' stream ${l} received:`,mt),K.a_(mt)}}),tt(g,Iv.STAT_EVENT,W=>{W.stat===ad.PROXY?at(rn,`RPC '${e}' stream ${l} detected buffering proxy`):W.stat===ad.NOPROXY&&at(rn,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{K.o_()},0),K}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(i=>i===e)}}function $f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(a){return new rS(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,i,s=1e3,l=1.5,h=6e4){this.Fi=e,this.timerId=i,this.d_=s,this.E_=l,this.A_=h,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const i=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),l=Math.max(0,i-s);l>0&&at("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.R_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,l,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="PersistentStream";class C0{constructor(e,i,s,l,h,d,g,_){this.Fi=e,this.w_=s,this.S_=l,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new w0(e,i)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():i&&i.code===Q.RESOURCE_EXHAUSTED?(Ki(i.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):i&&i.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(i)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),i=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.b_===i&&this.W_(s,l)},s=>{e(()=>{const l=new rt(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(l)})})}W_(e,i){const s=this.K_(this.b_);this.stream=this.z_(e,i),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(l=>{s(()=>this.G_(l))}),this.stream.onMessage(l=>{s(()=>++this.C_==1?this.j_(l):this.onNext(l))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return at(F_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return i=>{this.Fi.enqueueAndForget(()=>this.b_===e?i():(at(F_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eR extends C0{constructor(e,i,s,l,h,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,l,d),this.serializer=h}z_(e,i){return this.connection.P_("Listen",e,i)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const i=oS(this.serializer,e),s=function(h){if(!("targetChange"in h))return Tt.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?Tt.min():d.readTime?mi(d.readTime):Tt.min()}(e);return this.listener.J_(i,s)}H_(e){const i={};i.database=pd(this.serializer),i.addTarget=function(h,d){let g;const _=d.target;if(g=cd(_)?{documents:cS(h,_)}:{query:hS(h,_).Vt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=g0(h,d.resumeToken);const v=dd(h,d.expectedCount);v!==null&&(g.expectedCount=v)}else if(d.snapshotVersion.compareTo(Tt.min())>0){g.readTime=vc(h,d.snapshotVersion.toTimestamp());const v=dd(h,d.expectedCount);v!==null&&(g.expectedCount=v)}return g}(this.serializer,e);const s=dS(this.serializer,e);s&&(i.labels=s),this.k_(i)}Y_(e){const i={};i.database=pd(this.serializer),i.removeTarget=e,this.k_(i)}}class nR extends C0{constructor(e,i,s,l,h,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,l,d),this.serializer=h}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,i){return this.connection.P_("Write",e,i)}j_(e){return Qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const i=uS(e.writeResults,e.commitTime),s=mi(e.commitTime);return this.listener.ta(s,i)}na(){const e={};e.database=pd(this.serializer),this.k_(e)}X_(e){const i={streamToken:this.lastStreamToken,writes:e.map(s=>lS(this.serializer,s))};this.k_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{}class rR extends iR{constructor(e,i,s,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=s,this.serializer=l,this.ra=!1}ia(){if(this.ra)throw new rt(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,i,s,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Wo(e,md(i,s),l,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new rt(Q.UNKNOWN,h.toString())})}Jo(e,i,s,l,h){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Jo(e,md(i,s),l,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new rt(Q.UNKNOWN,d.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class aR{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ki(i),this._a=!1):at("OnlineStateTracker",i)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class sR{constructor(e,i,s,l,h){this.localStore=e,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=h,this.Ea.xo(d=>{s.enqueueAndForget(async()=>{Oa(this)&&(at(Da,"Restarting streams for network reachability change."),await async function(_){const v=At(_);v.Ia.add(4),await Rl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Mc(v)}(this))})}),this.Aa=new aR(s,l)}}async function Mc(a){if(Oa(a))for(const e of a.da)await e(!0)}async function Rl(a){for(const e of a.da)await e(!1)}function I0(a,e){const i=At(a);i.Ta.has(e.targetId)||(i.Ta.set(e.targetId,e),Kd(i)?Qd(i):Gs(i).x_()&&Yd(i,e))}function Fd(a,e){const i=At(a),s=Gs(i);i.Ta.delete(e),s.x_()&&D0(i,e),i.Ta.size===0&&(s.x_()?s.B_():Oa(i)&&i.Aa.set("Unknown"))}function Yd(a,e){if(a.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const i=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Gs(a).H_(e)}function D0(a,e){a.Ra.$e(e),Gs(a).Y_(e)}function Qd(a){a.Ra=new tS({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>a.Ta.get(e)||null,lt:()=>a.datastore.serializer.databaseId}),Gs(a).start(),a.Aa.aa()}function Kd(a){return Oa(a)&&!Gs(a).M_()&&a.Ta.size>0}function Oa(a){return At(a).Ia.size===0}function N0(a){a.Ra=void 0}async function oR(a){a.Aa.set("Online")}async function lR(a){a.Ta.forEach((e,i)=>{Yd(a,e)})}async function uR(a,e){N0(a),Kd(a)?(a.Aa.la(e),Qd(a)):a.Aa.set("Unknown")}async function cR(a,e,i){if(a.Aa.set("Online"),e instanceof m0&&e.state===2&&e.cause)try{await async function(l,h){const d=h.cause;for(const g of h.targetIds)l.Ta.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ta.delete(g),l.Ra.removeTarget(g))}(a,e)}catch(s){at(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Tc(a,s)}else if(e instanceof oc?a.Ra.Ye(e):e instanceof d0?a.Ra.it(e):a.Ra.et(e),!i.isEqual(Tt.min()))try{const s=await R0(a.localStore);i.compareTo(s)>=0&&await function(h,d){const g=h.Ra.Pt(d);return g.targetChanges.forEach((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const A=h.Ta.get(v);A&&h.Ta.set(v,A.withResumeToken(_.resumeToken,d))}}),g.targetMismatches.forEach((_,v)=>{const A=h.Ta.get(_);if(!A)return;h.Ta.set(_,A.withResumeToken(tn.EMPTY_BYTE_STRING,A.snapshotVersion)),D0(h,_);const D=new wr(A.target,_,v,A.sequenceNumber);Yd(h,D)}),h.remoteSyncer.applyRemoteEvent(g)}(a,i)}catch(s){at(Da,"Failed to raise snapshot:",s),await Tc(a,s)}}async function Tc(a,e,i){if(!qs(e))throw e;a.Ia.add(1),await Rl(a),a.Aa.set("Offline"),i||(i=()=>R0(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{at(Da,"Retrying IndexedDB access"),await i(),a.Ia.delete(1),await Mc(a)})}function O0(a,e){return e().catch(i=>Tc(a,i,e))}async function Uc(a){const e=At(a),i=kr(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Od;for(;hR(e);)try{const l=await YS(e.localStore,s);if(l===null){e.Pa.length===0&&i.B_();break}s=l.batchId,fR(e,l)}catch(l){await Tc(e,l)}V0(e)&&x0(e)}function hR(a){return Oa(a)&&a.Pa.length<10}function fR(a,e){a.Pa.push(e);const i=kr(a);i.x_()&&i.Z_&&i.X_(e.mutations)}function V0(a){return Oa(a)&&!kr(a).M_()&&a.Pa.length>0}function x0(a){kr(a).start()}async function dR(a){kr(a).na()}async function mR(a){const e=kr(a);for(const i of a.Pa)e.X_(i.mutations)}async function gR(a,e,i){const s=a.Pa.shift(),l=kd.from(s,e,i);await O0(a,()=>a.remoteSyncer.applySuccessfulWrite(l)),await Uc(a)}async function pR(a,e){e&&kr(a).Z_&&await async function(s,l){if(function(d){return Jb(d)&&d!==Q.ABORTED}(l.code)){const h=s.Pa.shift();kr(s).N_(),await O0(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,l)),await Uc(s)}}(a,e),V0(a)&&x0(a)}async function Y_(a,e){const i=At(a);i.asyncQueue.verifyOperationInProgress(),at(Da,"RemoteStore received new credentials");const s=Oa(i);i.Ia.add(3),await Rl(i),s&&i.Aa.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ia.delete(3),await Mc(i)}async function yR(a,e){const i=At(a);e?(i.Ia.delete(2),await Mc(i)):e||(i.Ia.add(2),await Rl(i),i.Aa.set("Unknown"))}function Gs(a){return a.Va||(a.Va=function(i,s,l){const h=At(i);return h.ia(),new eR(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(a.datastore,a.asyncQueue,{Zo:oR.bind(null,a),e_:lR.bind(null,a),n_:uR.bind(null,a),J_:cR.bind(null,a)}),a.da.push(async e=>{e?(a.Va.N_(),Kd(a)?Qd(a):a.Aa.set("Unknown")):(await a.Va.stop(),N0(a))})),a.Va}function kr(a){return a.ma||(a.ma=function(i,s,l){const h=At(i);return h.ia(),new nR(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(a.datastore,a.asyncQueue,{Zo:()=>Promise.resolve(),e_:dR.bind(null,a),n_:pR.bind(null,a),ea:mR.bind(null,a),ta:gR.bind(null,a)}),a.da.push(async e=>{e?(a.ma.N_(),await Uc(a)):(await a.ma.stop(),a.Pa.length>0&&(at(Da,`Stopping write stream with ${a.Pa.length} pending writes`),a.Pa=[]))})),a.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,i,s,l,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=s,this.op=l,this.removalCallback=h,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,s,l,h){const d=Date.now()+s,g=new Xd(e,i,d,l,h);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $d(a,e){if(Ki("AsyncQueue",`${e}: ${a}`),qs(a))return new rt(Q.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{static emptySet(e){return new Ns(e.comparator)}constructor(e){this.comparator=e?(i,s)=>e(i,s)||ft.comparator(i.key,s.key):(i,s)=>ft.comparator(i.key,s.key),this.keyedMap=el(),this.sortedSet=new me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,s)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=s.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const s=new Ns;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.fa=new me(ft.comparator)}track(e){const i=e.doc.key,s=this.fa.get(i);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(i,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(i,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(i,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(i,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(i):e.type===1&&s.type===2?this.fa=this.fa.insert(i,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(i,{type:2,doc:e.doc}):yt(63341,{At:e,ga:s}):this.fa=this.fa.insert(i,e)}pa(){const e=[];return this.fa.inorderTraversal((i,s)=>{e.push(s)}),e}}class Ps{constructor(e,i,s,l,h,d,g,_,v){this.query=e,this.docs=i,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(e,i,s,l,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new Ps(e,i,Ns.emptySet(i),d,s,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,s=e.docChanges;if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==s[l].type||!i[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class vR{constructor(){this.queries=K_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(i,s){const l=At(i),h=l.queries;l.queries=K_(),h.forEach((d,g)=>{for(const _ of g.wa)_.onError(s)})})(this,new rt(Q.ABORTED,"Firestore shutting down"))}}function K_(){return new Na(a=>t0(a),Ic)}async function ER(a,e){const i=At(a);let s=3;const l=e.query;let h=i.queries.get(l);h?!h.Sa()&&e.ba()&&(s=2):(h=new _R,s=e.ba()?0:1);try{switch(s){case 0:h.ya=await i.onListen(l,!0);break;case 1:h.ya=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=$d(d,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(g)}i.queries.set(l,h),h.wa.push(e),e.va(i.onlineState),h.ya&&e.Ca(h.ya)&&Zd(i)}async function TR(a,e){const i=At(a),s=e.query;let l=3;const h=i.queries.get(s);if(h){const d=h.wa.indexOf(e);d>=0&&(h.wa.splice(d,1),h.wa.length===0?l=e.ba()?0:1:!h.Sa()&&e.ba()&&(l=2))}switch(l){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function AR(a,e){const i=At(a);let s=!1;for(const l of e){const h=l.query,d=i.queries.get(h);if(d){for(const g of d.wa)g.Ca(l)&&(s=!0);d.ya=l}}s&&Zd(i)}function bR(a,e,i){const s=At(a),l=s.queries.get(e);if(l)for(const h of l.wa)h.onError(i);s.queries.delete(e)}function Zd(a){a.Da.forEach(e=>{e.next()})}var vd,X_;(X_=vd||(vd={})).Fa="default",X_.Cache="cache";class SR{constructor(e,i,s){this.query=e,this.Ma=i,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new Ps(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),i=!0):this.Ba(e,this.onlineState)&&(this.La(e),i=!0),this.Oa=e,i}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let i=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),i=!0),i}Ba(e,i){if(!e.fromCache||!this.ba())return!0;const s=i!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const i=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}La(e){e=Ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==vd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.key=e}}class U0{constructor(e){this.key=e}}class RR{constructor(e,i){this.query=e,this.Ha=i,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=xt(),this.mutatedKeys=xt(),this.Xa=e0(e),this.eu=new Ns(this.Xa)}get tu(){return this.Ha}nu(e,i){const s=i?i.ru:new Q_,l=i?i.eu:this.eu;let h=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,v=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((A,D)=>{const S=l.get(A),B=Dc(this.query,D)?D:null,K=!!S&&this.mutatedKeys.has(S.key),tt=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let W=!1;S&&B?S.data.isEqual(B.data)?K!==tt&&(s.track({type:3,doc:B}),W=!0):this.iu(S,B)||(s.track({type:2,doc:B}),W=!0,(_&&this.Xa(B,_)>0||v&&this.Xa(B,v)<0)&&(g=!0)):!S&&B?(s.track({type:0,doc:B}),W=!0):S&&!B&&(s.track({type:1,doc:S}),W=!0,(_||v)&&(g=!0)),W&&(B?(d=d.add(B),h=tt?h.add(A):h.delete(A)):(d=d.delete(A),h=h.delete(A)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),h=h.delete(A.key),s.track({type:1,doc:A})}return{eu:d,ru:s,Ds:g,mutatedKeys:h}}iu(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,s,l){const h=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort((A,D)=>function(B,K){const tt=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{At:W})}};return tt(B)-tt(K)}(A.type,D.type)||this.Xa(A.doc,D.doc)),this.su(s),l=l!=null&&l;const g=i&&!l?this.ou():[],_=this.Za.size===0&&this.current&&!l?1:0,v=_!==this.Ya;return this.Ya=_,d.length!==0||v?{snapshot:new Ps(this.query,e.eu,h,d,e.mutatedKeys,_===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Q_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=xt(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const i=[];return e.forEach(s=>{this.Za.has(s)||i.push(new U0(s))}),this.Za.forEach(s=>{e.has(s)||i.push(new M0(s))}),i}uu(e){this.Ha=e.qs,this.Za=xt();const i=this.nu(e.documents);return this.applyChanges(i,!0)}cu(){return Ps.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Jd="SyncEngine";class wR{constructor(e,i,s){this.query=e,this.targetId=i,this.view=s}}class CR{constructor(e){this.key=e,this.lu=!1}}class IR{constructor(e,i,s,l,h,d){this.localStore=e,this.remoteStore=i,this.eventManager=s,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Na(g=>t0(g),Ic),this.Tu=new Map,this.Iu=new Set,this.du=new me(ft.comparator),this.Eu=new Map,this.Au=new jd,this.Ru={},this.Vu=new Map,this.mu=Ls.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function DR(a,e,i=!0){const s=j0(a);let l;const h=s.Pu.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.cu()):l=await L0(s,e,i,!0),l}async function NR(a,e){const i=j0(a);await L0(i,e,!0,!1)}async function L0(a,e,i,s){const l=await QS(a.localStore,di(e)),h=l.targetId,d=a.sharedClientState.addLocalQueryTarget(h,i);let g;return s&&(g=await OR(a,e,h,d==="current",l.resumeToken)),a.isPrimaryClient&&i&&I0(a.remoteStore,l),g}async function OR(a,e,i,s,l){a.gu=(D,S,B)=>async function(tt,W,wt,mt){let dt=W.view.nu(wt);dt.Ds&&(dt=await j_(tt.localStore,W.query,!1).then(({documents:V})=>W.view.nu(V,dt)));const Mt=mt&&mt.targetChanges.get(W.targetId),_t=mt&&mt.targetMismatches.get(W.targetId)!=null,Ut=W.view.applyChanges(dt,tt.isPrimaryClient,Mt,_t);return Z_(tt,W.targetId,Ut._u),Ut.snapshot}(a,D,S,B);const h=await j_(a.localStore,e,!0),d=new RR(e,h.qs),g=d.nu(h.documents),_=Sl.createSynthesizedTargetChangeForCurrentChange(i,s&&a.onlineState!=="Offline",l),v=d.applyChanges(g,a.isPrimaryClient,_);Z_(a,i,v._u);const A=new wR(e,i,d);return a.Pu.set(e,A),a.Tu.has(i)?a.Tu.get(i).push(e):a.Tu.set(i,[e]),v.snapshot}async function VR(a,e,i){const s=At(a),l=s.Pu.get(e),h=s.Tu.get(l.targetId);if(h.length>1)return s.Tu.set(l.targetId,h.filter(d=>!Ic(d,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await yd(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),i&&Fd(s.remoteStore,l.targetId),Ed(s,l.targetId)}).catch(js)):(Ed(s,l.targetId),await yd(s.localStore,l.targetId,!0))}async function xR(a,e){const i=At(a),s=i.Pu.get(e),l=i.Tu.get(s.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),Fd(i.remoteStore,s.targetId))}async function MR(a,e,i){const s=jR(a);try{const l=await function(d,g){const _=At(d),v=ue.now(),A=g.reduce((B,K)=>B.add(K.key),xt());let D,S;return _.persistence.runTransaction("Locally write mutations","readwrite",B=>{let K=Xi(),tt=xt();return _.Os.getEntries(B,A).next(W=>{K=W,K.forEach((wt,mt)=>{mt.isValidDocument()||(tt=tt.add(wt))})}).next(()=>_.localDocuments.getOverlayedDocuments(B,K)).next(W=>{D=W;const wt=[];for(const mt of g){const dt=Qb(mt,D.get(mt.key).overlayedDocument);dt!=null&&wt.push(new jr(mt.key,dt,Fv(dt.value.mapValue),Qn.exists(!0)))}return _.mutationQueue.addMutationBatch(B,v,wt,g)}).next(W=>{S=W;const wt=W.applyToLocalDocumentSet(D,tt);return _.documentOverlayCache.saveOverlays(B,W.batchId,wt)})}).then(()=>({batchId:S.batchId,changes:i0(D)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),function(d,g,_){let v=d.Ru[d.currentUser.toKey()];v||(v=new me(Dt)),v=v.insert(g,_),d.Ru[d.currentUser.toKey()]=v}(s,l.batchId,i),await wl(s,l.changes),await Uc(s.remoteStore)}catch(l){const h=$d(l,"Failed to persist write");i.reject(h)}}async function P0(a,e){const i=At(a);try{const s=await GS(i.localStore,e);e.targetChanges.forEach((l,h)=>{const d=i.Eu.get(h);d&&(Qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.lu=!0:l.modifiedDocuments.size>0?Qt(d.lu,14607):l.removedDocuments.size>0&&(Qt(d.lu,42227),d.lu=!1))}),await wl(i,s,e)}catch(s){await js(s)}}function $_(a,e,i){const s=At(a);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const l=[];s.Pu.forEach((h,d)=>{const g=d.view.va(e);g.snapshot&&l.push(g.snapshot)}),function(d,g){const _=At(d);_.onlineState=g;let v=!1;_.queries.forEach((A,D)=>{for(const S of D.wa)S.va(g)&&(v=!0)}),v&&Zd(_)}(s.eventManager,e),l.length&&s.hu.J_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function UR(a,e,i){const s=At(a);s.sharedClientState.updateQueryState(e,"rejected",i);const l=s.Eu.get(e),h=l&&l.key;if(h){let d=new me(ft.comparator);d=d.insert(h,sn.newNoDocument(h,Tt.min()));const g=xt().add(h),_=new Vc(Tt.min(),new Map,new me(Dt),d,g);await P0(s,_),s.du=s.du.remove(h),s.Eu.delete(e),Wd(s)}else await yd(s.localStore,e,!1).then(()=>Ed(s,e,i)).catch(js)}async function LR(a,e){const i=At(a),s=e.batch.batchId;try{const l=await HS(i.localStore,e);z0(i,s,null),k0(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await wl(i,l)}catch(l){await js(l)}}async function PR(a,e,i){const s=At(a);try{const l=await function(d,g){const _=At(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let A;return _.mutationQueue.lookupMutationBatch(v,g).next(D=>(Qt(D!==null,37113),A=D.keys(),_.mutationQueue.removeMutationBatch(v,D))).next(()=>_.mutationQueue.performConsistencyCheck(v)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(v,A,g)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,A)).next(()=>_.localDocuments.getDocuments(v,A))})}(s.localStore,e);z0(s,e,i),k0(s,e),s.sharedClientState.updateMutationState(e,"rejected",i),await wl(s,l)}catch(l){await js(l)}}function k0(a,e){(a.Vu.get(e)||[]).forEach(i=>{i.resolve()}),a.Vu.delete(e)}function z0(a,e,i){const s=At(a);let l=s.Ru[s.currentUser.toKey()];if(l){const h=l.get(e);h&&(i?h.reject(i):h.resolve(),l=l.remove(e)),s.Ru[s.currentUser.toKey()]=l}}function Ed(a,e,i=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Tu.get(e))a.Pu.delete(s),i&&a.hu.pu(s,i);a.Tu.delete(e),a.isPrimaryClient&&a.Au.zr(e).forEach(s=>{a.Au.containsKey(s)||B0(a,s)})}function B0(a,e){a.Iu.delete(e.path.canonicalString());const i=a.du.get(e);i!==null&&(Fd(a.remoteStore,i),a.du=a.du.remove(e),a.Eu.delete(i),Wd(a))}function Z_(a,e,i){for(const s of i)s instanceof M0?(a.Au.addReference(s.key,e),kR(a,s)):s instanceof U0?(at(Jd,"Document no longer in limbo: "+s.key),a.Au.removeReference(s.key,e),a.Au.containsKey(s.key)||B0(a,s.key)):yt(19791,{yu:s})}function kR(a,e){const i=e.key,s=i.path.canonicalString();a.du.get(i)||a.Iu.has(s)||(at(Jd,"New document in limbo: "+i),a.Iu.add(s),Wd(a))}function Wd(a){for(;a.Iu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Iu.values().next().value;a.Iu.delete(e);const i=new ft(se.fromString(e)),s=a.mu.next();a.Eu.set(s,new CR(i)),a.du=a.du.insert(i,s),I0(a.remoteStore,new wr(di(Jv(i.path)),s,"TargetPurposeLimboResolution",Rc.ue))}}async function wl(a,e,i){const s=At(a),l=[],h=[],d=[];s.Pu.isEmpty()||(s.Pu.forEach((g,_)=>{d.push(s.gu(_,e,i).then(v=>{var A;if((v||i)&&s.isPrimaryClient){const D=v?!v.fromCache:(A=i?.targetChanges.get(_.targetId))===null||A===void 0?void 0:A.current;s.sharedClientState.updateQueryState(_.targetId,D?"current":"not-current")}if(v){l.push(v);const D=Hd.Es(_.targetId,v);h.push(D)}}))}),await Promise.all(d),s.hu.J_(l),await async function(_,v){const A=At(_);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>$.forEach(v,S=>$.forEach(S.Is,B=>A.persistence.referenceDelegate.addReference(D,S.targetId,B)).next(()=>$.forEach(S.ds,B=>A.persistence.referenceDelegate.removeReference(D,S.targetId,B)))))}catch(D){if(!qs(D))throw D;at(Gd,"Failed to update sequence numbers: "+D)}for(const D of v){const S=D.targetId;if(!D.fromCache){const B=A.Fs.get(S),K=B.snapshotVersion,tt=B.withLastLimboFreeSnapshotVersion(K);A.Fs=A.Fs.insert(S,tt)}}}(s.localStore,h))}async function zR(a,e){const i=At(a);if(!i.currentUser.isEqual(e)){at(Jd,"User change. New user:",e.toKey());const s=await S0(i.localStore,e);i.currentUser=e,function(h,d){h.Vu.forEach(g=>{g.forEach(_=>{_.reject(new rt(Q.CANCELLED,d))})}),h.Vu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wl(i,s.Bs)}}function BR(a,e){const i=At(a),s=i.Eu.get(e);if(s&&s.lu)return xt().add(s.key);{let l=xt();const h=i.Tu.get(e);if(!h)return l;for(const d of h){const g=i.Pu.get(d);l=l.unionWith(g.view.tu)}return l}}function j0(a){const e=At(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=P0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UR.bind(null,e),e.hu.J_=AR.bind(null,e.eventManager),e.hu.pu=bR.bind(null,e.eventManager),e}function jR(a){const e=At(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PR.bind(null,e),e}class Ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,i){return null}Fu(e,i){return null}vu(e){return qS(this.persistence,new zS,e.initialUser,this.serializer)}Du(e){return new b0(qd.Vi,this.serializer)}bu(e){return new XS}async terminate(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ac.provider={build:()=>new Ac};class qR extends Ac{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,i){Qt(this.persistence.referenceDelegate instanceof Ec,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new SS(s,e.asyncQueue,i)}Du(e){const i=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new b0(s=>Ec.Vi(s,i),this.serializer)}}class Td{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>$_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=zR.bind(null,this.syncEngine),await yR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vR}()}createDatastore(e){const i=xc(e.databaseInfo.databaseId),s=function(h){return new tR(h)}(e.databaseInfo);return function(h,d,g,_){return new rR(h,d,g,_)}(e.authCredentials,e.appCheckCredentials,s,i)}createRemoteStore(e){return function(s,l,h,d,g){return new sR(s,l,h,d,g)}(this.localStore,this.datastore,e.asyncQueue,i=>$_(this.syncEngine,i,0),function(){return G_.C()?new G_:new $S}())}createSyncEngine(e,i){return function(l,h,d,g,_,v,A){const D=new IR(l,h,d,g,_,v);return A&&(D.fu=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await async function(l){const h=At(l);at(Da,"RemoteStore shutting down."),h.Ia.add(5),await Rl(h),h.Ea.shutdown(),h.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}Td.provider={build:()=>new Td};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,i){setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class GR{constructor(e,i,s,l,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=l,this.user=an.UNAUTHENTICATED,this.clientId=Nd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,async d=>{at(zr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(at(zr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const s=$d(i,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Zf(a,e){a.asyncQueue.verifyOperationInProgress(),at(zr,"Initializing OfflineComponentProvider");const i=a.configuration;await e.initialize(i);let s=i.initialUser;a.setCredentialChangeListener(async l=>{s.isEqual(l)||(await S0(e.localStore,l),s=l)}),e.persistence.setDatabaseDeletedListener(()=>{xr("Terminating Firestore due to IndexedDb database deletion"),a.terminate().then(()=>{at("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(l=>{xr("Terminating Firestore due to IndexedDb database deletion failed",l)})}),a._offlineComponents=e}async function J_(a,e){a.asyncQueue.verifyOperationInProgress();const i=await FR(a);at(zr,"Initializing OnlineComponentProvider"),await e.initialize(i,a.configuration),a.setCredentialChangeListener(s=>Y_(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,l)=>Y_(e.remoteStore,l)),a._onlineComponents=e}async function FR(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){at(zr,"Using user provided OfflineComponentProvider");try{await Zf(a,a._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(l){return l.name==="FirebaseError"?l.code===Q.FAILED_PRECONDITION||l.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;xr("Error using user provided cache. Falling back to memory cache: "+i),await Zf(a,new Ac)}}else at(zr,"Using default OfflineComponentProvider"),await Zf(a,new qR(void 0));return a._offlineComponents}async function q0(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(at(zr,"Using user provided OnlineComponentProvider"),await J_(a,a._uninitializedComponentsProvider._online)):(at(zr,"Using default OnlineComponentProvider"),await J_(a,new Td))),a._onlineComponents}function YR(a){return q0(a).then(e=>e.syncEngine)}async function QR(a){const e=await q0(a),i=e.eventManager;return i.onListen=DR.bind(null,e.syncEngine),i.onUnlisten=VR.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=NR.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=xR.bind(null,e.syncEngine),i}function KR(a,e,i={}){const s=new Or;return a.asyncQueue.enqueueAndForget(async()=>function(h,d,g,_,v){const A=new HR({next:S=>{A.Ou(),d.enqueueAndForget(()=>TR(h,D)),S.fromCache&&_.source==="server"?v.reject(new rt(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),D=new SR(g,A,{includeMetadataChanges:!0,ka:!0});return ER(h,D)}(await QR(a),a.asyncQueue,e,i,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="firestore.googleapis.com",tv=!0;class ev{constructor(e){var i,s;if(e.host===void 0){if(e.ssl!==void 0)throw new rt(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G0,this.ssl=tv}else this.host=e.host,this.ssl=(i=e.ssl)!==null&&i!==void 0?i:tv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AS)throw new rt(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lc{constructor(e,i,s,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ev({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new rt(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ev(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new ZA;switch(s.type){case"firstParty":return new eb(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rt(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=W_.get(i);s&&(at("ComponentProvider","Removing Datastore"),W_.delete(i),s.terminate())}(this),Promise.resolve()}}function XR(a,e,i,s={}){var l;a=Ia(a,Lc);const h=Cd(e),d=a._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:a._getEmulatorOptions()}),_=`${e}:${i}`;h&&(S1(`https://${_}`),I1("Firestore",!0)),d.host!==G0&&d.host!==_&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:_,ssl:h,emulatorOptions:s});if(!hc(v,g)&&(a._setSettings(v),s.mockUserToken)){let A,D;if(typeof s.mockUserToken=="string")A=s.mockUserToken,D=an.MOCK_USER;else{A=R1(s.mockUserToken,(l=a._app)===null||l===void 0?void 0:l.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new rt(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new an(S)}a._authCredentials=new JA(new Vv(A,D))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Va(this.firestore,e,this._query)}}class Le{constructor(e,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,s){if(Al(i,Le._jsonSchema))return new Le(e,s||null,new ft(se.fromString(i.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:De("string",Le._jsonSchemaVersion),referencePath:De("string")};class Vr extends Va{constructor(e,i,s){super(e,i,Jv(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new ft(e))}withConverter(e){return new Vr(this.firestore,e,this._path)}}function $R(a,e,...i){if(a=Yi(a),Mv("collection","path",e),a instanceof Lc){const s=se.fromString(e,...i);return m_(s),new Vr(a,null,s)}{if(!(a instanceof Le||a instanceof Vr))throw new rt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(se.fromString(e,...i));return m_(s),new Vr(a.firestore,null,s)}}function Ad(a,e,...i){if(a=Yi(a),arguments.length===1&&(e=Nd.newId()),Mv("doc","path",e),a instanceof Lc){const s=se.fromString(e,...i);return d_(s),new Le(a,null,new ft(s))}{if(!(a instanceof Le||a instanceof Vr))throw new rt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(se.fromString(e,...i));return d_(s),new Le(a.firestore,a instanceof Vr?a.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="AsyncQueue";class iv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new w0(this,"async_queue_retry"),this.oc=()=>{const s=$f();s&&at(nv,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const i=$f();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const i=$f();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const i=new Or;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qs(e))throw e;at(nv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const i=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Ki("INTERNAL UNHANDLED ERROR: ",rv(s)),s}).then(s=>(this.nc=!1,s))));return this._c=i,i}enqueueAfterDelay(e,i,s){this.ac(),this.sc.indexOf(e)>-1&&(i=0);const l=Xd.createAndSchedule(this,e,i,s,h=>this.lc(h));return this.ec.push(l),l}ac(){this.tc&&yt(47125,{hc:rv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const i of this.ec)if(i.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((i,s)=>i.targetTimeMs-s.targetTimeMs);for(const i of this.ec)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const i=this.ec.indexOf(e);this.ec.splice(i,1)}}function rv(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}class Cl extends Lc{constructor(e,i,s,l){super(e,i,s,l),this.type="firestore",this._queue=new iv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iv(e),this._firestoreClient=void 0,await e}}}function ZR(a,e){const i=typeof a=="object"?a:kA(),s=typeof a=="string"?a:gc,l=xA(i,"firestore").getImmediate({identifier:s});if(!l._initialized){const h=A1("firestore");h&&XR(l,...h)}return l}function F0(a){if(a._terminated)throw new rt(Q.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||JR(a),a._firestoreClient}function JR(a){var e,i,s;const l=a._freezeSettings(),h=function(g,_,v,A){return new yb(g,_,v,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,H0(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)}(a._databaseId,((e=a._app)===null||e===void 0?void 0:e.options.appId)||"",a._persistenceKey,l);a._componentsProvider||!((i=l.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(a._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),a._firestoreClient=new GR(a._authCredentials,a._appCheckCredentials,a._queue,h,a._componentsProvider&&function(g){const _=g?._online.build();return{_offline:g?._offline.build(_),_online:_}}(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(tn.fromBase64String(e))}catch(i){throw new rt(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new zn(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Al(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:De("string",zn._jsonSchemaVersion),bytes:De("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new rt(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new rt(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new rt(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(Al(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:De("string",gi._jsonSchemaVersion),latitude:De("number"),longitude:De("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map(i=>i)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,l){if(s.length!==l.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==l[h])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Al(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(i=>typeof i=="number"))return new pi(e.vectorValues);throw new rt(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:De("string",pi._jsonSchemaVersion),vectorValues:De("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=/^__.*__$/;class t2{constructor(e,i,s){this.data=e,this.fieldMask=i,this.fieldTransforms=s}toMutation(e,i){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,i,this.fieldTransforms):new bl(e,this.data,i,this.fieldTransforms)}}class Y0{constructor(e,i,s){this.data=e,this.fieldMask=i,this.fieldTransforms=s}toMutation(e,i){return new jr(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function Q0(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ec:a})}}class tm{constructor(e,i,s,l,h,d){this.settings=e,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=l,h===void 0&&this.Ac(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new tm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var i;const s=(i=this.path)===null||i===void 0?void 0:i.child(e),l=this.Rc({path:s,mc:!1});return l.fc(e),l}gc(e){var i;const s=(i=this.path)===null||i===void 0?void 0:i.child(e),l=this.Rc({path:s,mc:!1});return l.Ac(),l}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return bc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Q0(this.Ec)&&WR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class e2{constructor(e,i,s){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=s||xc(e)}Dc(e,i,s,l=!1){return new tm({Ec:e,methodName:i,bc:s,path:We.emptyPath(),mc:!1,Sc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function em(a){const e=a._freezeSettings(),i=xc(a._databaseId);return new e2(a._databaseId,!!e.ignoreUndefinedProperties,i)}function n2(a,e,i,s,l,h={}){const d=a.Dc(h.merge||h.mergeFields?2:0,e,i,l);im("Data must be an object, but it was:",d,s);const g=K0(s,d);let _,v;if(h.merge)_=new Rn(d.fieldMask),v=d.fieldTransforms;else if(h.mergeFields){const A=[];for(const D of h.mergeFields){const S=bd(e,D,i);if(!d.contains(S))throw new rt(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);$0(A,S)||A.push(S)}_=new Rn(A),v=d.fieldTransforms.filter(D=>_.covers(D.field))}else _=null,v=d.fieldTransforms;return new t2(new pn(g),_,v)}class zc extends kc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zc}}class nm extends kc{_toFieldTransform(e){return new Hb(e.path,new _l)}isEqual(e){return e instanceof nm}}function i2(a,e,i,s){const l=a.Dc(1,e,i);im("Data must be an object, but it was:",l,s);const h=[],d=pn.empty();Br(s,(_,v)=>{const A=rm(e,_,i);v=Yi(v);const D=l.gc(A);if(v instanceof zc)h.push(A);else{const S=Il(v,D);S!=null&&(h.push(A),d.set(A,S))}});const g=new Rn(h);return new Y0(d,g,l.fieldTransforms)}function r2(a,e,i,s,l,h){const d=a.Dc(1,e,i),g=[bd(e,s,i)],_=[l];if(h.length%2!=0)throw new rt(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<h.length;S+=2)g.push(bd(e,h[S])),_.push(h[S+1]);const v=[],A=pn.empty();for(let S=g.length-1;S>=0;--S)if(!$0(v,g[S])){const B=g[S];let K=_[S];K=Yi(K);const tt=d.gc(B);if(K instanceof zc)v.push(B);else{const W=Il(K,tt);W!=null&&(v.push(B),A.set(B,W))}}const D=new Rn(v);return new Y0(A,D,d.fieldTransforms)}function a2(a,e,i,s=!1){return Il(i,a.Dc(s?4:3,e))}function Il(a,e){if(X0(a=Yi(a)))return im("Unsupported field value:",e,a),K0(a,e);if(a instanceof kc)return function(s,l){if(!Q0(l.Ec))throw l.wc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.wc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,l){const h=[];let d=0;for(const g of s){let _=Il(g,l.yc(d));_==null&&(_={nullValue:"NULL_VALUE"}),h.push(_),d++}return{arrayValue:{values:h}}}(a,e)}return function(s,l){if((s=Yi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Bb(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=ue.fromDate(s);return{timestampValue:vc(l.serializer,h)}}if(s instanceof ue){const h=new ue(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vc(l.serializer,h)}}if(s instanceof gi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zn)return{bytesValue:g0(l.serializer,s._byteString)};if(s instanceof Le){const h=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(h))throw l.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Bd(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof pi)return function(d,g){return{mapValue:{fields:{[Hv]:{stringValue:Gv},[pc]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw g.wc("VectorValues must only contain numeric values.");return Ld(g.serializer,v)})}}}}}}(s,l);throw l.wc(`Unsupported field value: ${Sc(s)}`)}(a,e)}function K0(a,e){const i={};return Pv(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(a,(s,l)=>{const h=Il(l,e.Vc(s));h!=null&&(i[s]=h)}),{mapValue:{fields:i}}}function X0(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof ue||a instanceof gi||a instanceof zn||a instanceof Le||a instanceof kc||a instanceof pi)}function im(a,e,i){if(!X0(i)||!Uv(i)){const s=Sc(i);throw s==="an object"?e.wc(a+" a custom object"):e.wc(a+" "+s)}}function bd(a,e,i){if((e=Yi(e))instanceof Pc)return e._internalPath;if(typeof e=="string")return rm(a,e);throw bc("Field path arguments must be of type string or ",a,!1,void 0,i)}const s2=new RegExp("[~\\*/\\[\\]]");function rm(a,e,i){if(e.search(s2)>=0)throw bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,i);try{return new Pc(...e.split("."))._internalPath}catch{throw bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,i)}}function bc(a,e,i,s,l){const h=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(h||d)&&(_+=" (found",h&&(_+=` in field ${s}`),d&&(_+=` in document ${l}`),_+=")"),new rt(Q.INVALID_ARGUMENT,g+a+_)}function $0(a,e){return a.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,i,s,l,h){this._firestore=e,this._userDataWriter=i,this._key=s,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(am("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class o2 extends Z0{data(){return super.data()}}function am(a,e){return typeof e=="string"?rm(a,e):e instanceof Pc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new rt(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sm{}class J0 extends sm{}function u2(a,e,...i){let s=[];e instanceof sm&&s.push(e),s=s.concat(i),function(h){const d=h.filter(_=>_ instanceof lm).length,g=h.filter(_=>_ instanceof om).length;if(d>1||d>0&&g>0)throw new rt(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const l of s)a=l._apply(a);return a}class om extends J0{constructor(e,i,s){super(),this._field=e,this._op=i,this._value=s,this.type="where"}static _create(e,i,s){return new om(e,i,s)}_apply(e){const i=this._parse(e);return W0(e._query,i),new Va(e.firestore,e.converter,hd(e._query,i))}_parse(e){const i=em(e.firestore);return function(h,d,g,_,v,A,D){let S;if(v.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new rt(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){sv(D,A);const K=[];for(const tt of D)K.push(av(_,h,tt));S={arrayValue:{values:K}}}else S=av(_,h,D)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||sv(D,A),S=a2(g,d,D,A==="in"||A==="not-in");return Ie.create(v,A,S)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}class lm extends sm{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new lm(e,i)}_parse(e){const i=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return i.length===1?i[0]:Kn.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(l,h){let d=l;const g=h.getFlattenedFilters();for(const _ of g)W0(d,_),d=hd(d,_)}(e._query,i),new Va(e.firestore,e.converter,hd(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class um extends J0{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new um(e,i)}_apply(e){const i=function(l,h,d){if(l.startAt!==null)throw new rt(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new rt(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yl(h,d)}(e._query,this._field,this._direction);return new Va(e.firestore,e.converter,function(l,h){const d=l.explicitOrderBy.concat([h]);return new Hs(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e._query,i))}}function c2(a,e="asc"){const i=e,s=am("orderBy",a);return um._create(s,i)}function av(a,e,i){if(typeof(i=Yi(i))=="string"){if(i==="")throw new rt(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wv(e)&&i.indexOf("/")!==-1)throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const s=e.path.child(se.fromString(i));if(!ft.isDocumentKey(s))throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return A_(a,new ft(s))}if(i instanceof Le)return A_(a,i._key);throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sc(i)}.`)}function sv(a,e){if(!Array.isArray(a)||a.length===0)throw new rt(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W0(a,e){const i=function(l,h){for(const d of l)for(const g of d.getFlattenedFilters())if(h.indexOf(g.op)>=0)return g.op;return null}(a.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new rt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new rt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class h2{convertValue(e,i="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw yt(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const s={};return Br(e,(l,h)=>{s[l]=this.convertValue(h,i)}),s}convertVectorValue(e){var i,s,l;const h=(l=(s=(i=e.fields)===null||i===void 0?void 0:i[pc].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(d=>Te(d.doubleValue));return new pi(h)}convertGeoPoint(e){return new gi(Te(e.latitude),Te(e.longitude))}convertArray(e,i){return(e.values||[]).map(s=>this.convertValue(s,i))}convertServerTimestamp(e,i){switch(i){case"previous":const s=Cc(e);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const i=Ur(e);return new ue(i.seconds,i.nanos)}convertDocumentKey(e,i){const s=se.fromString(e);Qt(T0(s),9688,{name:e});const l=new gl(s.get(1),s.get(3)),h=new ft(s.popFirst(5));return l.isEqual(i)||Ki(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(a,e,i){let s;return s=a?a.toFirestore(e):e,s}class ec{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Os extends Z0{constructor(e,i,s,l,h,d){super(e,i,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const s=this._document.data.field(am("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Os._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Os._jsonSchemaVersion="firestore/documentSnapshot/1.0",Os._jsonSchema={type:De("string",Os._jsonSchemaVersion),bundleSource:De("string","DocumentSnapshot"),bundleName:De("string"),bundle:De("string")};class lc extends Os{data(e={}){return super.data(e)}}class Vs{constructor(e,i,s,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new ec(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(s=>{e.call(i,new lc(this._firestore,this._userDataWriter,s.key,s,new ec(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new rt(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const _=new lc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new ec(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const _=new lc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new ec(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let v=-1,A=-1;return g.type!==0&&(v=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:d2(g.type),doc:_,oldIndex:v,newIndex:A}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],l=[];return this.docs.forEach(h=>{h._document!==null&&(i.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d2(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:a})}}Vs._jsonSchemaVersion="firestore/querySnapshot/1.0",Vs._jsonSchema={type:De("string",Vs._jsonSchemaVersion),bundleSource:De("string","QuerySnapshot"),bundleName:De("string"),bundle:De("string")};class m2 extends h2{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,i)}}function g2(a){a=Ia(a,Va);const e=Ia(a.firestore,Cl),i=F0(e),s=new m2(e);return l2(a._query),KR(i,a._query).then(l=>new Vs(e,s,a,l))}function p2(a,e,i,...s){a=Ia(a,Le);const l=Ia(a.firestore,Cl),h=em(l);let d;return d=typeof(e=Yi(e))=="string"||e instanceof Pc?r2(h,"updateDoc",a._key,e,i,s):i2(h,"updateDoc",a._key,e),cm(l,[d.toMutation(a._key,Qn.exists(!0))])}function y2(a){return cm(Ia(a.firestore,Cl),[new Pd(a._key,Qn.none())])}function ov(a,e){const i=Ia(a.firestore,Cl),s=Ad(a),l=f2(a.converter,e);return cm(i,[n2(em(a.firestore),"addDoc",s._key,l,a.converter!==null,{}).toMutation(s._key,Qn.exists(!1))]).then(()=>s)}function cm(a,e){return function(s,l){const h=new Or;return s.asyncQueue.enqueueAndForget(async()=>MR(await YR(s),l,h)),h.promise}(F0(a),e)}function lv(){return new nm("serverTimestamp")}(function(e,i=!0){(function(l){Bs=l})(PA),dc(new hl("firestore",(s,{instanceIdentifier:l,options:h})=>{const d=s.getProvider("app").getImmediate(),g=new Cl(new WA(s.getProvider("auth-internal")),new nb(d,s.getProvider("app-check-internal")),function(v,A){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new rt(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(v.options.projectId,A)}(d,l),d);return h=Object.assign({useFetchStreams:i},h),g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),Ds(l_,u_,e),Ds(l_,u_,"esm2017")})();const _2="https://placehold.co/100x100/4F46E5/ffffff?text=CS",tE={apiKey:"AIzaSyApQl0pE8DBMRFIr6G2Bv89Nu6uk0W5dzE",authDomain:"visiting-card-d4126.firebaseapp.com",projectId:"visiting-card-d4126",storageBucket:"visiting-card-d4126.firebasestorage.app",messagingSenderId:"1094782640799",appId:"1:1094782640799:web:a735d0e2bca54ad6a278aa"},Jf="AIzaSyAlmGHbDwLggS9ob3Qe2ALiYNoV7cU4k5k",uc=tE?.projectId,eE=["Architect","Ashrams","Builders","Building Materials","Car Detailing","Client","Club","Cold Storage","Consumer","Dairy","Dealership/Partnership","Developer","Export","Export Partner","Factory","Family","Friend","Govt Contractor","Govt Deptt","Green building","Hardware","Heat Insulation","Home","Hospitals","Hotels","Interior Designer","Office","Paint Contractors","Paint Dealers","Paint shop","Partner","Pre Fabrication","Purchase","Raw Material","School","Society","Solar panel","Vendor","Others"].sort();let Sa,ba;if(uc)try{const a=Av(tE);Sa=ZR(a),ba=$R(Sa,"visiting_cards")}catch(a){console.error("Firebase initialization error:",a.message)}const v2=ks.memo(({extractedData:a,...e})=>a?H.jsx(E2,{extractedData:a,...e}):H.jsxs("div",{className:"card",children:[H.jsxs("div",{className:"tabs",children:[H.jsx("button",{className:`tab ${e.mode==="single"?"active":""}`,onClick:()=>e.setMode("single"),children:"Single Card"}),H.jsx("button",{className:`tab ${e.mode==="bulk"?"active":""}`,onClick:()=>e.setMode("bulk"),children:"Bulk Upload"}),H.jsx("button",{className:`tab ${e.mode==="chat"?"active":""}`,onClick:()=>e.setMode("chat"),children:"AI Assistant"})]}),H.jsx("input",{type:"file",ref:e.fileInputRef,onChange:e.handleFileChange,accept:"image/*",multiple:e.mode==="bulk",style:{display:"none"}}),e.mode==="single"&&H.jsx(T2,{...e}),e.mode==="bulk"&&H.jsx(A2,{...e}),e.mode==="chat"&&H.jsx(b2,{...e})]})),E2=ks.memo(({extractedData:a,...e})=>H.jsxs("div",{className:"card",children:[H.jsx("h2",{className:"card-title",children:"id"in a?"Edit Contact":"Verify & Save Contact"}),H.jsxs("div",{className:"form-grid",children:[Ss("Name","name",a,e.handleDataChange),Ss("Designation","designation",a,e.handleDataChange),Ss("Company","company",a,e.handleDataChange),S2("Group","group",a,e.handleDataChange),Ss("WhatsApp Number","whatsapp",a,e.handleDataChange),Wf("Phone Numbers","phoneNumbers",a,e.handleDataChange,e.handleArrayDataChange),Wf("Emails","emails",a,e.handleDataChange,e.handleArrayDataChange),Wf("Websites","websites",a,e.handleDataChange,e.handleArrayDataChange),Ss("Address","address",a,e.handleDataChange,!0),Ss("Notes","notes",a,e.handleDataChange,!0)]}),H.jsxs("div",{className:"actions-row",children:[H.jsx("button",{onClick:e.handleSave,disabled:e.isLoading,className:"btn-primary",children:"Save Contact"}),H.jsx("button",{onClick:e.resetState,className:"btn-cancel",children:"Cancel"})]})]})),T2=ks.memo(a=>{const e=window.isSecureContext;return H.jsxs(H.Fragment,{children:[a.frontImageBase64?H.jsxs("div",{className:"image-previews",children:[H.jsxs("div",{className:"preview-container",children:[H.jsx("img",{src:`data:image/jpeg;base64,${a.frontImageBase64}`,alt:"Front Preview"}),H.jsx("p",{children:"Front / Profile"})]}),H.jsx("div",{className:"preview-container",children:a.backImageBase64?H.jsx("img",{src:`data:image/jpeg;base64,${a.backImageBase64}`,alt:"Back Preview"}):H.jsxs("div",{onClick:()=>a.fileInputRef.current?.click(),className:"upload-box-small",children:[H.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[H.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),H.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),H.jsx("p",{children:"Add back side"})]})})]}):H.jsxs("div",{onClick:()=>a.fileInputRef.current?.click(),className:"upload-box",children:[H.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[H.jsx("path",{d:"M4 15l4-4c.928-.893 2.072-.893 3 0l4 4"}),H.jsx("path",{d:"M14 14l1-1c.928-.893 2.072-.893 3 0l2 2"}),H.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"})]}),H.jsxs("p",{children:[H.jsx("span",{children:"Upload Card Image"})," or use camera"]}),H.jsx("p",{className:"upload-box-subtitle",children:"PNG, JPG, GIF up to 10MB"})]}),H.jsxs("div",{className:"actions-row",children:[H.jsx("button",{onClick:()=>a.frontImageBase64&&a.processCardImages(a.frontImageBase64,a.backImageBase64),disabled:a.isLoading||!a.frontImageBase64,className:"btn-primary",children:"Process Card"}),H.jsx("button",{onClick:()=>a.openCamera(a.frontImageBase64?"back":"front"),disabled:a.isLoading||!!a.frontImageBase64&&!!a.backImageBase64||!e,className:"btn-secondary",title:e?"Use your device's camera":"Camera requires a secure (HTTPS) connection",children:"Use Camera"})]})]})}),A2=ks.memo(a=>H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"actions-row",children:H.jsx("button",{onClick:()=>a.fileInputRef.current?.click(),disabled:a.isLoading,className:"btn-primary",children:"Upload Multiple Cards"})}),a.bulkItems.length>0&&H.jsxs("div",{className:"bulk-list",children:[H.jsx("ul",{children:a.bulkItems.map(e=>H.jsxs("li",{className:"bulk-item",children:[H.jsx("span",{className:"bulk-item-name",children:e.file.name}),H.jsx("span",{className:`status-badge status-${e.status}`,children:e.status})]},e.id))}),H.jsx("div",{className:"actions-row",children:H.jsx("button",{onClick:a.saveAllBulk,disabled:a.isLoading||a.bulkItems.every(e=>e.status!=="success"),className:"btn-primary",children:"Save All Successful"})})]})]})),b2=ks.memo(({chatHistory:a,isChatLoading:e,chatInput:i,setChatInput:s,handleCommandSubmit:l,chatDisplayRef:h})=>H.jsxs("div",{className:"chat-container",children:[H.jsxs("div",{className:"chat-display",ref:h,children:[a.length===0?H.jsxs("div",{className:"chat-placeholder",children:[H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:H.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),H.jsx("p",{children:"Ask anything about your contacts!"}),H.jsx("p",{className:"chat-placeholder-subtitle",children:'e.g., "Who works at Google?"'})]}):a.map((d,g)=>H.jsx("div",{className:`chat-message ${d.role==="user"?"user":"model"}`,children:H.jsx("p",{children:d.text})},g)),e&&a[a.length-1]?.role==="model"&&H.jsx("div",{className:"chat-message model",children:H.jsx("span",{className:"typing-indicator"})})]}),H.jsxs("form",{onSubmit:d=>{d.preventDefault(),l()},className:"chat-form",children:[H.jsx("input",{type:"text",value:i,onChange:d=>s(d.target.value),placeholder:"Ask the AI assistant...",disabled:e}),H.jsx("button",{type:"submit",disabled:e||!i.trim(),children:H.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[H.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),H.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})),Ss=(a,e,i,s,l=!1)=>{const h={id:e,value:i?.[e]||"",onChange:d=>s(e,d.target.value)};return H.jsxs("div",{className:`form-group ${l?"full-width":""}`,children:[H.jsx("label",{htmlFor:e,children:a}),l?H.jsx("textarea",{...h,rows:3}):H.jsx("input",{type:"text",...h})]})},S2=(a,e,i,s)=>H.jsxs("div",{className:"form-group",children:[H.jsx("label",{htmlFor:e,children:a}),H.jsxs("select",{id:e,value:i?.[e]||"",onChange:l=>s(e,l.target.value),children:[H.jsx("option",{value:"",disabled:!0,children:"Select a group"}),eE.map(l=>H.jsx("option",{value:l,children:l},l))]})]}),Wf=(a,e,i,s,l)=>H.jsxs("div",{className:"form-group full-width",children:[H.jsx("label",{children:a}),(i?.[e]||[]).map((h,d)=>H.jsx("input",{type:"text",value:h,onChange:g=>l(e,d,g.target.value)},d)),H.jsxs("button",{onClick:()=>s(e,[...i?.[e]||[],""]),className:"btn-add-field",children:["+ Add ",a.slice(0,-1)]})]}),R2=()=>{const[a,e]=fe.useState("single"),[i,s]=fe.useState([]),[l,h]=fe.useState(!1),[d,g]=fe.useState(null),[_,v]=fe.useState(null),[A,D]=fe.useState(null),[S,B]=fe.useState(null),[K,tt]=fe.useState(!1),[W,wt]=fe.useState("front"),[mt,dt]=fe.useState(!1),[Mt,_t]=fe.useState([]),[Ut,V]=fe.useState(""),[b,C]=fe.useState([]),[O,x]=fe.useState(!1),[M,w]=fe.useState(null),ye=fe.useRef(null),Ft=fe.useRef(null),G=fe.useRef(null);fe.useEffect(()=>{const ot=ct=>{ct.preventDefault(),w(ct)};return window.addEventListener("beforeinstallprompt",ot),()=>{window.removeEventListener("beforeinstallprompt",ot)}},[]),fe.useEffect(()=>{G.current&&(G.current.scrollTop=G.current.scrollHeight)},[b]);const nt=fe.useCallback(async()=>{if(ba){h(!0);try{const ot=u2(ba,c2("createdAt","desc")),Ct=(await g2(ot)).docs.map(bt=>({id:bt.id,...bt.data()}));s(Ct)}catch(ot){console.error("Failed to load contacts:",ot.message),g("Could not load saved contacts.")}h(!1)}},[]);fe.useEffect(()=>{uc&&nt()},[nt]),fe.useEffect(()=>{let ot=null;const ct=Ft.current;return(async()=>{if(!(!K||!ct)){if(dt(!1),!window.isSecureContext){g("Camera access requires a secure connection (HTTPS)."),tt(!1);return}try{ot=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),ct.srcObject=ot}catch(bt){bt instanceof DOMException&&(bt.name==="NotAllowedError"||bt.name==="PermissionDeniedError")?g("Camera permission was denied. Please enable it in your browser settings."):g("Could not access the camera. It might be in use by another app."),console.error("Camera access error:",bt),tt(!1)}}})(),()=>{ot&&ot.getTracks().forEach(bt=>bt.stop())}},[K]);const lt=()=>{Ft.current&&Ft.current.play().then(()=>{dt(!0)}).catch(ot=>{console.error("Video play failed:",ot),g("Could not start camera stream."),tt(!1)})},jt=async()=>{if(M){M.prompt();const{outcome:ot}=await M.userChoice;ot==="accepted"&&console.log("User accepted the install prompt"),w(null)}},I=()=>{v(null),D(null),B(null),_t([]),g(null),h(!1),e("single")},Z=ot=>{const ct=ot.target.files;if(!ct||ct.length===0)return;const Ct=(bt,ne)=>{const oe=new FileReader;oe.onloadend=()=>{const Fe=oe.result.split(",")[1];if(ne){const ie={id:`${bt.name}-${Date.now()}`,file:bt,base64:Fe,status:"pending"};_t(Ye=>[...Ye,ie]),St(Fe,null,ie.id)}else _?D(Fe):v(Fe)},oe.readAsDataURL(bt)};a==="bulk"?Array.from(ct).forEach(bt=>Ct(bt,!0)):Ct(ct[0],!1),ye.current&&(ye.current.value="")},it=ot=>{wt(ot),tt(!0)},J=()=>{tt(!1)},ht=()=>{if(!Ft.current||!mt||Ft.current.videoWidth===0){g("Camera is not ready yet.");return}const ot=Ft.current,ct=document.createElement("canvas");ct.width=ot.videoWidth,ct.height=ot.videoHeight;const Ct=ct.getContext("2d");if(Ct){Ct.drawImage(ot,0,0,ct.width,ct.height);const bt=ct.toDataURL("image/jpeg").split(",")[1];W==="front"?v(bt):D(bt),J()}else g("Could not process image from camera.")},St=async(ot,ct,Ct)=>{Ct?_t(bt=>bt.map(ne=>ne.id===Ct?{...ne,status:"processing"}:ne)):(h(!0),B(null)),g(null);try{const ne=new Xy(Jf).getGenerativeModel({model:"gemini-1.5-flash"}),oe=[{inlineData:{mimeType:"image/jpeg",data:ot}}];ct&&oe.push({inlineData:{mimeType:"image/jpeg",data:ct}});const Fe=`Analyze the business card image(s) and extract contact details. Return a single JSON object with keys: "name", "designation", "company", "phoneNumbers", "emails", "websites", "address", "whatsapp", "group", "notes". For the "group" field, categorize the contact based on their profession or company into one of the following options: ${eE.join(", ")}. If no category fits, use "Others". If info is not found, use empty strings or arrays.`;oe.push({text:Fe});const ie=await ne.generateContent({contents:[{role:"user",parts:oe}],generationConfig:{responseMimeType:"application/json"}}),Ye=JSON.parse(ie.response.text());Ct?_t(ke=>ke.map(Zt=>Zt.id===Ct?{...Zt,status:"success",extractedData:Ye}:Zt)):B(Ye)}catch(bt){const ne=bt;console.error("Error processing card:",ne.message);const oe=`Failed to process image. ${ne.message||"An unknown error occurred."}`;Ct?_t(Fe=>Fe.map(ie=>ie.id===Ct?{...ie,status:"error",error:oe}:ie)):g(oe)}finally{Ct||h(!1)}},vt=(ot,ct)=>{B(Ct=>Ct?{...Ct,[ot]:ct}:null)},Ae=(ot,ct,Ct)=>{B(bt=>{if(!bt)return null;const oe=[...bt[ot]||[]];return oe[ct]=Ct,{...bt,[ot]:oe}})},$t=async()=>{if(!Sa||!ba||!S||!_){g("Cannot save contact. Check configuration and data.");return}h(!0);const ot={name:S.name||"",designation:S.designation||"",company:S.company||"",phoneNumbers:S.phoneNumbers||[],emails:S.emails||[],websites:S.websites||[],address:S.address||"",imageBase64:_,notes:S.notes||"",group:S.group||"",whatsapp:S.whatsapp||"",createdAt:lv()};try{"id"in S&&S.id?await p2(Ad(Sa,"visiting_cards",S.id),ot):await ov(ba,ot),I(),nt()}catch{g("Failed to save contact."),h(!1)}},wn=ot=>{const{name:ct,designation:Ct,company:bt,phoneNumbers:ne,emails:oe,websites:Fe,address:ie,whatsapp:Ye}=ot;let ke=`BEGIN:VCARD
VERSION:3.0
`;if(ct){const le=ct.split(" "),$i=le.pop()||"",Fs=le.join(" ");ke+=`FN:${ct}
`,ke+=`N:${$i};${Fs};;;
`}bt&&(ke+=`ORG:${bt}
`),Ct&&(ke+=`TITLE:${Ct}
`),ne&&ne.forEach((le,$i)=>{ke+=`TEL;TYPE=WORK,VOICE${$i===0?",PREF":""}:${le}
`}),Ye&&(ke+=`TEL;TYPE=CELL,WHATSAPP:${Ye}
`),oe&&oe.forEach(le=>{ke+=`EMAIL:${le}
`}),Fe&&Fe.forEach(le=>{ke+=`URL:${le}
`}),ie&&(ke+=`ADR;TYPE=WORK:;;${ie.replace(/\n/g,"\\n")};;;;
`),ke+="END:VCARD";const Zt=new Blob([ke],{type:"text/vcard;charset=utf-8"}),qt=URL.createObjectURL(Zt),Ne=document.createElement("a");Ne.href=qt,Ne.download=(ct?.replace(/\s/g,"_")||"contact")+".vcf",document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(qt)},Xn=()=>{S&&(wn(S),$t())},Bn=async()=>{if(!Sa||!ba)return;const ot=Mt.filter(Ct=>Ct.status==="success"&&Ct.extractedData);if(ot.length===0)return;h(!0);let ct=0;for(const Ct of ot)if(Ct.extractedData)try{const bt={...Ct.extractedData,imageBase64:Ct.base64,createdAt:lv()};await ov(ba,bt),ct++}catch(bt){console.error(`Failed to save ${Ct.file.name}:`,bt.message)}alert(`${ct} of ${ot.length} contacts saved.`),I(),nt()},_i=async ot=>{if(Sa&&window.confirm("Are you sure you want to delete this contact?"))try{await y2(Ad(Sa,"visiting_cards",ot)),S&&S.id===ot&&I(),nt()}catch{g("Failed to delete contact.")}},vi=ot=>{B(ot),v(ot.imageBase64),D(null),e("single"),window.scrollTo({top:0,behavior:"smooth"})},Ei=async()=>{if(!Ut.trim()||O||!Jf)return;const ot={role:"user",text:Ut.trim()};C(ct=>[...ct,ot,{role:"model",text:""}]),V(""),x(!0);try{const Ct=new Xy(Jf).getGenerativeModel({model:"gemini-1.5-flash"}),ne=`You are an AI assistant for a business card app. Answer questions about the user's saved contacts based STRICTLY on this JSON data. If info isn't present, say so. Keep answers concise. Contact data: ${JSON.stringify(i.map(ie=>({name:ie.name,designation:ie.designation,company:ie.company,phoneNumbers:ie.phoneNumbers,emails:ie.emails,group:ie.group})))}

User question: ${ot.text}`,Fe=(await Ct.generateContent(ne)).response.text();C(ie=>{const Ye=[...ie];return Ye[Ye.length-1]={role:"model",text:Fe},Ye})}catch(ct){const Ct=`Sorry, an error occurred: ${ct.message}`;C(bt=>{const ne=[...bt];return ne[ne.length-1]={role:"model",text:Ct},ne})}finally{x(!1)}};if(!uc)return H.jsx("div",{className:"config-error-container",children:H.jsxs("div",{className:"config-error-box",children:[H.jsx("h2",{children:"Configuration Error"}),H.jsx("p",{children:"Please make sure your Firebase and Google AI API keys are correctly set up in your environment variables."}),!uc&&H.jsx("p",{className:"error-highlight",children:"Firebase configuration is INCOMPLETE."}),!1]})});const qr={mode:a,setMode:e,isLoading:l,extractedData:S,frontImageBase64:_,backImageBase64:A,fileInputRef:ye,handleFileChange:Z,processCardImages:St,openCamera:it,bulkItems:Mt,saveAllBulk:Bn,chatHistory:b,isChatLoading:O,chatInput:Ut,setChatInput:V,handleCommandSubmit:Ei,chatDisplayRef:G,handleDataChange:vt,handleArrayDataChange:Ae,handleSave:Xn,resetState:I};return H.jsxs(H.Fragment,{children:[H.jsx("style",{children:`
      /* --- Global Styles & Resets --- */
      :root {
        --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        --c-bg: #f8fafc; --c-text: #1e293b; --c-border: #e2e8f0;
        --c-primary: #4f46e5; --c-primary-hover: #4338ca; --c-primary-text: #ffffff;
        --c-secondary: #334155; --c-secondary-hover: #1e293b; --c-secondary-text: #ffffff;
        --c-card-bg: #ffffff; --c-card-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
        --radius: 0.75rem;
      }
      * { box-sizing: border-box; margin: 0; padding: 0; }
      html { font-family: var(--font-sans); background-color: var(--c-bg); color: var(--c-text); line-height: 1.5; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
      input, button, textarea, select { font-family: inherit; font-size: 1rem; border: 1px solid var(--c-border); border-radius: 0.5rem; padding: 0.75rem 1rem; transition: all 0.2s; }
      button { cursor: pointer; }
      
      /* --- Main Layout --- */
      .app-container { min-height: 100vh; display: flex; flex-direction: column; }
      .app-header { background: rgba(255,255,255,0.8); backdrop-filter: blur(8px); padding: 1rem; border-bottom: 1px solid var(--c-border); display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; position: sticky; top: 0; z-index: 10; }
      .header-title { display: flex; align-items: center; gap: 0.75rem; }
      .app-header img { height: 40px; width: 40px; border-radius: 9999px; }
      .app-header h1 { font-size: 1.25rem; font-weight: 700; }
      .dashboard { display: grid; grid-template-columns: 1fr; gap: 1.5rem; padding: 1rem; max-w: 1280px; margin: 0 auto; width: 100%; }
      @media (min-width: 1024px) { .dashboard { grid-template-columns: 3fr 2fr; padding: 2rem; gap: 2rem; } .app-header { padding: 1rem 2rem; } }
      .app-footer { background-color: var(--c-secondary); color: #cbd5e1; text-align: center; padding: 1.5rem; margin-top: auto; font-size: 0.875rem; }

      /* --- Card & Panel Styles --- */
      .card { background-color: var(--c-card-bg); border-radius: var(--radius); box-shadow: var(--c-card-shadow); padding: 1.25rem; border: 1px solid var(--c-border); }
      .card-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 1.25rem; }
      .contact-list-panel .card-title { margin-bottom: 1rem; }
      .contact-list { max-height: 60vh; overflow-y: auto; padding-right: 0.5rem; display: flex; flex-direction: column; gap: 0.75rem; }
      @media (min-width: 1024px) { .contact-list { max-height: 75vh; } }
      .contact-list-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background-color: var(--c-bg); border-radius: var(--radius); border: 1px solid var(--c-border); transition: all 0.2s; cursor: pointer; }
      .contact-list-item:hover { border-color: var(--c-primary); background-color: #eef2ff; transform: translateY(-2px); box-shadow: var(--c-card-shadow); }
      .contact-info { display: flex; align-items: center; gap: 1rem; overflow: hidden; }
      .contact-info img { height: 48px; width: 48px; border-radius: 9999px; object-fit: cover; flex-shrink: 0; border: 2px solid white; }
      .contact-info-text { overflow: hidden; }
      .contact-info-text h3 { font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 1rem; }
      .contact-info-text p { color: #64748b; font-size: 0.875rem; }
      .contact-actions { display: flex; gap: 0.5rem; }
      .contact-actions button { background: none; border: none; padding: 0.25rem; color: #94a3b8; }
      .contact-actions button:hover { color: var(--c-text); }
      .contact-actions .delete-btn:hover { color: #ef4444; }
      
      /* --- Buttons --- */
      .btn-primary { background-color: var(--c-primary); color: var(--c-primary-text); font-weight: 600; }
      .btn-primary:hover { background-color: var(--c-primary-hover); }
      .btn-primary:disabled, .btn-secondary:disabled, .btn-cancel:disabled { background-color: #9ca3af; cursor: not-allowed; opacity: 0.7; }
      .btn-secondary { background-color: var(--c-secondary); color: var(--c-secondary-text); font-weight: 600; }
      .btn-secondary:hover { background-color: var(--c-secondary-hover); }
      .btn-cancel { background-color: #d1d5db; color: var(--c-text); font-weight: 600; }
      .btn-cancel:hover { background-color: #9ca3af; }
      .btn-add-field { background: none; border: none; padding: 0.25rem 0; color: var(--c-primary); font-weight: 600; font-size: 0.875rem; }
      .btn-install { background-color: var(--c-primary); color: var(--c-primary-text); font-weight: 600; padding: 0.5rem 1rem; font-size: 0.875rem; }
      
      /* --- Forms & Inputs --- */
      .form-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; }
      @media (min-width: 768px) { .form-grid { grid-template-columns: 1fr 1fr; } }
      .form-group.full-width { grid-column: 1 / -1; }
      .form-group label { display: block; font-weight: 500; margin-bottom: 0.5rem; font-size: 0.875rem; }
      .form-group input, .form-group textarea, .form-group select { width: 100%; background-color: #f8fafc; }
      .form-group input:focus, .form-group textarea:focus, .form-group select:focus { outline: 2px solid var(--c-primary); border-color: var(--c-primary); }
      .actions-row { display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1.5rem; }
      
      /* --- Tabs --- */
      .tabs { display: flex; border-bottom: 1px solid var(--c-border); margin-bottom: 1.5rem; }
      .tab { background: none; border: none; padding: 0.75rem 0.5rem; font-size: 0.875rem; font-weight: 600; color: #64748b; border-bottom: 2px solid transparent; margin-bottom: -1px; }
      @media (min-width: 640px) { .tab { padding: 0.75rem 1rem; font-size: 1rem; } }
      .tab.active { color: var(--c-primary); border-bottom-color: var(--c-primary); }
      
      /* --- Upload Box --- */
      .upload-box, .upload-box-small { display: flex; flex-direction: column; align-items: center; justify-content: center; border: 2px dashed var(--c-border); border-radius: var(--radius); text-align: center; transition: all 0.2s; padding: 2.5rem 1.5rem; }
      .upload-box-small { padding: 1.5rem 1rem; height: 100%; }
      .upload-box:hover, .upload-box-small:hover { border-color: var(--c-primary); background-color: #eef2ff; cursor: pointer; }
      .upload-box p span { font-weight: 600; color: var(--c-primary); }
      .upload-box-subtitle { font-size: 0.75rem; color: #64748b; margin-top: 0.25rem; }
      
      /* --- Image Previews --- */
      .image-previews { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem; }
      .preview-container img { width: 100%; border-radius: var(--radius); box-shadow: var(--c-card-shadow); }
      .preview-container p { text-align: center; font-weight: 500; margin-top: 0.5rem; font-size: 0.875rem; }
      
      /* --- Bulk Upload List --- */
      .bulk-list { margin-top: 1.5rem; display: flex; flex-direction: column; gap: 0.75rem; }
      .bulk-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background-color: var(--c-bg); border-radius: 0.5rem; }
      .bulk-item-name { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding-right: 1rem; }
      .status-badge { padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; }
      .status-pending { background-color: #e2e8f0; color: #475569; }
      .status-processing { background-color: #fef3c7; color: #b45309; }
      .status-success { background-color: #dcfce7; color: #166534; }
      .status-error { background-color: #fee2e2; color: #991b1b; }

      /* --- Chat UI --- */
      .chat-container { display: flex; flex-direction: column; }
      .chat-display { height: 20rem; overflow-y: auto; border: 1px solid var(--c-border); border-radius: var(--radius); padding: 1rem; margin-bottom: 1rem; background-color: var(--c-bg); }
      .chat-placeholder { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; text-align: center; color: #64748b; }
      .chat-placeholder svg { margin-bottom: 0.5rem; }
      .chat-placeholder p { font-weight: 600; }
      .chat-placeholder-subtitle { font-size: 0.875rem; font-weight: 400; }
      .chat-message { max-width: 80%; margin-bottom: 1rem; display: flex; }
      .chat-message p { padding: 0.75rem 1rem; border-radius: 1rem; line-break: anywhere; }
      .chat-message.user { justify-content: flex-end; margin-left: auto; }
      .chat-message.user p { background-color: var(--c-primary); color: var(--c-primary-text); border-bottom-right-radius: 0.25rem; }
      .chat-message.model { justify-content: flex-start; }
      .chat-message.model p { background-color: #e2e8f0; color: var(--c-text); border-bottom-left-radius: 0.25rem; }
      .chat-form { display: flex; gap: 0.75rem; }
      .chat-form input { flex-grow: 1; }
      .chat-form button { padding: 0.75rem; background-color: var(--c-primary); color: var(--c-primary-text); }
      .typing-indicator { height: 24px; display: flex; align-items: center; gap: 4px; }
      .typing-indicator span { width: 8px; height: 8px; background-color: #94a3b8; border-radius: 50%; animation: bounce 1.2s infinite ease-in-out; }
      .typing-indicator span:nth-of-type(2) { animation-delay: -1.0s; }
      .typing-indicator span:nth-of-type(3) { animation-delay: -0.8s; }
      @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
      
      /* --- Modals & Overlays --- */
      .video-container { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 50; padding: 1rem; }
      .video-wrapper { position: relative; width: 100%; max-width: 800px; }
      .video-container video { max-width: 100%; max-height: 80vh; border-radius: var(--radius); display: block; }
      .video-controls { display: flex; gap: 1.5rem; margin-top: 1.5rem; }
      .video-controls button { padding: 1rem 2rem; font-size: 1.125rem; border-radius: 9999px; }
      .loading-overlay { position: fixed; inset: 0; background: rgba(255,255,255,0.8); backdrop-filter: blur(4px); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 50; }
      .camera-loading-spinner { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
      .spinner { width: 4rem; height: 4rem; border-radius: 50%; border: 4px solid #e5e7eb; border-top-color: var(--c-primary); animation: spin 1s linear infinite; }
      @keyframes spin { to { transform: rotate(360deg); } }
      .config-error-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; background-color: #111827; padding: 1rem; }
      .config-error-box { background-color: #ef4444; color: #ffffff; padding: 2rem; border-radius: var(--radius); text-align: center; max-width: 450px; }
      .config-error-box h2 { font-size: 1.875rem; font-weight: 700; margin-bottom: 1rem; }
      .config-error-box .error-highlight { font-weight: 600; background: rgba(0,0,0,0.2); padding: 0.25rem 0.5rem; border-radius: 0.25rem; margin-top: 0.5rem; display: inline-block; }
      .notification { position: fixed; bottom: 1rem; left: 1rem; right: 1rem; background-color: var(--c-secondary); color: white; padding: 1rem; border-radius: var(--radius); box-shadow: var(--c-card-shadow); z-index: 100; text-align: center; animation: slide-up 0.5s ease-out; }
      @keyframes slide-up { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      @media (min-width: 640px) { .notification { left: auto; right: 1rem; max-width: 400px; } }
    `}),H.jsxs("div",{className:"app-container",children:[H.jsxs("header",{className:"app-header",children:[H.jsxs("div",{className:"header-title",children:[H.jsx("img",{src:_2,alt:"App Logo"}),H.jsx("h1",{children:"AI Card Scanner"})]}),M&&H.jsx("button",{className:"btn-install",onClick:jt,children:"Install App"})]}),H.jsxs("main",{className:"dashboard",children:[H.jsx("div",{className:"action-panel",children:H.jsx(v2,{extractedData:S,...qr})}),H.jsx("div",{className:"contact-list-panel",children:H.jsxs("div",{className:"card",children:[H.jsx("h2",{className:"card-title",children:"Saved Contacts"}),H.jsx("div",{className:"contact-list",children:i.map(ot=>H.jsxs("div",{onClick:()=>vi(ot),className:"contact-list-item",children:[H.jsxs("div",{className:"contact-info",children:[H.jsx("img",{src:ot.imageBase64?`data:image/jpeg;base64,${ot.imageBase64}`:`https://placehold.co/100x100/e2e8f0/64748b?text=${ot.name.charAt(0)}`,alt:ot.name}),H.jsxs("div",{className:"contact-info-text",children:[H.jsx("h3",{children:ot.name||"No Name"}),H.jsx("p",{children:ot.company||"No Company"})]})]}),H.jsx("div",{className:"contact-actions",children:H.jsx("button",{onClick:ct=>{ct.stopPropagation(),_i(ot.id)},title:"Delete",className:"delete-btn",children:H.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[H.jsx("polyline",{points:"3 6 5 6 21 6"}),H.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),H.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),H.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})})]},ot.id))})]})})]}),K&&H.jsxs("div",{className:"video-container",children:[H.jsxs("div",{className:"video-wrapper",children:[H.jsx("video",{ref:Ft,autoPlay:!0,playsInline:!0,muted:!0,className:"camera-view",onCanPlay:lt}),!mt&&H.jsx("div",{className:"camera-loading-spinner",children:H.jsx("div",{className:"spinner"})})]}),H.jsxs("div",{className:"video-controls",children:[H.jsx("button",{className:"btn-primary",onClick:ht,disabled:!mt,children:"Capture"}),H.jsx("button",{className:"btn-secondary",onClick:J,children:"Cancel"})]})]}),l&&!S&&H.jsxs("div",{className:"loading-overlay",children:[H.jsx("div",{className:"spinner"}),H.jsx("p",{style:{marginTop:"1rem",fontWeight:600},children:"Scanning your card..."})]}),d&&H.jsxs("div",{className:"notification",children:[d,H.jsx("button",{onClick:()=>g(null),style:{marginLeft:"1rem",background:"none",border:"none",color:"white",fontWeight:"bold"},children:"X"})]}),H.jsx("footer",{className:"app-footer",children:H.jsxs("p",{children:["© ",new Date().getFullYear()," AI Card Scanner. All rights reserved."]})})]})]})};LT.createRoot(document.getElementById("root")).render(H.jsx(ks.StrictMode,{children:H.jsx(R2,{})}));
